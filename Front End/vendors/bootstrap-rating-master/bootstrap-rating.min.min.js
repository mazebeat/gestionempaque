!function(e,d){var f=5;e.fn.rating=function(a){return this.each(function(){var B=e(this);if(!B.data("rating")){B.data("rating",!0);var A=e.extend({},B.data(),a);A.start=parseInt(A.start,10),A.start=isNaN(A.start)?d:A.start,A.stop=parseInt(A.stop,10),A.stop=isNaN(A.stop)?A.start+f||d:A.stop,A.step=parseInt(A.step,10)||d,A.fractions=Math.abs(parseInt(A.fractions,10))||d,A.scale=Math.abs(parseInt(A.scale,10))||d,A.filledSelected=A.filledSelected||A.filled,A=e.extend({},e.fn.rating.defaults,A);for(var z=function(h){var g=Math.floor(h);s.find(".rating-symbol-background").css("visibility","visible").slice(0,g).css("visibility","hidden");var i=s.find(".rating-symbol-foreground");i.width(0),i.slice(0,g).width("auto").find("span").attr("class",A.filled),i.eq(h%1?g:g-1).find("span").attr("class",A.filledSelected),i.eq(g).width(h%1*100+"%")},y=function(g){return A.start+Math.floor(g)*A.step+A.step*w(g%1)},x=function(g){return(g-A.start)/A.step},w=function(h){var g=Math.ceil(h%1*A.fractions)/A.fractions,i=Math.pow(10,A.scale);return Math.floor(h)+Math.floor(g*i)/i},v=function(h){var g=A.step>0?A.start:A.stop,i=A.step>0?A.stop:A.start;return h>=g&&i>=h},u=function(h){var g=parseFloat(h);v(g)&&z(x(g))},t=function(g){return function(h){B.prop("disabled")||B.prop("readonly")||g.call(this,h)}},s=e("<span></span>").insertBefore(B),r=1;r<=x(A.stop);r++){var c=e('<div class="rating-symbol"></div>').css({display:"inline-block",position:"relative"});e('<div class="rating-symbol-background '+A.empty+'"></div>').appendTo(c),e('<div class="rating-symbol-foreground"></div>').append("<span></span>").css({display:"inline-block",position:"absolute",overflow:"hidden",left:0,width:0}).appendTo(c),s.append(c),A.extendSymbol.call(c,y(r))}u(B.val()),B.on("change",function(){u(e(this).val())});var b=function(g){var i=e(g.currentTarget),h=(g.pageX||g.originalEvent.touches[0].pageX)-i.offset().left;return i.index()+h/i.width()};s.on("mousedown touchstart",".rating-symbol",t(function(g){B.val(y(b(g))).change()})).on("mousemove touchmove",".rating-symbol",t(function(g){z(w(b(g)))})).on("mouseleave touchend",".rating-symbol",t(function(){z(x(parseFloat(B.val())))}))}})},e.fn.rating.defaults={filled:"glyphicon glyphicon-star",filledSelected:d,empty:"glyphicon glyphicon-star-empty",start:0,stop:f,step:1,fractions:1,scale:3,extendSymbol:function(){}},e(function(){e("input.rating").rating()})}(jQuery);