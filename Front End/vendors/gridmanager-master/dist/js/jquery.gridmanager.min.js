/*! gridmanager - v0.3.1 - 2014-09-22
* http://neokoenig.github.io/jQuery-gridmanager/
* Copyright (c) 2014 Tom King; Licensed MIT */
(function(a){a.gridmanager=function(c,b){var d=this;d.$el=a(c);d.el=c;d.$el.data("gridmanager",d);d.appendHTMLSelectedCols=function(f){var e=d.$el.find("#"+d.options.canvasId);var g=e.find(d.options.colSelector);a.each(g,function(){if(a(this).hasClass(d.options.gmEditClassSelected)){a("."+d.options.gmEditRegion,this).append(f)}})};d.init=function(){d.options=a.extend({},a.gridmanager.defaultOptions,b);d.log("INIT");d.addCSS(d.options.cssInclude);d.rteControl("init");d.createCanvas();d.createControls();d.initControls();d.initDefaultButtons();d.initCanvas();d.log("FINISHED")};d.createCanvas=function(){d.log("+ Create Canvas");var e=d.$el.html();d.$el.html("");a("<div/>",{id:d.options.canvasId,html:e}).appendTo(d.$el);if(d.options.addResponsiveClasses){d.addResponsiveness(d.$el.find("#"+d.options.canvasId))}if(d.options.autoEdit){d.initMarkup(d.$el.find("#"+d.options.canvasId).find("."+d.options.colClass).not("."+d.options.rowClass))}};d.initMarkup=function(g){var f="<!--"+d.options.gmEditRegion+"-->",e="<!--/"+d.options.gmEditRegion+"-->";a.each(g,function(k,h){var j=false,l=a(h).children().hasClass(d.options.rowClass);a.each(a(h).contents(),function(i,m){if(a(m)[0].nodeType===8){j=true}});if(!j){if(l){a.each(a(h).contents(),function(m,p){if(a(p).hasClass(d.options.rowClass)){var n=Array.prototype.reverse.call(a(p).prevUntil("."+d.options.rowClass)),o=a(p).nextUntil("."+d.options.rowClass);if(!a(n).hasClass(d.options.gmEditRegion)){a(n).first().before(f).end().last().after(e)}if(!a(o).hasClass(d.options.gmEditRegion)){a(o).first().before(f).end().last().after(e)}}})}else{if(a(h).contents().length!==0){a(h).html(f+a(h).html()+e)}}}});d.log("initMarkup ran")};d.initDefaultButtons=function(){if(d.options.colSelectEnabled){d.options.customControls.global_col.push({callback:d.selectColClick,loc:"top",iconClass:"fa fa-square-o",title:"Select Column"})}if(d.options.editableRegionEnabled){d.options.customControls.global_col.push({callback:d.addEditableAreaClick,loc:"top",iconClass:"fa fa-edit",title:"Add Editable Region"})}};d.addResponsiveness=function(f){if(f===""){return}var j=d.options.colDesktopClass+"(\\d+)",e=d.options.colTabletClass+"(\\d+)",h=d.options.colPhoneClass+"(\\d+)",g=new RegExp(j,"i"),k=new RegExp(e,"i"),i=new RegExp(h,"i");return a(f).find(":regex(class,"+j+"|"+e+"|"+h+")").each(function(n,p){var l=a(this).attr("class"),m=2;var o=g.test(l),r=i.test(l),q=k.test(l);m=(m=g.exec(l))?m[1]:((m=k.exec(l))?m[1]:i.exec(l)[1]);if(!o){a(this).addClass(d.options.colDesktopClass+m)}if(!r){a(this).addClass(d.options.colPhoneClass+m)}if(!q){a(this).addClass(d.options.colTabletClass+m)}if(d.options.addDefaultColumnClass){if(!a(this).hasClass(d.options.colClass)){a(this).addClass(d.options.colClass)}}})};d.createControls=function(){d.log("+ Create Controls");var e=[];a.each(d.options.controlButtons,function(g,h){var f=d.generateButtonClass(h);e.push("<a title='Add Row "+f+"' class='"+d.options.controlButtonClass+" add"+f+"'><span class='"+d.options.controlButtonSpanClass+"'></span> "+f+"</a>");d.generateClickHandler(h)});d.$el.prepend(a("<div/>",{id:d.options.controlId,"class":d.options.gmClearClass}).prepend(a("<div/>",{"class":d.options.rowClass}).html(a("<div/>",{"class":d.options.colDesktopClass+d.options.colMax}).addClass(d.options.colAdditionalClass).html(a("<div/>",{id:"gm-addnew"}).addClass(d.options.gmBtnGroup).addClass(d.options.gmFloatLeft).html(e.join(""))).append(d.options.controlAppend))))};d.addCSS=function(e){if(e!==""){a('<link rel="stylesheet" href="'+e+'">').appendTo("head")}};d.cleanSubstring=function(f,g,e){return g.replace(new RegExp(f,"g"),e)};d.switchLayoutMode=function(j){var f=d.$el.find("#"+d.options.canvasId),h=f.html(),g="",e="",i="";h=d.cleanSubstring(d.options.classRenameSuffix,h,"");i=a("div.gm-layout-mode > button > span");switch(j){case 768:g="("+d.options.colDesktopClass+"\\d+)";e="("+d.options.colPhoneClass+"\\d+)";d.options.currentClassMode=d.options.colTabletClass;d.options.colSelector=d.options.colTabletSelector;a(i).attr("class","fa fa-tablet").attr("title","Tablet");break;case 640:g="("+d.options.colDesktopClass+"\\d+)";e="("+d.options.colTabletClass+"\\d+)";d.options.currentClassMode=d.options.colPhoneClass;d.options.colSelector=d.options.colPhoneSelector;a(i).attr("class","fa fa-mobile-phone").attr("title","Phone");break;default:g="("+d.options.colPhoneClass+"\\d+)";e="("+d.options.colTabletClass+"\\d+)";d.options.currentClassMode=d.options.colDesktopClass;d.options.colSelector=d.options.colDesktopSelector;a(i).attr("class","fa fa-desktop").attr("title","Desktop")}d.options.layoutDefaultMode=j;h=h.replace(new RegExp((g+'(?=[^"]*">)'),"gm"),"$1"+d.options.classRenameSuffix);h=h.replace(new RegExp((e+'(?=[^"]*">)'),"gm"),"$1"+d.options.classRenameSuffix);f.html(h)};d.initControls=function(){var e=d.$el.find("#"+d.options.canvasId);d.log("+ InitControls Running");d.$el.on("click",".gm-preview",function(){if(d.status){d.deinitCanvas();a(this).parent().find(".gm-edit-mode").prop("disabled",true)}else{d.initCanvas();a(this).parent().find(".gm-edit-mode").prop("disabled",false)}a(this).toggleClass(d.options.gmDangerClass)}).on("click",".gm-layout-mode a",function(){d.switchLayoutMode(a(this).data("width"))}).on("click",".gm-edit-mode",function(){if(d.mode==="visual"){d.deinitCanvas();e.html(a("<textarea/>").attr("cols",130).attr("rows",25).val(e.html()));d.mode="html";a(this).parent().find(".gm-preview, .gm-layout-mode > button").prop("disabled",true)}else{var f=e.find("textarea").val();e.html(f);d.initCanvas();d.mode="visual";a(this).parent().find(".gm-preview, .gm-layout-mode > button").prop("disabled",false)}a(this).toggleClass(d.options.gmDangerClass)}).on("click","."+d.options.gmEditRegion+" ."+d.options.gmContentRegion,function(){if(!a(this).attr("contenteditable")){a(this).attr("contenteditable",true);d.rteControl("attach",a(this))}}).on("click","a.gm-save",function(){d.deinitCanvas();d.saveremote()}).on("click","a.gm-rowSettings",function(){var g=a(this).closest(d.options.rowSelector);var f=g.find(".gm-rowSettingsDrawer");if(f.length>0){f.remove()}else{g.prepend(d.generateRowSettings(g))}}).on("blur","input.gm-rowSettingsID",function(){var f=a(this).closest(d.options.rowSelector);f.attr("id",a(this).val())}).on("click",".gm-toggleRowClass",function(){var f=a(this).closest(d.options.rowSelector);var g=a(this).text().trim();f.toggleClass(g);if(f.hasClass(g)){a(this).addClass(d.options.gmDangerClass)}else{a(this).removeClass(d.options.gmDangerClass)}}).on("click","a.gm-colSettings",function(){var f=a(this).closest(d.options.colSelector);var g=f.find(".gm-colSettingsDrawer");if(g.length>0){g.remove()}else{f.prepend(d.generateColSettings(f))}}).on("blur","input.gm-colSettingsID",function(){var f=a(this).closest(d.options.colSelector);f.attr("id",a(this).val())}).on("click",".gm-togglecolClass",function(){var f=a(this).closest(d.options.colSelector);var g=a(this).text().trim();f.toggleClass(g);if(f.hasClass(g)){a(this).addClass(d.options.gmDangerClass)}else{a(this).removeClass(d.options.gmDangerClass)}}).on("click","a.gm-addColumn",function(){a(this).parent().after(d.createCol(2));d.switchLayoutMode(d.options.layoutDefaultMode);d.reset()}).on("click","a.gm-addRow",function(){d.log("Adding nested row");a(this).closest("."+d.options.gmEditClass).append(a("<div>").addClass(d.options.rowClass).html(d.createCol(6)).append(d.createCol(6)));d.reset()}).on("click","a.gm-colDecrease",function(){var f=a(this).closest("."+d.options.gmEditClass);var g=d.getColClass(f);if(g.colWidth>parseInt(d.options.colResizeStep,10)){g.colWidth=(parseInt(g.colWidth,10)-parseInt(d.options.colResizeStep,10));f.switchClass(g.colClass,d.options.currentClassMode+g.colWidth,200)}}).on("click","a.gm-colIncrease",function(){var f=a(this).closest("."+d.options.gmEditClass);var g=d.getColClass(f);if(g.colWidth<d.options.colMax){g.colWidth=(parseInt(g.colWidth,10)+parseInt(d.options.colResizeStep,10));f.switchClass(g.colClass,d.options.currentClassMode+g.colWidth,200)}}).on("click","a.gm-resetgrid",function(){e.html("");d.reset()}).on("click","a.gm-removeCol",function(){a(this).closest("."+d.options.gmEditClass).animate({opacity:"hide",width:"hide",height:"hide"},400,function(){a(this).remove()});d.log("Column Removed")}).on("click","a.gm-removeRow",function(){d.log(a(this).closest("."+d.options.colSelector));a(this).closest("."+d.options.gmEditClass).animate({opacity:"hide",height:"hide"},400,function(){a(this).remove()});d.log("Row Removed")}).on("click","a.gm-resetgrid, a.gm-remove, a.gm-removeRow, a.gm-save, button.gm-preview, a.gm-viewsource, a.gm-addColumn, a.gm-colDecrease, a.gm-colIncrease",function(f){d.log("Clicked: "+a.grep((this).className.split(" "),function(g){return g.indexOf("gm-")===0}).join());f.preventDefault()})};d.initGlobalCustomControls=function(){var f=d.$el.find("#"+d.options.canvasId),e=[],h=null,g="";a.each(["row","col"],function(j,k){if(typeof d.options.customControls["global_"+k]!=="undefined"){e=f.find(d.options[k+"Selector"]);a.each(d.options.customControls["global_"+k],function(m,l){if(typeof l.callback==="undefined"){return}if(typeof l.loc==="undefined"){l.loc="top"}if(typeof l.iconClass==="undefined"){l.iconClass="fa fa-file-code-o"}if(typeof l.btnLabel==="undefined"){l.btnLabel=""}if(typeof l.title==="undefined"){l.title=""}g=(typeof l.callback==="function")?(m+"_btn"):(l.callback);btnObj={element:"a",btnClass:"gm-"+g,iconClass:l.iconClass,btnLabel:l.btnLabel,title:l.title};a.each(e,function(n,o){d.setupCustomBtn(o,l.loc,"window",l.callback,btnObj)})})}})};d.initCustomControls=function(){var i=d.$el.find("#"+d.options.canvasId),h="",k="",g="",f="",l={},e="",j="";a(("."+d.options.colClass+":data, ."+d.options.rowClass+":data"),i).each(function(){for(prop in a(this).data()){if(prop.indexOf("gmButton")===0){g=prop.replace("gmButton","");h=a(this).data()[prop].split("|");if(h.length===0||g===""){break}f=(typeof h[3]!=="undefined")?h[3]:"top";e=(typeof h[2]!=="undefined")?h[2]:"fa fa-file-code-o";j=(typeof h[1]!=="undefined")?h[1]:"";k=h[0];l={element:"a",btnClass:("gm-"+g),iconClass:e,btnLabel:j};d.setupCustomBtn(this,f,k,g,l);break}}})};d.setupCustomBtn=function(g,f,h,e,j){var i=null;if(typeof e==="string"){i=d.isValidCallback(h,e.toLowerCase())}else{if(typeof e==="function"){i=e}else{return false}}f=(f==="bottom")?":last":":first";a(("."+d.options.gmToolClass+f),g).append(d.buttonFactory([j])).find(":last").on("click",function(k){i(g,this);k.preventDefault()});return true};d.clearComments=function(e){a(e,"#"+d.options.canvasId).contents().filter(function(){return this.nodeType===8}).remove()};d.isValidCallback=function(f,e){var g=null;if(f==="window"){if(typeof window[e]==="function"){g=window[e]}else{return false}}else{if(typeof window[f][e]==="function"){g=window[f][e]}else{return false}}return g};d.getColClass=function(e){var g=a.grep(e.attr("class").split(" "),function(h){return h.indexOf(d.options.currentClassMode)===0}).join();var f=g.replace(d.options.currentClassMode,"");return{colClass:g,colWidth:f}};d.runFilter=function(e,f){if(typeof d.options.filterCallback==="function"){d.options.filterCallback(e,f)}if(d.options.editableRegionEnabled){d.editableAreaFilter(e,f)}};d.initCanvas=function(){var e=d.$el.find("#"+d.options.canvasId);d.switchLayoutMode(d.options.layoutDefaultMode);var g=e.find(d.options.colSelector);var f=e.find(d.options.rowSelector);d.log("+ InitCanvas Running");d.$el.find("#gm-addnew").show();d.activateRows(f);d.activateCols(g);d.runFilter(e,true);g=e.find(d.options.colSelector);f=e.find(d.options.rowSelector);e.sortable({items:f,axis:"y",placeholder:d.options.rowSortingClass,handle:".gm-moveRow",forcePlaceholderSize:true,opacity:0.7,revert:true,tolerance:"pointer",cursor:"move"});a.each(f,function(h,j){a(j).sortable({items:a(j).find(d.options.colSelector),axis:"x",handle:".gm-moveCol",forcePlaceholderSize:true,opacity:0.7,revert:true,tolerance:"pointer",containment:a(j),cursor:"move"})});d.status=true;d.mode="visual";d.initCustomControls();d.initGlobalCustomControls();d.initNewContentElem()};d.deinitCanvas=function(){var e=d.$el.find("#"+d.options.canvasId);var g=e.find(d.options.colSelector);var f=e.find(d.options.rowSelector);d.log("- deInitCanvas Running");d.$el.find("#gm-addnew").hide();d.deactivateRows(f);d.deactivateCols(g);d.cleanup();d.runFilter(e,false);d.status=false};d.saveremote=function(){var e=d.$el.find("#"+d.options.canvasId);a.ajax({type:"POST",url:d.options.remoteURL,data:{content:e.html()}});d.log("Save Function Called")};d.activateRows=function(e){d.log("++ Activate Rows");e.addClass(d.options.gmEditClass).prepend(d.toolFactory(d.options.rowButtonsPrepend)).append(d.toolFactory(d.options.rowButtonsAppend))};d.deactivateRows=function(e){d.log("-- DeActivate Rows");e.removeClass(d.options.gmEditClass).removeClass("ui-sortable").removeAttr("style")};d.createRow=function(e){var f=a("<div/>",{"class":d.options.rowClass+" "+d.options.gmEditClass});a.each(e,function(g,h){f.append(d.createCol(h))});d.log("++ Created Row");return f};d.generateRowSettings=function(g){var f=[];a.each(d.options.rowCustomClasses,function(j,k){var h=a("<button/>").addClass("gm-toggleRowClass").addClass(d.options.controlButtonClass).append(a("<span/>").addClass(d.options.controlButtonSpanClass)).append(" "+k);if(g.hasClass(k)){h.addClass(d.options.gmDangerClass)}f.push(h[0].outerHTML)});var e=a("<div/>").addClass("gm-rowSettingsDrawer").addClass(d.options.gmToolClass).addClass(d.options.gmClearClass).prepend(a("<div />").addClass(d.options.gmBtnGroup).addClass(d.options.gmFloatLeft).html(f.join(""))).append(a("<div />").addClass("pull-right").html(a("<label />").html("Row ID ").append(a("<input>").addClass("gm-rowSettingsID").attr({type:"text",placeholder:"Row ID",value:g.attr("id")}))));return e[0].outerHTML};d.generateColSettings=function(e){var g=[];a.each(d.options.colCustomClasses,function(j,k){var h=a("<button/>").addClass("gm-togglecolClass").addClass(d.options.controlButtonClass).append(a("<span/>").addClass(d.options.controlButtonSpanClass)).append(" "+k);if(e.hasClass(k)){h.addClass(d.options.gmDangerClass)}g.push(h[0].outerHTML)});var f=a("<div/>").addClass("gm-colSettingsDrawer").addClass(d.options.gmToolClass).addClass(d.options.gmClearClass).prepend(a("<div />").addClass(d.options.gmBtnGroup).addClass(d.options.gmFloatLeft).html(g.join(""))).append(a("<div />").addClass("pull-right").html(a("<label />").html("col ID ").append(a("<input>").addClass("gm-colSettingsID").attr({type:"text",placeholder:"col ID",value:e.attr("id")}))));return f[0].outerHTML};d.activateCols=function(e){e.addClass(d.options.gmEditClass);a.each(e,function(f,g){a(g).prepend(d.toolFactory(d.options.colButtonsPrepend));a(g).append(d.toolFactory(d.options.colButtonsAppend))});d.log("++ Activate Cols Ran")};d.deactivateCols=function(e){e.removeClass(d.options.gmEditClass).removeClass(d.options.gmEditClassSelected).removeClass("ui-sortable");a.each(e.children(),function(f,g){if(a(g).hasClass(d.options.gmEditRegion)){if(a(g).html()!==""){a(g).contents().unwrap()}else{a(g).remove()}}});d.log("-- deActivate Cols Ran")};d.createCol=function(f){var e=a("<div/>").addClass(d.options.colClass).addClass(d.options.colDesktopClass+f).addClass(d.options.colTabletClass+f).addClass(d.options.colPhoneClass+f).addClass(d.options.gmEditClass).addClass(d.options.colAdditionalClass).html(d.toolFactory(d.options.colButtonsPrepend)).prepend(d.toolFactory(d.options.colButtonsPrepend)).append(d.toolFactory(d.options.colButtonsAppend));d.log("++ Created Column "+f);return e};d.addEditableAreaClick=function(f,g){var i="<!--"+d.options.gmEditRegion+"-->",e="<!--/"+d.options.gmEditRegion+"-->",h=null;a(("."+d.options.gmToolClass+":last"),f).before(h=a("<div>").addClass(d.options.gmEditRegion+" "+d.options.contentDraggableClass).append(d.options.controlContentElem+'<div class="'+d.options.gmContentRegion+'"><p>New Content</p></div>')).before(e).prev().before(i);d.initNewContentElem(h)};d.initNewContentElem=function(f){var e=null;if(typeof f==="undefined"){e=d.$el.find("."+d.options.colClass)}else{e=f.closest("."+d.options.colClass)}a.each(e,function(h,g){a(g).on("click",".gm-delete",function(i){a(this).closest("."+d.options.gmEditRegion).remove();d.resetCommentTags(g);i.preventDefault()});a(g).sortable({items:"."+d.options.contentDraggableClass,axis:"y",placeholder:d.options.rowSortingClass,handle:"."+d.options.controlMove,forcePlaceholderSize:true,opacity:0.7,revert:true,tolerance:"pointer",cursor:"move",stop:function(j,i){d.resetCommentTags(a(i.item).parent())}})})};d.resetCommentTags=function(f){var g="<!--"+d.options.gmEditRegion+"-->",e="<!--/"+d.options.gmEditRegion+"-->";d.clearComments(f);a("."+d.options.gmEditRegion,f).before(g).after(e)};d.selectColClick=function(e,f){a(f).toggleClass("fa fa-square-o fa fa-check-square-o");if(a(f).hasClass("fa-check-square-o")){a(e).addClass(d.options.gmEditClassSelected)}else{a(e).removeClass(d.options.gmEditClassSelected)}};d.editableAreaFilter=function(f,k){if(k){var j="<!--"+d.options.gmEditRegion+"-->",e="<!--/"+d.options.gmEditRegion+"-->",h=new RegExp("(?:"+j+")\\s*([\\s\\S]+?)\\s*(?:"+e+")","g"),g=a(f).html(),i=j+'<div class="'+d.options.gmEditRegion+" "+d.options.contentDraggableClass+'">'+d.options.controlContentElem+'<div class="'+d.options.gmContentRegion+'">$1</div></div>'+e;g=g.replace(h,i);a(f).html(g);d.log("editableAreaFilter init ran")}else{a("."+d.options.controlNestedEditable,f).remove();a("."+d.options.gmContentRegion).contents().unwrap();d.log("editableAreaFilter deinit ran")}};d.toolFactory=function(e){var f=a("<div/>").addClass(d.options.gmToolClass).addClass(d.options.gmClearClass).html(d.buttonFactory(e));return f[0].outerHTML};d.buttonFactory=function(f){var e=[];a.each(f,function(g,h){h.btnLabel=(typeof h.btnLabel==="undefined")?"":h.btnLabel;h.title=(typeof h.title==="undefined")?"":h.title;e.push("<"+h.element+" title='"+h.title+"' class='"+h.btnClass+"'><span class='"+h.iconClass+"'></span>&nbsp;"+h.btnLabel+"</"+h.element+"> ")});return e.join("")};d.generateButtonClass=function(e){var f="";a.each(e,function(g,h){f=f+"-"+h});return f};d.generateClickHandler=function(e){var g="a.add"+d.generateButtonClass(e);var f=d.$el.find("#"+d.options.canvasId);d.$el.on("click",g,function(h){d.log("Clicked "+g);f.prepend(d.createRow(e));d.reset();h.preventDefault()})};d.rteControl=function(g,f){d.log("RTE "+d.options.rte+" "+g);switch(g){case"init":if(typeof window.CKEDITOR!=="undefined"){d.options.rte="ckeditor";d.log("++ CKEDITOR Found");window.CKEDITOR.disableAutoInline=true}if(typeof window.tinymce!=="undefined"){d.options.rte="tinymce";d.log("++ TINYMCE Found")}break;case"attach":switch(d.options.rte){case"tinymce":if(!(f).hasClass("mce-content-body")){f.tinymce(d.options.tinymce.config)}break;case"ckeditor":a(f).ckeditor(d.options.ckeditor);break;default:d.log("No RTE specified for attach")}break;case"stop":switch(d.options.rte){case"tinymce":window.tinymce.remove();d.log("-- TinyMCE destroyed");break;case"ckeditor":for(var e in window.CKEDITOR.instances){window.CKEDITOR.instances[e].destroy()}d.log("-- CKEDITOR destroyed");break;default:d.log("No RTE specified for stop")}break;default:d.log("No RTE Action specified")}};d.reset=function(){d.log("~~RESET~~");d.deinitCanvas();d.initCanvas()};d.cleanup=function(){var e,f;e=d.$el.find("#"+d.options.canvasId);f=d.mode!=="visual"?e.find("textarea").val():e.html();e.html(d.cleanSubstring(d.options.classRenameSuffix,f,""));e.find(d.options.colSelector).removeAttr("style").removeAttr("spellcheck").removeClass("mce-content-body").end().find("img").removeAttr("style").addClass("img-responsive").removeAttr("data-cke-saved-src").removeAttr("data-mce-src").end().find("."+d.options.gmToolClass).remove();d.rteControl("stop");d.log("~~Cleanup Ran~~")};d.log=function(e){if(d.options.debug){if((window.console!==undefined)){window.console.log(e)}}};d.init()};a.gridmanager.defaultOptions={debug:0,colSelectEnabled:true,editableRegionEnabled:true,autoEdit:true,remoteURL:"/replace-with-your-url",cssInclude:"//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css",filterCallback:null,canvasId:"gm-canvas",controlId:"gm-controls",controlMove:"gm-move",controlNestedEditable:"gm-controls-element",controlButtons:[[12],[6,6],[4,4,4],[3,3,3,3],[2,2,2,2,2,2],[2,8,2],[4,8],[8,4]],customControls:{global_row:[],global_col:[]},controlButtonClass:"btn  btn-xs  btn-primary",controlButtonSpanClass:"fa fa-plus-circle",controlAppend:"<div class='btn-group pull-right'><button title='Edit Source Code' type='button' class='btn btn-xs btn-primary gm-edit-mode'><span class='fa fa-code'></span></button><button title='Preview' type='button' class='btn btn-xs btn-primary gm-preview'><span class='fa fa-eye'></span></button>     <div class='dropdown pull-left gm-layout-mode'><button type='button' class='btn btn-xs btn-primary dropdown-toggle' data-toggle='dropdown'><span class='caret'></span></button> <ul class='dropdown-menu' role='menu'><li><a data-width='auto' title='Desktop'><span class='fa fa-desktop'></span> Desktop</a></li><li><a title='Tablet' data-width='768'><span class='fa fa-tablet'></span> Tablet</a></li><li><a title='Phone' data-width='640'><span class='fa fa-mobile-phone'></span> Phone</a></li></ul></div>    <button type='button' class='btn  btn-xs  btn-primary dropdown-toggle' data-toggle='dropdown'><span class='caret'></span><span class='sr-only'>Toggle Dropdown</span></button><ul class='dropdown-menu' role='menu'><li><a title='Save'  href='#' class='gm-save'><span class='fa fa-save'></span> Save</a></li><li><a title='Reset Grid' href='#' class='gm-resetgrid'><span class='fa fa-trash-o'></span> Reset</a></li></ul></div>",controlContentElem:'<div class="gm-controls-element"> <a class="gm-move fa fa-arrows" href="#" title="Move"></a> <a class="gm-delete fa fa-times" href="#" title="Delete"></a> </div>',gmEditClass:"gm-editing",gmEditClassSelected:"gm-editing-selected",gmEditRegion:"gm-editable-region",gmContentRegion:"gm-content",gmToolClass:"gm-tools",gmClearClass:"clearfix",gmFloatLeft:"pull-left",gmFloatRight:"pull-right",gmBtnGroup:"btn-group",gmDangerClass:"btn-danger",rowClass:"row",rowSelector:"div.row",rowSortingClass:"alert-warning",rowButtonsPrepend:[{title:"Move",element:"a",btnClass:"gm-moveRow pull-left",iconClass:"fa fa-arrows "},{title:"New Column",element:"a",btnClass:"gm-addColumn pull-left  ",iconClass:"fa fa-plus"},{title:"Row Settings",element:"a",btnClass:"pull-right gm-rowSettings",iconClass:"fa fa-cog"}],rowButtonsAppend:[{title:"Remove row",element:"a",btnClass:"pull-right gm-removeRow",iconClass:"fa fa-trash-o"}],rowCustomClasses:["example-class","test-class"],colClass:"column",contentDraggableClass:"gm-content-draggable",addResponsiveClasses:true,addDefaultColumnClass:true,colDesktopClass:"col-md-",colTabletClass:"col-sm-",colPhoneClass:"col-xs-",colDesktopSelector:"div[class*=col-md-]",colTabletSelector:"div[class*=col-sm-]",colPhoneSelector:"div[class*=col-xs-]",classRenameSuffix:"-clsstmp",layoutDefaultMode:"auto",currentClassMode:"",colAdditionalClass:"",colButtonsPrepend:[{title:"Move",element:"a",btnClass:"gm-moveCol pull-left",iconClass:"fa fa-arrows "},{title:"Column Settings",element:"a",btnClass:"pull-right gm-colSettings",iconClass:"fa fa-cog"},{title:"Make Column Narrower",element:"a",btnClass:"gm-colDecrease pull-left",iconClass:"fa fa-minus"},{title:"Make Column Wider",element:"a",btnClass:"gm-colIncrease pull-left",iconClass:"fa fa-plus"}],colButtonsAppend:[{title:"Add Nested Row",element:"a",btnClass:"pull-left gm-addRow",iconClass:"fa fa-plus-square"},{title:"Remove Column",element:"a",btnClass:"pull-right gm-removeCol",iconClass:"fa fa-trash-o"}],colCustomClasses:["example-col-class","test-class"],colMax:12,colResizeStep:1,tinymce:{config:{inline:true,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"}},ckeditor:{customConfig:""}};a.fn.gridmanager=function(b){return this.each(function(){var d=a(this);var c=new a.gridmanager(this,b);d.data("gridmanager",c)})};a.expr[":"].regex=function(h,e,d){var i=d[3].split(","),c=/^(data|css):/,b={method:i[0].match(c)?i[0].split(":")[0]:"attr",property:i.shift().replace(c,"")},g="ig",f=new RegExp(i.join("").replace(/^\s+|\s+$/g,""),g);return f.test(jQuery(h)[b.method](b.property))}})(jQuery);