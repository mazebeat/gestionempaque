function waitFor(testFx,onReady,timeOutMillis){var maxtimeOutMillis=timeOutMillis?timeOutMillis:5001,start=new Date().getTime(),condition=false,interval=setInterval(function(){if((new Date().getTime()-start<maxtimeOutMillis)&&!condition){condition=(typeof(testFx)==="string"?eval(testFx):testFx())}else{if(!condition){console.log("'waitFor()' timeout");phantom.exit(1)}else{typeof(onReady)==="string"?eval(onReady):onReady();clearInterval(interval)}}},100)}if(phantom.args.length===0||phantom.args.length>2){console.log("Usage: phantom.js URL");phantom.exit()}var page=new WebPage();page.onConsoleMessage=function(a){console.log(a)};page.open(phantom.args[0],function(a){if(a!=="success"){console.log("Unable to access network");phantom.exit()}else{waitFor(function(){return page.evaluate(function(){var b=document.getElementById("qunit-testresult");if(b&&b.innerText.match("completed")){return true}return false})},function(){var b=page.evaluate(function(){var c=document.getElementById("qunit-testresult");try{return c.getElementsByClassName("failed")[0].innerHTML}catch(d){}return 10000});phantom.exit((parseInt(b,10)>0)?1:0)})}});