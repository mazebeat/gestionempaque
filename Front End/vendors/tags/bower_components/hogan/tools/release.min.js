var fs=require("fs");var path=require("path");var Hogan=require(__dirname+"/../lib/hogan");var minlicense="/**\n* @preserve Copyright 2012 Twitter, Inc.\n* @license http://www.apache.org/licenses/LICENSE-2.0.txt\n*/\n";function read(a){return fs.readFileSync(a).toString()}function copy(a,b){return fs.writeFileSync(b,read(a))}function uglify(e,f){var b=require("uglify-js").parser;var d=require("uglify-js").uglify;var c=read(e);var a=b.parse(c);a=d.ast_mangle(a);a=d.ast_squeeze(a);fs.writeFileSync(f,minlicense+d.gen_code(a))}var packageJSON=JSON.parse(read("package.json"));var version=packageJSON.version;function removeFirstComment(a){return a.substring(a.indexOf("*/")+2)}var context={template:removeFirstComment(read(__dirname+"/../lib/template.js")),compiler:removeFirstComment(read(__dirname+"/../lib/compiler.js"))};var wrapperPath="/../wrappers/";var wrappers=fs.readdirSync(__dirname+wrapperPath).map(function(a){return __dirname+wrapperPath+a});var distPath=__dirname+"/../dist/";wrappers.forEach(function(d){var a=path.basename(d,".mustache");var c=distPath+"hogan-"+version+"."+a;var b=distPath+"hogan-"+version+".min."+a;fs.writeFileSync(c,Hogan.compile(read(d)).render(context));uglify(c,b)});wrappers.forEach(function(d){var a=path.basename(d,".mustache");var c=distPath+"hogan.template-"+version+"."+a;var b=distPath+"hogan.template-"+version+".min."+a;fs.writeFileSync(c,Hogan.compile(read(d)).render({template:context.template}));uglify(c,b)});