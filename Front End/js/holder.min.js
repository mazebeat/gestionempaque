/*!

Holder - 2.3.2 - client side image placeholders
(c) 2012-2014 Ivan Malopinsky / http://imsky.co

Provided under the MIT License.
Commercial use requires attribution.

*/
var Holder=Holder||{};(function(i,f){var x={use_svg:false,use_canvas:false,use_fallback:false,debounce:100};var q={};var B=false;canvas=document.createElement("canvas");var a=1,y=1;var c=[];var m;if(!canvas.getContext){x.use_fallback=true}else{if(canvas.toDataURL("image/png").indexOf("data:image/png")<0){x.use_fallback=true}else{var p=canvas.getContext("2d")}}if(!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect){x.use_svg=true;x.use_canvas=false}if(!x.use_fallback){a=window.devicePixelRatio||1,y=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1}var h=a/y;var u={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12},sky:{background:"#0D8FDB",foreground:"#fff",size:12},vine:{background:"#39DBAC",foreground:"#1E292C",size:12},lava:{background:"#F8591A",foreground:"#1C2846",size:12}}};i.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(D){var C=this.regex.exec(D);return{width:+C[1],height:+C[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(D){var C=this.regex.exec(D);return{width:C[1],height:C[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(D){var C=this.regex.exec(D);return{size:u.themes.gray.size,foreground:"#"+C[2],background:"#"+C[1]}}},text:{regex:/text\:(.*)/,output:function(C){return this.regex.exec(C)[1]}},font:{regex:/font\:(.*)/,output:function(C){return this.regex.exec(C)[1]}},auto:{regex:/^auto$/},textmode:{regex:/textmode\:(.*)/,output:function(C){return this.regex.exec(C)[1]}}};function k(H,D,G){D=parseInt(D,10);H=parseInt(H,10);var C=Math.max(D,H);var F=Math.min(D,H);var I=1/12;var E=Math.min(F*0.75,0.75*C*I);return{height:Math.round(Math.max(G.size,E))}}var w=(function(){if(!window.XMLSerializer){return}var F=new XMLSerializer();var H="http://www.w3.org/2000/svg";var C=document.createElementNS(H,"svg");if(C.webkitMatchesSelector){C.setAttribute("xmlns","http://www.w3.org/2000/svg")}var D=document.createElementNS(H,"rect");var G=document.createElementNS(H,"text");var E=document.createTextNode(null);G.setAttribute("text-anchor","middle");G.appendChild(E);C.appendChild(D);C.appendChild(G);return function(I){C.setAttribute("width",I.width);C.setAttribute("height",I.height);C.setAttribute("viewBox","0 0 "+I.width+" "+I.height);C.setAttribute("preserveAspectRatio","none");D.setAttribute("width",I.width);D.setAttribute("height",I.height);D.setAttribute("fill",I.template.background);G.setAttribute("x",I.width/2);G.setAttribute("y",I.height/2);E.nodeValue=I.text;G.setAttribute("style",l({fill:I.template.foreground,"font-weight":I.font_weight,"font-size":I.text_height+"px","font-family":I.font,"dominant-baseline":"central"}));return F.serializeToString(C)}})();function l(D){var C=[];for(var E in D){if(D.hasOwnProperty(E)){C.push(E+":"+D[E])}}return C.join(";")}function b(L){var R=L.ctx,C=L.dimensions,O=L.template,K=L.ratio,M=L.holder,N=M.textmode=="literal",G=M.textmode=="exact";var J=k(C.width,C.height,O);var I=J.height;var E=C.width*K,Q=C.height*K;var F=O.font?O.font:"Arial,Helvetica,sans-serif";var H=O.fontweight?O.fontweight:"bold";H=H=="normal"?"":H;canvas.width=E;canvas.height=Q;R.textAlign="center";R.textBaseline="middle";R.fillStyle=O.background;R.fillRect(0,0,E,Q);R.fillStyle=O.foreground;R.font=H+" "+I+"px "+F;var P=O.text?O.text:(Math.floor(C.width)+"x"+Math.floor(C.height));if(N){var C=M.dimensions;P=C.width+"x"+C.height}else{if(G&&M.exact_dimensions){var C=M.exact_dimensions;P=(Math.floor(C.width)+"x"+Math.floor(C.height))}}var D=R.measureText(P).width;if(D/E>=0.75){I=Math.floor(I*0.75*(E/D))}R.font=H+" "+(I*K)+"px "+F;R.fillText(P,(E/2),(Q/2),E);return canvas.toDataURL("image/png")}function n(K){var C=K.dimensions,N=K.template,L=K.holder,M=L.textmode=="literal",G=L.textmode=="exact";var I=k(C.width,C.height,N);var J=I.height;var D=C.width,P=C.height;var E=N.font?N.font:"Arial,Helvetica,sans-serif";var H=N.fontweight?N.fontweight:"bold";var O=N.text?N.text:(Math.floor(C.width)+"x"+Math.floor(C.height));if(M){var C=L.dimensions;O=C.width+"x"+C.height}else{if(G&&L.exact_dimensions){var C=L.exact_dimensions;O=(Math.floor(C.width)+"x"+Math.floor(C.height))}}var F=w({text:O,width:D,height:P,text_height:J,font:E,font_weight:H,template:N});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(F)))}function j(C){if(q.use_canvas&&!q.use_svg){return b(C)}else{return n(C)}}function A(J,E,D,I){var F=D.dimensions,G=D.theme,H=D.text?decodeURIComponent(D.text):D.text;var C=F.width+"x"+F.height;G=(H?t(G,{text:H}):G);G=(D.font?t(G,{font:D.font}):G);E.setAttribute("data-src",I);D.theme=G;E.holder_data=D;if(J=="image"){E.setAttribute("alt",H?H:G.text?G.text+" ["+C+"]":C);if(q.use_fallback||!D.auto){E.style.width=F.width+"px";E.style.height=F.height+"px"}if(q.use_fallback){E.style.backgroundColor=G.background}else{E.setAttribute("src",j({ctx:p,dimensions:F,template:G,ratio:h,holder:D}));if(D.textmode&&D.textmode=="exact"){c.push(E);z(E)}}}else{if(J=="background"){if(!q.use_fallback){E.style.backgroundImage="url("+j({ctx:p,dimensions:F,template:G,ratio:h,holder:D})+")";E.style.backgroundSize=F.width+"px "+F.height+"px"}}else{if(J=="fluid"){E.setAttribute("alt",H?H:G.text?G.text+" ["+C+"]":C);if(F.height.slice(-1)=="%"){E.style.height=F.height}else{if(D.auto==null||!D.auto){E.style.height=F.height+"px"}}if(F.width.slice(-1)=="%"){E.style.width=F.width}else{if(D.auto==null||!D.auto){E.style.width=F.width+"px"}}if(E.style.display=="inline"||E.style.display===""||E.style.display=="none"){E.style.display="block"}d(E);if(q.use_fallback){E.style.backgroundColor=G.background}else{c.push(E);z(E)}}}}}function o(C,E){var D={height:C.clientHeight,width:C.clientWidth};if(!D.height&&!D.width){C.setAttribute("data-holder-invisible",true);E.call(this,C)}else{C.removeAttribute("data-holder-invisible");return D}}function d(D){if(D.holder_data){var E=o(D,i.invisible_error_fn(d));if(E){var C=D.holder_data;C.initial_dimensions=E;C.fluid_data={fluid_height:C.dimensions.height.slice(-1)=="%",fluid_width:C.dimensions.width.slice(-1)=="%",mode:null};if(C.fluid_data.fluid_width&&!C.fluid_data.fluid_height){C.fluid_data.mode="width";C.fluid_data.ratio=C.initial_dimensions.width/parseFloat(C.dimensions.height)}else{if(!C.fluid_data.fluid_width&&C.fluid_data.fluid_height){C.fluid_data.mode="height";C.fluid_data.ratio=parseFloat(C.dimensions.width)/C.initial_dimensions.height}}}}}function e(C){if(q.debounce){if(!m){C.call(this)}if(m){clearTimeout(m)}m=setTimeout(function(){m=null;C.call(this)},q.debounce)}else{C.call(this)}}function z(F){var C;if(F==null||F.nodeType==null){C=c}else{C=[F]}for(var E in C){if(!C.hasOwnProperty(E)){continue}var G=C[E];if(G.holder_data){var D=G.holder_data;var H=o(G,i.invisible_error_fn(z));if(H){if(D.fluid){if(D.auto){switch(D.fluid_data.mode){case"width":H.height=H.width/D.fluid_data.ratio;break;case"height":H.width=H.height*D.fluid_data.ratio;break}}}var I={ctx:p,dimensions:H,template:D.theme,ratio:h,holder:D};if(D.textmode&&D.textmode=="exact"){D.exact_dimensions=H;I.dimensions=D.dimensions}G.setAttribute("src",j(I))}}}}function g(D,K){var G={theme:t(u.themes.gray,{})};var C=false;for(var J=D.length,E=0;E<J;E++){var H=D[E];if(i.flags.dimensions.match(H)){C=true;G.dimensions=i.flags.dimensions.output(H)}else{if(i.flags.fluid.match(H)){C=true;G.dimensions=i.flags.fluid.output(H);G.fluid=true}else{if(i.flags.textmode.match(H)){G.textmode=i.flags.textmode.output(H)}else{if(i.flags.colors.match(H)){G.theme=i.flags.colors.output(H)}else{if(K.themes[H]){if(K.themes.hasOwnProperty(H)){G.theme=t(K.themes[H],{})}}else{if(i.flags.font.match(H)){G.font=i.flags.font.output(H)}else{if(i.flags.auto.match(H)){G.auto=true}else{if(i.flags.text.match(H)){G.text=i.flags.text.output(H)}else{if(H==="random"){var I=Object.keys(K.themes),F=I[Math.floor(Math.random()*I.length)];G.theme=t(K.themes[F],{})}}}}}}}}}}return C?G:false}for(var s in i.flags){if(!i.flags.hasOwnProperty(s)){continue}i.flags[s].match=function(C){return C.match(this.regex)}}i.invisible_error_fn=function(C){return function(D){if(D.hasAttribute("data-holder-invisible")){throw new Error("Holder: invisible placeholder")}}};i.add_theme=function(C,D){C!=null&&D!=null&&(u.themes[C]=D);return i};i.add_image=function(H,F){var G=r(F);if(G.length){for(var E=0,C=G.length;E<C;E++){var D=document.createElement("img");D.setAttribute("data-src",H);G[E].appendChild(D)}}return i};i.run=function(D){q=t({},x);B=true;var Q=t(u,D),N=[],L=[],P=[];if(Q.use_canvas!=null&&Q.use_canvas){q.use_canvas=true;q.use_svg=false}q.debounce=(Q.debounce!=null)?Q.debounce:q.debounce;if(typeof(Q.images)=="string"){L=r(Q.images)}else{if(window.NodeList&&Q.images instanceof window.NodeList){L=Q.images}else{if(window.Node&&Q.images instanceof window.Node){L=[Q.images]}else{if(window.HTMLCollection&&Q.images instanceof window.HTMLCollection){L=Q.images}}}}if(typeof(Q.bgnodes)=="string"){P=r(Q.bgnodes)}else{if(window.NodeList&&Q.elements instanceof window.NodeList){P=Q.bgnodes}else{if(window.Node&&Q.bgnodes instanceof window.Node){P=[Q.bgnodes]}}}for(H=0,F=L.length;H<F;H++){N.push(L[H])}var M=new RegExp(Q.domain+'/(.*?)"?\\)');for(var F=P.length,H=0;H<F;H++){var C=window.getComputedStyle(P[H],null).getPropertyValue("background-image");var E=C.match(M);var K=P[H].getAttribute("data-background-src");if(E){var O=g(E[1].split("/"),Q);if(O){A("background",P[H],O,C)}}else{if(K!=null){var O=g(K.substr(K.lastIndexOf(Q.domain)+Q.domain.length+1).split("/"),Q);if(O){A("background",P[H],O,C)}}}}for(F=N.length,H=0;H<F;H++){var G,I;I=G=C=null;try{I=N[H].getAttribute("src");attr_datasrc=N[H].getAttribute("data-src")}catch(J){}if(attr_datasrc==null&&!!I&&I.indexOf(Q.domain)>=0){C=I}else{if(!!attr_datasrc&&attr_datasrc.indexOf(Q.domain)>=0){C=attr_datasrc}}if(C){var O=g(C.substr(C.lastIndexOf(Q.domain)+Q.domain.length+1).split("/"),Q);if(O){if(O.fluid){A("fluid",N[H],O,C)}else{A("image",N[H],O,C)}}}}return i};v(f,function(){var C=function(){e(function(){z(null)})};if(window.addEventListener){window.addEventListener("resize",C,false);window.addEventListener("orientationchange",C,false)}else{window.attachEvent("onresize",C)}B||i.run({});if(typeof window.Turbolinks==="object"){document.addEventListener("page:change",function(){i.run({})})}});if(typeof define==="function"&&define.amd){define([],function(){return i})}(function(){function C(F){this.message=F}var E="undefined"!=typeof exports?exports:this,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";C.prototype=Error(),C.prototype.name="InvalidCharacterError",E.btoa||(E.btoa=function(H){for(var I,K,F=0,G=D,J="";H.charAt(0|F)||(G="=",F%1);J+=G.charAt(63&I>>8-8*(F%1))){if(K=H.charCodeAt(F+=0.75),K>255){throw new C("'btoa' failed")}I=I<<8|K}return J}),E.atob||(E.atob=function(H){if(H=H.replace(/=+$/,""),1==H.length%4){throw new C("'atob' failed")}for(var I,K,F=0,G=0,J="";K=H.charAt(G++);~K&&(I=F%4?64*I+K:K,F++%4)?J+=String.fromCharCode(255&I>>(6&-2*F)):0){K=D.indexOf(K)}return J})})();document.getElementsByClassName||(document.getElementsByClassName=function(G){var D=document,H,F,C,E=[];if(D.querySelectorAll){return D.querySelectorAll("."+G)}if(D.evaluate){F=".//*[contains(concat(' ', @class, ' '), ' "+G+" ')]",H=D.evaluate(F,D,null,0,null);while(C=H.iterateNext()){E.push(C)}}else{H=D.getElementsByTagName("*"),F=new RegExp("(^|\\s)"+G+"(\\s|$)");for(C=0;C<H.length;C++){F.test(H[C].className)&&E.push(H[C])}}return E});window.getComputedStyle||(window.getComputedStyle=function(C){return this.el=C,this.getPropertyValue=function(D){var E=/(\-([a-z]){1})/g;return D=="float"&&(D="styleFloat"),E.test(D)&&(D=D.replace(E,function(){return arguments[2].toUpperCase()})),C.currentStyle[D]?C.currentStyle[D]:null},this});function v(E,P){var F="complete",Q="readystatechange",O=!1,H=O,K=!0,G=E.document,M=G.documentElement,J=G.addEventListener?"addEventListener":"attachEvent",N=G.addEventListener?"removeEventListener":"detachEvent",I=G.addEventListener?"":"on",C=function(R){(R.type!=Q||G.readyState==F)&&((R.type=="load"?E:G)[N](I+R.type,C,O),!H&&(H=!0)&&P.call(E,null))},D=function(){try{M.doScroll("left")}catch(R){setTimeout(D,50);return}C("poll")};if(G.readyState==F){P.call(E,"lazy")}else{if(G.createEventObject&&M.doScroll){try{K=!E.frameElement}catch(L){}K&&D()}G[J](I+"DOMContentLoaded",C,O),G[J](I+Q,C,O),E[J](I+"load",C,O)}}function r(D,C){var D=D.match(/^(\W)?(.*)/),C=C||document,G=C["getElement"+(D[1]?"#"==D[1]?"ById":"sByClassName":"sByTagName")],F=G.call(C,D[2]),E=[];return null!==F&&(E=F.length||0===F.length?F:[F]),E}function t(D,C){var F={};for(var E in D){if(D.hasOwnProperty(E)){F[E]=D[E]}}for(var E in C){if(C.hasOwnProperty(E)){F[E]=C[E]}}return F}if(!Object.prototype.hasOwnProperty){Object.prototype.hasOwnProperty=function(D){var C=this.__proto__||this.constructor.prototype;return(D in this)&&(!(D in C)||C[D]!==this[D])}}if(!Object.keys){Object.keys=function(E){var D=[];for(var C in E){if(E.hasOwnProperty(C)){D.push(C)}}return D}}})(Holder,window);