var HoganTemplate=function(){function r(b){this.text=b}function k(b){var c=String(b===null?"":b);return l.test(c)?c.replace(q,"&amp;").replace(p,"&lt;").replace(o,"&gt;").replace(n,"&#39;").replace(m,"&quot;"):c}r.prototype={r:function(d,c){return""},v:k,render:function(d,c){return this.r(d,c)},rp:function(g,f,s,i){var h=s[g];return h?h.render(f,s):""},rs:function(h,g,u){var t="",s=h[h.length-1];if(!j(s)){return t=u(h,g),t}for(var i=0;i<s.length;i++){h.push(s[i]),t+=u(h,g),h.pop()}return t},s:function(i,h,w,v,u,t){if(j(i)&&i.length===0){return !1}!v&&typeof i=="function"&&(i=this.ls(i,h,w,u,t));var s=i===""||!!i;return !v&&s&&h&&h.push(typeof i=="object"?i:h[h.length-1]),s},d:function(s,i,y,x){if(s==="."&&j(i[i.length-2])){return i[i.length-1]}var w=s.split("."),v=this.f(w[0],i,y,x),u=null;for(var t=1;t<w.length;t++){v&&typeof v=="object"&&w[t] in v?(u=v,v=v[w[t]]):v=""}return x&&!v?!1:(!x&&typeof v=="function"&&(i.push(u),v=this.lv(v,i,y),i.pop()),v)},f:function(s,i,y,x){var w=!1,v=null,u=!1;for(var t=i.length-1;t>=0;t--){v=i[t];if(v&&typeof v=="object"&&s in v){w=v[s],u=!0;break}}return u?(!x&&typeof w=="function"&&(w=this.lv(w,i,y)),w):x?!1:""},ho:function(h,g,u,t){var s=h.call(g,t,function(b){return Hogan.compile(b).render(g)}),i=Hogan.compile(s.toString()).render(g,u);return this.b=i,!1},b:"",ls:function(i,h,w,v,u){var t=h[h.length-1];if(i.length>0){return this.ho(i,t,w,this.text.substring(v,u))}var s=i.call(t);return typeof s=="function"?this.ho(s,t,w,this.text.substring(v,u)):s},lv:function(f,e,h){var g=e[e.length-1];return Hogan.compile(f.call(g).toString()).render(g,h)}};var q=/&/g,p=/</g,o=/>/g,n=/\'/g,m=/\"/g,l=/[&<>\"\']/,j=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"};return r}(),Hogan=function(){function R(ag){function S(){Z.length>0&&(Y.push(new String(Z)),Z="")}function e(){var g=!0;for(var f=V;f<Y.length;f++){g=Y[f].tag&&O[Y[f].tag]<O._v||!Y[f].tag&&Y[f].match(P)==null;if(!g){return !1}}return g}function d(g,f){S();if(g&&e()){for(var h=V;h<Y.length;h++){Y[h].tag||Y.splice(h,1)}}else{f||Y.push({tag:"\n"})}X=!1,V=Y.length}function c(g,k){var j="="+T,i=g.indexOf(j,k),h=Q(g.substring(g.indexOf("=",k)+1,i)).split(" ");return U=h[0],T=h[1],i+j.length-1}var af=ag.length,ae=0,ad=1,ac=2,ab=ae,aa=null,Z="",Y=[],X=!1,W=0,V=0,U="{{",T="}}";for(W=0;W<af;W++){if(ab==ae){N(U,ag,W)?(--W,S(),ab=ad):ag[W]=="\n"?d(X):Z+=ag[W]}else{if(ab==ad){W+=U.length-1;var b=O[ag[W+1]];aa=b?ag[W+1]:"_v",X=W,aa=="="?(W=c(ag,W),ab=ae):(b&&W++,ab=ac)}else{N(T,ag,W)?(W+=T.length-1,Y.push({tag:aa,n:Q(Z),i:aa=="/"?X-1:W+1}),Z="",ab=ae,aa=="{"&&W++):Z+=ag[W]}}}return d(X,!0),Y}function Q(b){return b.trim?b.trim():b.replace(/^\s*|\s*$/g,"")}function N(g,f,j){if(f[j]!=g[0]){return !1}for(var i=1,h=g.length;i<h;i++){if(f[j+i]!=g[i]){return !1}}return !0}function M(g,f,n,m){var l=[],k=null,h=null;while(g.length>0){h=g.shift();if(h.tag=="#"||h.tag=="^"||L(h,m)){n.push(h),h.nodes=M(g,h.tag,n,m),l.push(h)}else{if(h.tag=="/"){if(n.length==0){throw new Error("Closing tag without opener: /"+h.n)}k=n.pop();if(h.n!=k.n&&!K(h.n,k.n,m)){throw new Error("Nesting error: "+k.n+" vs. "+h.n)}return k.end=h.i,l}l.push(h)}}if(n.length>0){throw new Error("missing closing tag: "+n.pop().n)}return l}function L(f,e){for(var h=0,g=e.length;h<g;h++){if(e[h].o==f.n){return f.tag="#",!0}}}function K(g,f,j){for(var i=0,h=j.length;i<h;i++){if(j[i].c==g&&j[i].o==f){return !0}}}function J(g,f,j){var i='var c = [cx];var b = "";var _ = this;'+C(g)+"return b;";if(j.asString){return"function(cx,p){"+i+";};"}var h=new HoganTemplate(f);return h.r=new Function("cx","p",i),h}function E(b){return b.replace(F,"\\\\").replace(I,'\\"').replace(H,"\\n").replace(G,"\\r")}function D(b){return ~b.indexOf(".")?"d":"f"}function C(g){var f="";for(var j=0,i=g.length;j<i;j++){var h=g[j].tag;h=="#"?f+=B(g[j].nodes,g[j].n,D(g[j].n),g[j].i,g[j].end):h=="^"?f+=A(g[j].nodes,g[j].n,D(g[j].n)):h=="<"||h==">"?f+=z(g[j].n):h=="{"||h=="&"?f+=y(g[j].n,D(g[j].n)):h=="\n"?f+=w("\n"):h=="_v"?f+=x(g[j].n,D(g[j].n)):h===undefined&&(f+=w(g[j]))}return f}function B(h,g,l,k,j){var i="if(_.s(_."+l+'("'+E(g)+'",c,p,1),';return i+="c,p,0,"+k+","+j+")){",i+="b += _.rs(c,p,",i+='function(c,p){ var b = "";',i+=C(h),i+="return b;});c.pop();}",i+='else{b += _.b; _.b = ""};',i}function A(f,e,h){var g="if (!_.s(_."+h+'("'+E(e)+'",c,p,1),c,p,1,0,0)){';return g+=C(f),g+="};",g}function z(b){return'b += _.rp("'+E(b)+'",c[c.length - 1],p);'}function y(d,c){return"b += (_."+c+'("'+E(d)+'",c,p,0));'}function x(d,c){return"b += (_.v(_."+c+'("'+E(d)+'",c,p,0)));'}function w(b){return'b += "'+E(b)+'";'}var P=/\S/,O={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10},I=/\"/g,H=/\n/g,G=/\r/g,F=/\\/g;return{scan:R,parse:function(d,c){return c=c||{},M(d,"",[],c.sectionTags||[])},cache:{},compile:function(a,f){f=f||{};var e=this.cache[a];return e?e:(e=J(this.parse(R(a),f),a,f),this.cache[a]=e)}}}();typeof module!="undefined"&&module.exports?(module.exports=Hogan,module.exports.Template=HoganTemplate):typeof exports!="undefined"&&(exports.Hogan=Hogan,exports.HoganTemplate=HoganTemplate);