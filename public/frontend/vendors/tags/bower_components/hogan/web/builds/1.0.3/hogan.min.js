var HoganTemplate=(function(){function c(k){this.text=k}c.prototype={r:function(m,l,k){return""},v:d,render:function b(m,l,k){return this.r(m,l,k)},rp:function(m,o,n,k){var l=n[m];if(!l){return""}return l.r(o,n,k)},rs:function(o,n,p){var l="",k=o[o.length-1];if(!g(k)){return l=p(o,n)}for(var m=0;m<k.length;m++){o.push(k[m]);l+=p(o,n);o.pop()}return l},s:function(q,l,o,m,r,k,n){var p;if(g(q)&&q.length===0){return false}if(!m&&typeof q=="function"){q=this.ls(q,l,o,r,k,n)}p=(q==="")||!!q;if(!m&&p&&l){l.push((typeof q=="object")?q:l[l.length-1])}return p},d:function(o,l,n,p){var q=o.split("."),r=this.f(q[0],l,n,p),k=null;if(o==="."&&g(l[l.length-2])){return l[l.length-1]}for(var m=1;m<q.length;m++){if(r&&typeof r=="object"&&q[m] in r){k=r;r=r[q[m]]}else{r=""}}if(p&&!r){return false}if(!p&&typeof r=="function"){l.push(k);r=this.lv(r,l,n);l.pop()}return r},f:function(o,k,n,p){var r=false,l=null,q=false;for(var m=k.length-1;m>=0;m--){l=k[m];if(l&&typeof l=="object"&&o in l){r=l[o];q=true;break}}if(!q){return(p)?false:""}if(!p&&typeof r=="function"){r=this.lv(r,k,n)}return r},ho:function(q,k,n,p,l){var m=q.call(k,p,function(r){return Hogan.compile(r,{delimiters:l}).render(k,n)});var o=Hogan.compile(m.toString(),{delimiters:l}).render(k,n);this.b=o;return false},b:"",ls:function(q,m,p,r,l,n){var k=m[m.length-1],o=q.call(k);if(q.length>0){return this.ho(q,k,p,this.text.substring(r,l),n)}if(typeof o=="function"){return this.ho(o,k,p,this.text.substring(r,l),n)}return o},lv:function(n,l,m){var k=l[l.length-1];return Hogan.compile(n.call(k).toString()).render(k,m)}};var h=/&/g,e=/</g,a=/>/g,j=/\'/g,i=/\"/g,f=/[&<>\"\']/;function d(k){k=String(k===null?"":k);return f.test(k)?k.replace(h,"&amp;").replace(e,"&lt;").replace(a,"&gt;").replace(j,"&#39;").replace(i,"&quot;"):k}var g=Array.isArray||function(k){return Object.prototype.toString.call(k)==="[object Array]"};return c})();var Hogan=(function(){var f=/\S/,j=/\"/g,n=/\n/g,k=/\r/g,t=/\\/g,a={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};function m(F,A){var N=F.length,x=0,C=1,w=2,y=x,B=null,P=null,O="",I=[],E=false,M=0,J=0,G="{{",L="}}";function K(){if(O.length>0){I.push(new String(O));O=""}}function z(){var R=true;for(var Q=J;Q<I.length;Q++){R=(I[Q].tag&&a[I[Q].tag]<a._v)||(!I[Q].tag&&I[Q].match(f)===null);if(!R){return false}}return R}function H(T,Q){K();if(T&&z()){for(var R=J,S;R<I.length;R++){if(!I[R].tag){if((S=I[R+1])&&S.tag==">"){S.indent=I[R].toString()}I.splice(R,1)}}}else{if(!Q){I.push({tag:"\n"})}}E=false;J=I.length}function D(U,R){var T="="+L,Q=U.indexOf(T,R),S=q(U.substring(U.indexOf("=",R)+1,Q)).split(" ");G=S[0];L=S[1];return Q+T.length-1}if(A){A=A.split(" ");G=A[0];L=A[1]}for(M=0;M<N;M++){if(y==x){if(v(G,F,M)){--M;K();y=C}else{if(F.charAt(M)=="\n"){H(E)}else{O+=F.charAt(M)}}}else{if(y==C){M+=G.length-1;P=a[F.charAt(M+1)];B=P?F.charAt(M+1):"_v";if(B=="="){M=D(F,M);y=x}else{if(P){M++}y=w}E=M}else{if(v(L,F,M)){I.push({tag:B,n:q(O),otag:G,ctag:L,i:(B=="/")?E-L.length:M+G.length});O="";M+=L.length-1;y=x;if(B=="{"){M++}}else{O+=F.charAt(M)}}}}H(E,true);return I}function q(w){if(w.trim){return w.trim()}return w.replace(/^\s*|\s*$/g,"")}function v(w,A,y){if(A.charAt(y)!=w.charAt(0)){return false}for(var z=1,x=w.length;z<x;z++){if(A.charAt(y+z)!=w.charAt(z)){return false}}return true}function b(C,z,x,B){var w=[],A=null,y=null;while(C.length>0){y=C.shift();if(y.tag=="#"||y.tag=="^"||e(y,B)){x.push(y);y.nodes=b(C,y.tag,x,B);w.push(y)}else{if(y.tag=="/"){if(x.length===0){throw new Error("Closing tag without opener: /"+y.n)}A=x.pop();if(y.n!=A.n&&!g(y.n,A.n,B)){throw new Error("Nesting error: "+A.n+" vs. "+y.n)}A.end=y.i;return w}else{w.push(y)}}}if(x.length>0){throw new Error("missing closing tag: "+x.pop().n)}return w}function e(z,x){for(var y=0,w=x.length;y<w;y++){if(x[y].o==z.n){z.tag="#";return true}}}function g(A,y,x){for(var z=0,w=x.length;z<w;z++){if(x[z].c==A&&x[z].o==y){return true}}}function p(w,A,x){var z='i = i || "";var c = [cx];var b = i + "";var _ = this;'+s(w)+"return b;";if(x.asString){return"function(cx,p,i){"+z+";}"}var y=new HoganTemplate(A);y.r=new Function("cx","p","i",z);return y}function u(w){return w.replace(t,"\\\\").replace(j,'\\"').replace(n,"\\n").replace(k,"\\r")}function i(w){return(~w.indexOf("."))?"d":"f"}function s(x){var A="";for(var z=0,y=x.length;z<y;z++){var w=x[z].tag;if(w=="#"){A+=h(x[z].nodes,x[z].n,i(x[z].n),x[z].i,x[z].end,x[z].otag+" "+x[z].ctag)}else{if(w=="^"){A+=r(x[z].nodes,x[z].n,i(x[z].n))}else{if(w=="<"||w==">"){A+=d(x[z])}else{if(w=="{"||w=="&"){A+=c(x[z].n,i(x[z].n))}else{if(w=="\n"){A+=l('"\\n"'+(x.length-1==z?"":" + i"))}else{if(w=="_v"){A+=o(x[z].n,i(x[z].n))}else{if(w===undefined){A+=l('"'+u(x[z])+'"')}}}}}}}}return A}function h(x,B,A,z,w,y){return"if(_.s(_."+A+'("'+u(B)+'",c,p,1),c,p,0,'+z+","+w+', "'+y+'")){b += _.rs(c,p,function(c,p){ var b = "";'+s(x)+'return b;});c.pop();}else{b += _.b; _.b = ""};'}function r(w,y,x){return"if (!_.s(_."+x+'("'+u(y)+'",c,p,1),c,p,1,0,0,"")){'+s(w)+"};"}function d(w){return'b += _.rp("'+u(w.n)+'",c[c.length - 1],p,"'+(w.indent||"")+'");'}function c(x,w){return"b += (_."+w+'("'+u(x)+'",c,p,0));'}function o(x,w){return"b += (_.v(_."+w+'("'+u(x)+'",c,p,0)));'}function l(w){return"b += "+w+";"}return({scan:m,parse:function(x,w){w=w||{};return b(x,"",[],w.sectionTags||[])},cache:{},compile:function(y,w){w=w||{};var x=this.cache[y];if(x){return x}x=p(this.parse(m(y,w.delimiters),w),y,w);return this.cache[y]=x}})})();if(typeof module!=="undefined"&&module.exports){module.exports=Hogan;module.exports.Template=HoganTemplate}else{if(typeof define==="function"&&define.amd){define(function(){return Hogan})}else{if(typeof exports!=="undefined"){exports.Hogan=Hogan;exports.HoganTemplate=HoganTemplate}}};