var HoganTemplate=function(){function r(b){this.text=b}function k(b){return b=String(b===null?"":b),l.test(b)?b.replace(q,"&amp;").replace(p,"&lt;").replace(o,"&gt;").replace(n,"&#39;").replace(m,"&quot;"):b}r.prototype={r:function(e,d,f){return""},v:k,render:function(a,f,e){return this.r(a,f,e)},rp:function(g,f,s,i){var h=s[g];return h?h.r(f,s,i):""},rs:function(h,g,u){var t="",s=h[h.length-1];if(!j(s)){return t=u(h,g)}for(var i=0;i<s.length;i++){h.push(s[i]),t+=u(h,g),h.pop()}return t},s:function(s,i,y,x,w,v,u){var t;return j(s)&&s.length===0?!1:(!x&&typeof s=="function"&&(s=this.ls(s,i,y,w,v,u)),t=s===""||!!s,!x&&t&&i&&i.push(typeof s=="object"?s:i[i.length-1]),t)},d:function(s,i,y,x){var w=s.split("."),v=this.f(w[0],i,y,x),u=null;if(s==="."&&j(i[i.length-2])){return i[i.length-1]}for(var t=1;t<w.length;t++){v&&typeof v=="object"&&w[t] in v?(u=v,v=v[w[t]]):v=""}return x&&!v?!1:(!x&&typeof v=="function"&&(i.push(u),v=this.lv(v,i,y),i.pop()),v)},f:function(s,i,y,x){var w=!1,v=null,u=!1;for(var t=i.length-1;t>=0;t--){v=i[t];if(v&&typeof v=="object"&&s in v){w=v[s],u=!0;break}}return u?(!x&&typeof w=="function"&&(w=this.lv(w,i,y)),w):x?!1:""},ho:function(i,h,w,v,u){var t=i.call(h,v,function(b){return Hogan.compile(b,{delimiters:u}).render(h,w)}),s=Hogan.compile(t.toString(),{delimiters:u}).render(h,w);return this.b=s,!1},b:"",ls:function(s,i,y,x,w,v){var u=i[i.length-1],t=s.call(u);return s.length>0?this.ho(s,u,y,this.text.substring(x,w),v):typeof t=="function"?this.ho(t,u,y,this.text.substring(x,w),v):t},lv:function(f,e,h){var g=e[e.length-1];return Hogan.compile(f.call(g).toString()).render(g,h)}};var q=/&/g,p=/</g,o=/>/g,n=/\'/g,m=/\"/g,l=/[&<>\"\']/,j=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"};return r}(),Hogan=function(){function L(ah,ag){function i(){Y.length>0&&(X.push(new String(Y)),Y="")}function h(){var d=!0;for(var e=U;e<X.length;e++){d=X[e].tag&&M[X[e].tag]<M._v||!X[e].tag&&X[e].match(R)===null;if(!d){return !1}}return d}function f(g,e){i();if(g&&h()){for(var k=U,j;k<X.length;k++){X[k].tag||((j=X[k+1])&&j.tag==">"&&(j.indent=X[k].toString()),X.splice(k,1))}}else{e||X.push({tag:"\n"})}W=!1,U=X.length}function a(j,g){var m="="+S,l=j.indexOf(m,g),k=K(j.substring(j.indexOf("=",g)+1,l)).split(" ");return T=k[0],S=k[1],l+m.length-1}var af=ah.length,ae=0,ad=1,ac=2,ab=ae,aa=null,Z=null,Y="",X=[],W=!1,V=0,U=0,T="{{",S="}}";ag&&(ag=ag.split(" "),T=ag[0],S=ag[1]);for(V=0;V<af;V++){ab==ae?J(T,ah,V)?(--V,i(),ab=ad):ah.charAt(V)=="\n"?f(W):Y+=ah.charAt(V):ab==ad?(V+=T.length-1,Z=M[ah.charAt(V+1)],aa=Z?ah.charAt(V+1):"_v",aa=="="?(V=a(ah,V),ab=ae):(Z&&V++,ab=ac),W=V):J(S,ah,V)?(X.push({tag:aa,n:K(Y),otag:T,ctag:S,i:aa=="/"?W-S.length:V+T.length}),Y="",V+=S.length-1,ab=ae,aa=="{"&&V++):Y+=ah.charAt(V)}return f(W,!0),X}function K(b){return b.trim?b.trim():b.replace(/^\s*|\s*$/g,"")}function J(g,f,j){if(f.charAt(j)!=g.charAt(0)){return !1}for(var i=1,h=g.length;i<h;i++){if(f.charAt(j+i)!=g.charAt(i)){return !1}}return !0}function I(i,h,n,m){var l=[],k=null,j=null;while(i.length>0){j=i.shift();if(j.tag=="#"||j.tag=="^"||H(j,m)){n.push(j),j.nodes=I(i,j.tag,n,m),l.push(j)}else{if(j.tag=="/"){if(n.length===0){throw new Error("Closing tag without opener: /"+j.n)}k=n.pop();if(j.n!=k.n&&!G(j.n,k.n,m)){throw new Error("Nesting error: "+k.n+" vs. "+j.n)}return k.end=j.i,l}l.push(j)}}if(n.length>0){throw new Error("missing closing tag: "+n.pop().n)}return l}function H(f,e){for(var h=0,g=e.length;h<g;h++){if(e[h].o==f.n){return f.tag="#",!0}}}function G(g,f,j){for(var i=0,h=j.length;i<h;i++){if(j[i].c==g&&j[i].o==f){return !0}}}function F(g,f,j){var i='i = i || "";var c = [cx];var b = i + "";var _ = this;'+C(g)+"return b;";if(j.asString){return"function(cx,p,i){"+i+";}"}var h=new HoganTemplate(f);return h.r=new Function("cx","p","i",i),h}function E(b){return b.replace(N,"\\\\").replace(Q,'\\"').replace(P,"\\n").replace(O,"\\r")}function D(b){return ~b.indexOf(".")?"d":"f"}function C(g){var f="";for(var j=0,i=g.length;j<i;j++){var h=g[j].tag;h=="#"?f+=B(g[j].nodes,g[j].n,D(g[j].n),g[j].i,g[j].end,g[j].otag+" "+g[j].ctag):h=="^"?f+=A(g[j].nodes,g[j].n,D(g[j].n)):h=="<"||h==">"?f+=z(g[j]):h=="{"||h=="&"?f+=y(g[j].n,D(g[j].n)):h=="\n"?f+=w('"\\n"'+(g.length-1==j?"":" + i")):h=="_v"?f+=x(g[j].n,D(g[j].n)):h===undefined&&(f+=w('"'+E(g[j])+'"'))}return f}function B(h,g,l,k,j,i){return"if(_.s(_."+l+'("'+E(g)+'",c,p,1),c,p,0,'+k+","+j+', "'+i+'")){b += _.rs(c,p,function(c,p){ var b = "";'+C(h)+'return b;});c.pop();}else{b += _.b; _.b = ""};'}function A(e,d,f){return"if (!_.s(_."+f+'("'+E(d)+'",c,p,1),c,p,1,0,0,"")){'+C(e)+"};"}function z(b){return'b += _.rp("'+E(b.n)+'",c[c.length - 1],p,"'+(b.indent||"")+'");'}function y(d,c){return"b += (_."+c+'("'+E(d)+'",c,p,0));'}function x(d,c){return"b += (_.v(_."+c+'("'+E(d)+'",c,p,0)));'}function w(b){return"b += "+b+";"}var R=/\S/,Q=/\"/g,P=/\n/g,O=/\r/g,N=/\\/g,M={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};return{scan:L,parse:function(d,c){return c=c||{},I(d,"",[],c.sectionTags||[])},cache:{},compile:function(e,d){d=d||{};var f=this.cache[e];return f?f:(f=F(this.parse(L(e,d.delimiters),d),e,d),this.cache[e]=f)}}}();typeof module!="undefined"&&module.exports?(module.exports=Hogan,module.exports.Template=HoganTemplate):typeof define=="function"&&define.amd?define(function(){return Hogan}):typeof exports!="undefined"&&(exports.Hogan=Hogan,exports.HoganTemplate=HoganTemplate);