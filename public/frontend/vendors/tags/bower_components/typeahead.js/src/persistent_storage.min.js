var PersistentStorage=(function(){var a,b;try{a=window.localStorage;a.setItem("~~~","!");a.removeItem("~~~")}catch(f){a=null}function d(h){this.prefix=["__",h,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(a&&window.JSON){b={_prefix:function(h){return this.prefix+h},_ttlKey:function(h){return this._prefix(h)+this.ttlKey},get:function(h){if(this.isExpired(h)){this.remove(h)}return g(a.getItem(this._prefix(h)))},set:function(i,j,h){if(utils.isNumber(h)){a.setItem(this._ttlKey(i),e(c()+h))}else{a.removeItem(this._ttlKey(i))}return a.setItem(this._prefix(i),e(j))},remove:function(h){a.removeItem(this._ttlKey(h));a.removeItem(this._prefix(h));return this},clear:function(){var k,j,l=[],h=a.length;for(k=0;k<h;k++){if((j=a.key(k)).match(this.keyMatcher)){l.push(j.replace(this.keyMatcher,""))}}for(k=l.length;k--;){this.remove(l[k])}return this},isExpired:function(i){var h=g(a.getItem(this._ttlKey(i)));return utils.isNumber(h)&&c()>h?true:false}}}else{b={get:utils.noop,set:utils.noop,remove:utils.noop,clear:utils.noop,isExpired:utils.noop}}utils.mixin(d.prototype,b);return d;function c(){return new Date().getTime()}function e(h){return JSON.stringify(utils.isUndefined(h)?null:h)}function g(h){return JSON.parse(h)}})();