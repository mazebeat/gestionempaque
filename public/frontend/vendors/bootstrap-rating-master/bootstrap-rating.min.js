(function(a,c){var b=5;a.fn.rating=function(d){return this.each(function(){var l=a(this);if(l.data("rating")){return}l.data("rating",true);var e=a.extend({},l.data(),d);e.start=parseInt(e.start,10);e.start=isNaN(e.start)?c:e.start;e.stop=parseInt(e.stop,10);e.stop=isNaN(e.stop)?e.start+b||c:e.stop;e.step=parseInt(e.step,10)||c;e.fractions=Math.abs(parseInt(e.fractions,10))||c;e.scale=Math.abs(parseInt(e.scale,10))||c;e.filledSelected=e.filledSelected||e.filled;e=a.extend({},a.fn.rating.defaults,e);var q=function(t){var u=Math.floor(t);p.find(".rating-symbol-background").css("visibility","visible").slice(0,u).css("visibility","hidden");var s=p.find(".rating-symbol-foreground");s.width(0);s.slice(0,u).width("auto").find("span").attr("class",e.filled);s.eq(t%1?u:u-1).find("span").attr("class",e.filledSelected);s.eq(u).width(t%1*100+"%")};var r=function(i){return e.start+Math.floor(i)*e.step+e.step*m(i%1)};var f=function(i){return(i-e.start)/e.step};var m=function(i){var s=Math.ceil(i%1*e.fractions)/e.fractions;var t=Math.pow(10,e.scale);return Math.floor(i)+Math.floor(s*t)/t};var h=function(s){var t=e.step>0?e.start:e.stop;var i=e.step>0?e.stop:e.start;return t<=s&&s<=i};var o=function(i){var s=parseFloat(i);if(h(s)){q(f(s))}};var g=function(i){return function(s){if(!l.prop("disabled")&&!l.prop("readonly")){i.call(this,s)}}};var p=a("<span></span>").insertBefore(l);for(var k=1;k<=f(e.stop);k++){var n=a('<div class="rating-symbol"></div>').css({display:"inline-block",position:"relative"});a('<div class="rating-symbol-background '+e.empty+'"></div>').appendTo(n);a('<div class="rating-symbol-foreground"></div>').append("<span></span>").css({display:"inline-block",position:"absolute",overflow:"hidden",left:0,width:0}).appendTo(n);p.append(n);e.extendSymbol.call(n,r(k))}o(l.val());l.on("change",function(){o(a(this).val())});var j=function(s){var t=a(s.currentTarget);var i=(s.pageX||s.originalEvent.touches[0].pageX)-t.offset().left;return t.index()+i/t.width()};p.on("mousedown touchstart",".rating-symbol",g(function(i){l.val(r(j(i))).change()})).on("mousemove touchmove",".rating-symbol",g(function(i){q(m(j(i)))})).on("mouseleave touchend",".rating-symbol",g(function(){q(f(parseFloat(l.val())))}))})};a.fn.rating.defaults={filled:"glyphicon glyphicon-star",filledSelected:c,empty:"glyphicon glyphicon-star-empty",start:0,stop:b,step:1,fractions:1,scale:3,extendSymbol:function(d){},};a(function(){a("input.rating").rating()})}(jQuery));