/*!
 * Isotope v2.1.1
 * Filter & sort magical layouts
 * http://isotope.metafizzy.co
 */
(function(e){var k=e.jQuery;function g(n,m){for(var o in m){n[o]=m[o]}return n}var c=String.prototype.trim?function(m){return m.trim()}:function(m){return m.replace(/^\s+|\s+$/g,"")};var b=document.documentElement;var j=b.textContent?function(m){return m.textContent}:function(m){return m.innerText};var l=Object.prototype.toString;function d(m){return l.call(m)==="[object Array]"}var h=Array.prototype.indexOf?function(m,n){return m.indexOf(n)}:function(o,p){for(var n=0,m=o.length;n<m;n++){if(o[n]===p){return n}}return -1};function a(p){var o=[];if(d(p)){o=p}else{if(p&&typeof p.length==="number"){for(var n=0,m=p.length;n<m;n++){o.push(p[n])}}else{o.push(p)}}return o}function i(o,n){var m=h(n,o);if(m!==-1){n.splice(m,1)}}function f(p,t,u,m,o){var q=p.create("isotope",{layoutMode:"masonry",isJQueryFiltering:true,sortAscending:true});q.Item=m;q.LayoutMode=o;q.prototype._create=function(){this.itemGUID=0;this._sorters={};this._getSorters();p.prototype._create.call(this);this.modes={};this.filteredItems=this.items;this.sortHistory=["original-order"];for(var v in o.modes){this._initLayoutMode(v)}};q.prototype.reloadItems=function(){this.itemGUID=0;p.prototype.reloadItems.call(this)};q.prototype._itemize=function(){var w=p.prototype._itemize.apply(this,arguments);for(var x=0,v=w.length;x<v;x++){var y=w[x];y.id=this.itemGUID++}this._updateItemsSortData(w);return w};q.prototype._initLayoutMode=function(v){var w=o.modes[v];var x=this.options[v]||{};this.options[v]=w.options?g(w.options,x):x;this.modes[v]=new w(this)};q.prototype.layout=function(){if(!this._isLayoutInited&&this.options.isInitLayout){this.arrange();return}this._layout()};q.prototype._layout=function(){var v=this._getIsInstant();this._resetLayout();this._manageStamps();this.layoutItems(this.filteredItems,v);this._isLayoutInited=true};q.prototype.arrange=function(x){this.option(x);this._getIsInstant();var v=this._filter(this.items);this.filteredItems=v.matches;var y=this;function w(){y.reveal(v.needReveal);y.hide(v.needHide)}if(this._isInstant){this._noTransition(w)}else{w()}this._sort();this._layout()};q.prototype._init=q.prototype.arrange;q.prototype._getIsInstant=function(){var v=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this._isInstant=v;return v};q.prototype._filter=function(D){var w=this.options.filter;w=w||"*";var y=[];var z=[];var v=[];var C=this._getFilterTest(w);for(var x=0,A=D.length;x<A;x++){var E=D[x];if(E.isIgnored){continue}var B=C(E);if(B){y.push(E)}if(B&&E.isHidden){z.push(E)}else{if(!B&&!E.isHidden){v.push(E)}}}return{matches:y,needReveal:z,needHide:v}};q.prototype._getFilterTest=function(v){if(k&&this.options.isJQueryFiltering){return function(w){return k(w.element).is(v)}}if(typeof v==="function"){return function(w){return v(w.element)}}return function(w){return u(w.element,v)}};q.prototype.updateSortData=function(w){var v;if(w){w=a(w);v=this.getItems(w)}else{v=this.items}this._getSorters();this._updateItemsSortData(v)};q.prototype._getSorters=function(){var w=this.options.getSortData;for(var v in w){var x=w[v];this._sorters[v]=n(x)}};q.prototype._updateItemsSortData=function(w){var v=w&&w.length;for(var x=0;v&&x<v;x++){var y=w[x];y.updateSortData()}};var n=(function(){function w(D){if(typeof D!=="string"){return D}var z=c(D).split(" ");var B=z[0];var A=B.match(/^\[(.+)\]$/);var x=A&&A[1];var y=v(x,B);var C=q.sortDataParsers[z[1]];D=C?function(E){return E&&C(y(E))}:function(E){return E&&y(E)};return D}function v(x,z){var y;if(x){y=function(A){return A.getAttribute(x)}}else{y=function(A){var B=A.querySelector(z);return B&&j(B)}}return y}return w})();q.sortDataParsers={parseInt:function(v){return parseInt(v,10)},parseFloat:function(v){return parseFloat(v)}};q.prototype._sort=function(){var x=this.options.sortBy;if(!x){return}var v=[].concat.apply(x,this.sortHistory);var w=s(v,this.options.sortAscending);this.filteredItems.sort(w);if(x!==this.sortHistory[0]){this.sortHistory.unshift(x)}};function s(w,v){return function x(F,D){for(var z=0,A=w.length;z<A;z++){var G=w[z];var E=F.sortData[G];var B=D.sortData[G];if(E>B||E<B){var y=v[G]!==undefined?v[G]:v;var C=y?1:-1;return(E>B?1:-1)*C}}return 0}}q.prototype._mode=function(){var w=this.options.layoutMode;var v=this.modes[w];if(!v){throw new Error("No layout mode: "+w)}v.options=this.options[w];return v};q.prototype._resetLayout=function(){p.prototype._resetLayout.call(this);this._mode()._resetLayout()};q.prototype._getItemLayoutPosition=function(v){return this._mode()._getItemLayoutPosition(v)};q.prototype._manageStamp=function(v){this._mode()._manageStamp(v)};q.prototype._getContainerSize=function(){return this._mode()._getContainerSize()};q.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()};q.prototype.appended=function(w){var v=this.addItems(w);if(!v.length){return}var x=this._filterRevealAdded(v);this.filteredItems=this.filteredItems.concat(x)};q.prototype.prepended=function(w){var v=this._itemize(w);if(!v.length){return}this._resetLayout();this._manageStamps();var x=this._filterRevealAdded(v);this.layoutItems(this.filteredItems);this.filteredItems=x.concat(this.filteredItems);this.items=v.concat(this.items)};q.prototype._filterRevealAdded=function(v){var w=this._filter(v);this.hide(w.needHide);this.reveal(w.matches);this.layoutItems(w.matches,true);return w.matches};q.prototype.insert=function(y){var x=this.addItems(y);if(!x.length){return}var z,A;var v=x.length;for(z=0;z<v;z++){A=x[z];this.element.appendChild(A.element)}var w=this._filter(x).matches;for(z=0;z<v;z++){x[z].isLayoutInstant=true}this.arrange();for(z=0;z<v;z++){delete x[z].isLayoutInstant}this.reveal(w)};var r=q.prototype.remove;q.prototype.remove=function(w){w=a(w);var y=this.getItems(w);r.call(this,w);if(!y||!y.length){return}for(var x=0,v=y.length;x<v;x++){var z=y[x];i(z,this.filteredItems)}};q.prototype.shuffle=function(){for(var w=0,v=this.items.length;w<v;w++){var x=this.items[w];x.sortData.random=Math.random()}this.options.sortBy="random";this._sort();this._layout()};q.prototype._noTransition=function(x){var v=this.options.transitionDuration;this.options.transitionDuration=0;var w=x.call(this);this.options.transitionDuration=v;return w};q.prototype.getFilteredItemElements=function(){var w=[];for(var x=0,v=this.filteredItems.length;x<v;x++){w.push(this.filteredItems[x].element)}return w};return q}if(typeof define==="function"&&define.amd){define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","./item","./layout-mode","./layout-modes/masonry","./layout-modes/fit-rows","./layout-modes/vertical"],f)}else{if(typeof exports==="object"){module.exports=f(require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("./item"),require("./layout-mode"),require("./layout-modes/masonry"),require("./layout-modes/fit-rows"),require("./layout-modes/vertical"))}else{e.Isotope=f(e.Outlayer,e.getSize,e.matchesSelector,e.Isotope.Item,e.Isotope.LayoutMode)}}})(window);