(function(a){jQuery.sessionTimeout=function(d){function g(i){switch(i){case"start":c=setTimeout(function(){a("#sessionTimeout-dialog").modal("show");b("start")},f.warnAfter);break;case"stop":clearTimeout(c);break}}function b(i){switch(i){case"start":e=setTimeout(function(){window.location=f.redirUrl},f.redirAfter-f.warnAfter);break;case"stop":clearTimeout(e);break}}var h={title:"Your session is about to expire!",message:"Your session is about to expire.",stayConnectedBtn:"Stay connected",logoutBtn:"Logout",keepAliveUrl:"/keep-alive",redirUrl:"/timed-out",logoutUrl:"/log-out",warnAfter:900000,redirAfter:1200000};var f=h,c,e;if(d){f=a.extend(h,d)}a("body").append('<div class="modal fade" id="sessionTimeout-dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+f.title+'</h4></div><div class="modal-body">'+f.message+'</div><div class="modal-footer"><button id="sessionTimeout-dialog-logout" type="button" class="btn btn-default">'+f.logoutBtn+'</button><button id="sessionTimeout-dialog-keepalive" type="button" class="btn btn-primary" data-dismiss="modal">'+f.stayConnectedBtn+"</button></div></div></div></div>");a("#sessionTimeout-dialog-logout").on("click",function(){window.location=f.logoutUrl});a("#sessionTimeout-dialog").on("hide.bs.modal",function(){a.ajax({type:"POST",url:f.keepAliveUrl});b("stop");g("start")});g("start")}})(jQuery);