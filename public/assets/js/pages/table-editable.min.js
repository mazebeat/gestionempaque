jQuery(document).ready(function(){function e(l,o){var m=l.fnGetData(o);var k=$(">td",o);for(var n=0,j=k.length;n<j;n++){l.fnUpdate(m[n],o,n,false)}l.fnDraw()}function b(k,m){var l=k.fnGetData(m);var j=$(">td",m);j[0].innerHTML='<input type="text" class="form-control input-small" value="'+l[0]+'">';j[1].innerHTML='<input type="text" class="form-control input-small" value="'+l[1]+'">';j[2].innerHTML='<input type="text" class="form-control input-small" value="'+l[2]+'">';j[3].innerHTML='<input type="text" class="form-control input-small" value="'+l[3]+'">';j[4].innerHTML='<a class="edit" href="">Save</a>';j[5].innerHTML='<a class="cancel" href="">Cancel</a>'}function c(j,l){var k=$("input",l);j.fnUpdate(k[0].value,l,0,false);j.fnUpdate(k[1].value,l,1,false);j.fnUpdate(k[2].value,l,2,false);j.fnUpdate(k[3].value,l,3,false);j.fnUpdate('<a class="edit" href="">Edit</a>',l,4,false);j.fnUpdate('<a class="delete" href="">Delete</a>',l,5,false);j.fnDraw()}function d(j,l){var k=$("input",l);j.fnUpdate(k[0].value,l,0,false);j.fnUpdate(k[1].value,l,1,false);j.fnUpdate(k[2].value,l,2,false);j.fnUpdate(k[3].value,l,3,false);j.fnUpdate('<a class="edit" href="">Edit</a>',l,4,false);j.fnDraw()}var i=$("#sample_editable_1");var f=i.dataTable({lengthMenu:[[5,15,20,-1],[5,15,20,"All"]],pageLength:10,language:{lengthMenu:" _MENU_ records"},columnDefs:[{orderable:true,targets:[0]},{searchable:true,targets:[0]}],order:[[0,"asc"]]});var h=$("#sample_editable_1_wrapper");h.find(".dataTables_length select").select2({showSearchInput:false});var a=null;var g=false;$("#sample_editable_1_new").click(function(l){l.preventDefault();if(g&&a){if(confirm("Previose row not saved. Do you want to save it ?")){c(f,a);$(a).find("td:first").html("Untitled");a=null;g=false}else{f.fnDeleteRow(a);a=null;g=false;return}}var j=f.fnAddData(["","","","","",""]);var k=f.fnGetNodes(j[0]);b(f,k);a=k;g=true});i.on("click",".delete",function(k){k.preventDefault();if(confirm("Are you sure to delete this row ?")==false){return}var j=$(this).parents("tr")[0];f.fnDeleteRow(j);alert("Deleted! Do not forget to do some ajax to sync with backend :)")});i.on("click",".cancel",function(j){j.preventDefault();if(g){f.fnDeleteRow(a);g=false}else{e(f,a);a=null}});i.on("click",".edit",function(k){k.preventDefault();var j=$(this).parents("tr")[0];if(a!==null&&a!=j){e(f,a);b(f,j);a=j}else{if(a==j&&this.innerHTML=="Save"){c(f,a);a=null;alert("Updated! Do not forget to do some ajax to sync with backend :)")}else{b(f,j);a=j}}})});