$(document).ready(function(){setup_draggable();$("#n-columns").on("change",function(){var a=$(this).val();if(a==="1"){var b=$(".form-body .col-md-12").toggle(true);$(".form-body .col-md-6 .draggable").each(function(c,d){$(this).remove().appendTo(b)});$(".form-body .col-md-6").toggle(false)}else{var b=$(".form-body .col-md-6").toggle(true);$(".form-body .col-md-12 .draggable").each(function(c,d){$(this).remove().appendTo(c%2?b[1]:b[0])});$(".form-body .col-md-12").toggle(false)}});$("#copy-to-clipboard").on("click",function(){var b=$(".form-body").parent().clone().appendTo(document.body);b.find(".tools, :hidden").remove();$.each(["draggable","droppable","sortable","dropped","ui-sortable","ui-draggable","ui-droppable","form-body"],function(d,e){b.find("."+e).removeClass(e)});var a=html_beautify(b.html());b.remove();$modal=get_modal(a).modal("show");$modal.find(".btn").remove();$modal.find(".modal-title").html("Copy HTML");$modal.find(":input:first").select().focus();return false})});var setup_draggable=function(){$(".draggable").draggable({appendTo:"body",helper:"clone"});$(".droppable").droppable({accept:".draggable",helper:"clone",hoverClass:"droppable-active",drop:function(c,d){$(".empty-form").remove();var b=$(d.draggable);if(!$(d.draggable).hasClass("dropped")){var a=b.clone().addClass("dropped").css({position:"static",left:null,right:null}).appendTo(this);var e=b.find(":input").attr("id");if(e){e=e.split("-").slice(0,-1).join("-")+"-"+(parseInt(e.split("-").slice(-1)[0])+1);b.find(":input").attr("id",e);b.find("label").attr("for",e)}$('<p class="tools">            <a class="edit-link">Edit HTML<a> |             <a class="remove-link">Remove</a></p>').appendTo(a)}else{if($(this)[0]!=b.parent()[0]){var a=b.clone().css({position:"static",left:null,right:null}).appendTo(this);b.remove()}}}}).sortable()};var get_modal=function(b){var a=$('<div class="modal" style="overflow: auto;" tabindex="-1">      <div class="modal-dialog">        <div class="modal-content">          <div class="modal-header">            <a type="button" class="close"              data-dismiss="modal" aria-hidden="true">&times;</a>            <h4 class="modal-title">Edit HTML</h4>          </div>          <div class="modal-body ui-front">            <textarea class="form-control"               style="min-height: 200px; margin-bottom: 10px;              font-family: Monaco, Fixed">'+b+'</textarea>            <button class="btn btn-success">Update</button>          </div>        </div>      </div>      </div>').appendTo(document.body);return a};$(document).on("click",".edit-link",function(d){var c=$(this).parent().parent();var e=c.clone();var b=e.find(".edit-link").parent().remove();var a=get_modal(html_beautify(e.html())).modal("show");a.find(":input:first").focus();a.find(".btn-success").click(function(f){var g=a.find("textarea").val();if(!g){c.remove()}else{c.html(g);b.appendTo(c)}a.modal("hide");return false})});$(document).on("click",".remove-link",function(a){$(this).parent().parent().remove()});