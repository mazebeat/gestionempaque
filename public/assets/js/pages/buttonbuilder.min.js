!function(b){var a=function(d,e){this.$element=b(d);this.options=b.extend({},b.fn.typeahead.defaults,e);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=b(this.options.menu);this.shown=false;this.listen()};a.prototype={constructor:a,select:function(){var d=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(d)).change();return this.hide()},updater:function(d){return d},show:function(){var d=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:d.top+d.height,left:d.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(d){var e;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}e=b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source;return e?this.process(e):this},process:function(d){var e=this;d=b.grep(d,function(f){return e.matcher(f)});d=this.sorter(d);if(!d.length){return this.shown?this.hide():this}return this.render(d.slice(0,this.options.items)).show()},matcher:function(d){return ~d.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(h){var f=[],j=[],g=[],d;while(d=h.shift()){if(!d.toLowerCase().indexOf(this.query.toLowerCase())){f.push(d)}else{if(~d.indexOf(this.query)){j.push(d)}else{g.push(d)}}}return f.concat(j,g)},highlighter:function(f){var d=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return f.replace(new RegExp("("+d+")","ig"),function(h,g){return"<strong>"+g+"</strong>"})},render:function(d){var e=this;d=b(d).map(function(f,g){f=b(e.options.item).attr("data-value",g);f.find("a").html(e.highlighter(g));return f[0]});d.first().addClass("active");this.$menu.html(d);return this},next:function(d){var f=this.$menu.find(".active").removeClass("active"),e=f.next();if(!e.length){e=b(this.$menu.find("li")[0])}e.addClass("active")},prev:function(f){var d=this.$menu.find(".active").removeClass("active"),g=d.prev();if(!g.length){g=this.$menu.find("li").last()}g.addClass("active")},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",b.proxy(this.keydown,this))}this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this)).on("mouseleave","li",b.proxy(this.mouseleave,this))},eventSupported:function(f){var d=f in this.$element;if(!d){this.$element.setAttribute(f,"return;");d=typeof this.$element[f]==="function"}return d},move:function(d){if(!this.shown){return}switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:d.preventDefault();this.prev();break;case 40:d.preventDefault();this.next();break}d.stopPropagation()},keydown:function(d){this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]);this.move(d)},keypress:function(d){if(this.suppressKeyPressRepeat){return}this.move(d)},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}d.stopPropagation();d.preventDefault()},focus:function(d){this.focused=true},blur:function(d){this.focused=false;if(!this.mousedover&&this.shown){this.hide()}},click:function(d){d.stopPropagation();d.preventDefault();this.select();this.$element.focus()},mouseenter:function(d){this.mousedover=true;this.$menu.find(".active").removeClass("active");b(d.currentTarget).addClass("active")},mouseleave:function(d){this.mousedover=false;if(!this.focused&&this.shown){this.hide()}}};var c=b.fn.typeahead;b.fn.typeahead=function(d){return this.each(function(){var g=b(this),e=g.data("typeahead"),f=typeof d=="object"&&d;if(!e){g.data("typeahead",e=new a(this,f))}if(typeof d=="string"){e[d]()}})};b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};b.fn.typeahead.Constructor=a;b.fn.typeahead.noConflict=function(){b.fn.typeahead=c;return this};b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(d){var e=b(this);if(e.data("typeahead")){return}e.typeahead(e.data())})}(window.jQuery);Button=Backbone.Model.extend({defaults:{name:"Default text here",size:"",fullwidth:false,type:"btn-default",icon:"",iconplacement:""},initialize:function(){}});ButtonView=Backbone.View.extend({el:$("#result"),initialize:function(){this.model.on("change",this.render,this);this.render()},events:{"click #output":"selectOutput"},selectOutput:function(b){var a=$(b.currentTarget);a.select()},render:function(){var a=_.template("<a href=\"#\" class=\"btn<% fullwidth != false ? print(' btn-block') :'' %><% size !=''? print(' '+size) :'' %><% type !=''? print(' '+type) :'' %>\"><% if(iconplacement != 'right') { icon !=''? print('<span class=\"'+icon +'\"></span> ') : null } %><%= name %><% if(iconplacement == 'right') { icon !=''? print(' <span class=\"'+icon +'\"></span>') : null } %></a>");this.$el.find("#button").html(a(this.model.toJSON()));this.$el.find("input").val(a(this.model.toJSON()))}});SizesView=Backbone.View.extend({el:$("#sizes"),events:{"click button":"open","click .btn-block":"toggle"},open:function(a){a.preventDefault();this.model.set({size:a.currentTarget.value})},toggle:function(a){a.preventDefault();this.model.set({fullwidth:!this.model.get("fullwidth")})}});TypesView=Backbone.View.extend({el:$("#types"),events:{"click button":"open"},open:function(a){this.model.set({type:a.currentTarget.value})}});NameView=Backbone.View.extend({el:$("#input"),events:{"change input#name":"update"},update:function(a){a.preventDefault();this.model.set({name:a.currentTarget.value})}});IconView=Backbone.View.extend({el:$("#icons"),events:{"click .bs-glyphicons a":"update","click #icon-position button":"updatePosition","click #icon-color button":"updateColor","change input#search":"updateFromSearch"},updatePosition:function(a){a.preventDefault();this.model.set({iconplacement:a.currentTarget.value})},update:function(a){a.preventDefault();this.model.set({icon:$(a.currentTarget).find("span").attr("class")})},updateFromSearch:function(a){a.preventDefault();this.model.set({icon:a.currentTarget.value})}});var button=new Button;var buttonView=new ButtonView({model:button});var sizesView=new SizesView({model:button});var typesView=new TypesView({model:button});var nameView=new NameView({model:button});var iconView=new IconView({model:button});var icons=[];$(".bs-glyphicons").children().each(function(){classstr=$(this).find("a").find("span").attr("class");icons.push(classstr)});$(".typeahead").typeahead({source:icons,items:12});