tinymce.PluginManager.add("importcss",function(c){function b(f){function i(k,j){(j||h[k.href])&&(a(k.imports,function(l){i(l,!0)}),a(k.cssRules||k.rules,function(l){l.styleSheet?i(l.styleSheet,!0):l.selectorText&&a(l.selectorText.split(","),function(m){e.push(tinymce.trim(m))})}))}var e=[],h={};a(c.contentCSS,function(j){h[j]=!0});try{a(f.styleSheets,i)}catch(g){}return e}function d(g){var j,f=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(g);if(f){var e=f[1],h=f[2].substr(1).split(".").join(" ");return f[1]?(j={title:g},c.schema.getTextBlockElements()[e]?j.block=e:c.schema.getBlockElements()[e]?j.selector=e:j.inline=e):f[2]&&(j={inline:"span",title:g.substr(1),classes:h}),c.settings.importcss_merge_classes!==!1?j.classes=h:j.attributes={"class":h},j}}var a=tinymce.each;c.settings.style_formats||c.on("renderFormatsMenu",function(e){var g=c.settings.importcss_selector_converter||d,f={};c.settings.importcss_append||e.control.items().remove(),a(b(c.getDoc()),function(j){if(-1===j.indexOf(".mce-")&&!f[j]){var k=g(j);if(k){var h=k.name||tinymce.DOM.uniqueId();c.formatter.register(h,k),e.control.append(tinymce.extend({},e.control.settings.itemDefaults,{text:k.title,format:h}))}f[j]=!0}})})});