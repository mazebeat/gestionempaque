tinymce.PluginManager.add("pagebreak",function(f){var d,g="mce-pagebreak",c=f.getParam("pagebreak_separator","<!-- pagebreak -->"),b='<img src="'+tinymce.Env.transparentSrc+'" class="'+g+'" data-mce-resize="false" />';d=new RegExp(c.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(a){return"\\"+a}),"gi"),f.addCommand("mcePageBreak",function(){f.execCommand("mceInsertContent",0,b)}),f.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),f.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"}),f.on("ResolveName",function(a){"IMG"==a.target.nodeName&&f.dom.hasClass(a.target,g)&&(a.name="pagebreak")}),f.on("click",function(a){a=a.target,"IMG"===a.nodeName&&f.dom.hasClass(a,g)&&f.selection.select(a)}),f.on("BeforeSetContent",function(a){a.content=a.content.replace(d,b)}),f.on("PreInit",function(){f.serializer.addNodeFilter("img",function(j){for(var i,k,h=j.length;h--;){i=j[h],k=i.attr("class"),k&&-1!==k.indexOf("mce-pagebreak")&&(i.type=3,i.value=c,i.raw=!0)}})})});