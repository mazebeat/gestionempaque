tinymce.PluginManager.add("fullscreen",function(h){function f(){var p,o,q=window,m=document,l=m.body;return l.offsetWidth&&(p=l.offsetWidth,o=l.offsetHeight),q.innerWidth&&q.innerHeight&&(p=q.innerWidth,o=q.innerHeight),{w:p,h:o}}function k(){function p(){b.setStyle(o,"height",f().h-(i.clientHeight-o.clientHeight))}var i,o,e,l=document.body,a=document.documentElement;j=!j,i=h.getContainer().firstChild,o=h.getContentAreaContainer().firstChild,e=o.style,j?(d=e.width,c=e.height,e.width=e.height="100%",b.addClass(l,"mce-fullscreen"),b.addClass(a,"mce-fullscreen"),b.addClass(i,"mce-fullscreen"),b.bind(window,"resize",p),p(),g=p):(e.width=d,e.height=c,b.removeClass(l,"mce-fullscreen"),b.removeClass(a,"mce-fullscreen"),b.removeClass(i,"mce-fullscreen"),b.unbind(window,"resize",g)),h.fire("FullscreenStateChanged",{state:j})}var d,c,g,j=!1,b=tinymce.DOM;if(!h.settings.inline){return h.on("init",function(){h.addShortcut("Ctrl+Alt+F","",k)}),h.on("remove",function(){g&&b.unbind(window,"resize",g)}),h.addCommand("mceFullScreen",k),h.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Alt+F",selectable:!0,onClick:k,onPostRender:function(){var a=this;h.on("FullscreenStateChanged",function(i){a.active(i.state)})},context:"view"}),h.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Alt+F",onClick:k,onPostRender:function(){var a=this;h.on("FullscreenStateChanged",function(i){a.active(i.state)})}}),{isFullscreen:function(){return j}}}});