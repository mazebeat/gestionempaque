tinymce.PluginManager.add("code",function(b){function a(){b.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:b.getParam("code_dialog_width",600),minHeight:b.getParam("code_dialog_height",500),value:b.getContent({source_view:!0}),spellcheck:!1},onSubmit:function(c){b.undoManager.transact(function(){b.setContent(c.data.code)}),b.nodeChanged()}})}b.addCommand("mceCodeEditor",a),b.addButton("code",{icon:"code",tooltip:"Source code",onclick:a}),b.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:a})});