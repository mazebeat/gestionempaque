!function(d){function g(){function l(e){"remove"===e&&this.each(function(i,o){var p=k(o);p&&p.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(i,o){var p=tinymce.get(o.id.replace(/_parent$/,""));p&&p.remove()})}function j(o){var p,e=this;if(null!=o){l.call(e),e.each(function(r,s){var q;(q=tinymce.get(s.id))&&q.setContent(o)})}else{if(e.length>0&&(p=tinymce.get(e[0].id))){return p.getContent()}}}function k(i){var n=null;return i&&i.id&&b.tinymce&&(n=tinymce.get(i.id)),n}function m(e){return !!(e&&e.length&&b.tinymce&&e.is(":tinymce"))}var a={};d.each(["text","html","val"],function(p,i){var q=a[i]=d.fn[i],n="text"===i;d.fn[i]=function(t){var r=this;if(!m(r)){return q.apply(r,arguments)}if(t!==h){return j.call(r.filter(":tinymce"),t),q.apply(r.not(":tinymce"),arguments),r}var s="",o=arguments;return(n?r:r.eq(0)).each(function(v,w){var u=k(w);s+=u?n?u.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):u.getContent({save:!0}):q.apply(d(w),o)}),s}}),d.each(["append","prepend"],function(q,p){var n=a[p]=d.fn[p],r="prepend"===p;d.fn[p]=function(i){var o=this;return m(o)?i!==h?(o.filter(":tinymce").each(function(t,u){var s=k(u);s&&s.setContent(r?i+s.getContent():s.getContent()+i)}),n.apply(o.not(":tinymce"),arguments),o):void 0:n.apply(o,arguments)}}),d.each(["remove","replaceWith","replaceAll","empty"],function(p,e){var o=a[e]=d.fn[e];d.fn[e]=function(){return l.call(this,e),o.apply(this,arguments)}}),a.attr=d.fn.attr,d.fn.attr=function(t,n){var u=this,q=arguments;if(!t||"value"!==t||!m(u)){return n!==h?a.attr.apply(u,q):a.attr.apply(u,q)}if(n!==h){return j.call(u.filter(":tinymce"),n),a.attr.apply(u.not(":tinymce"),q),u}var i=u[0],r=k(i);return r?r.getContent({save:!0}):a.attr.apply(d(i),q)}}var h,c,f=[],b=window;d.fn.tinymce=function(r){function q(){var l=[],n=0;g&&(g(),g=null),a.each(function(s,v){var o,w=v.id,p=r.oninit;w||(v.id=w=tinymce.DOM.uniqueId()),tinymce.get(w)||(o=new tinymce.Editor(w,r,tinymce.EditorManager),l.push(o),o.on("init",function(){var u,x=p;a.css("visibility",""),p&&++n==l.length&&("string"==typeof x&&(u=-1===x.indexOf(".")?null:tinymce.resolve(x.replace(/\.\w+$/,"")),x=tinymce.resolve(x)),x.apply(u||tinymce,l))}))}),d.each(l,function(o,p){p.render()})}var e,m,i,a=this,k="";if(!a.length){return a}if(!r){return tinymce.get(a[0].id)}if(a.css("visibility","hidden"),b.tinymce||c||!(e=r.script_url)){1===c?f.push(q):q()}else{c=1,m=e.substring(0,e.lastIndexOf("/")),-1!=e.indexOf(".min")&&(k=".min"),b.tinymce=b.tinyMCEPreInit||{base:m,suffix:k},-1!=e.indexOf("gzip")&&(i=r.language||"en",e=e+(/\?/.test(e)?"&":"?")+"js=true&core=true&suffix="+escape(k)+"&themes="+escape(r.theme||"")+"&plugins="+escape(r.plugins||"")+"&languages="+(i||""),b.tinyMCE_GZ||(b.tinyMCE_GZ={start:function(){function l(n){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(n))}l("langs/"+i+".js"),l("themes/"+r.theme+"/theme"+k+".js"),l("themes/"+r.theme+"/langs/"+i+".js"),d.each(r.plugins.split(","),function(o,p){p&&(l("plugins/"+p+"/plugin"+k+".js"),l("plugins/"+p+"/langs/"+i+".js"))})},end:function(){}}));var j=document.createElement("script");j.type="text/javascript",j.onload=j.onreadystatechange=function(l){l=l||event,("load"==l.type||/complete|loaded/.test(j.readyState))&&(tinymce.dom.Event.domLoaded=1,c=2,r.script_loaded&&r.script_loaded(),q(),d.each(f,function(n,o){o()}))},j.src=e,document.body.appendChild(j)}return a},d.extend(d.expr[":"],{tinymce:function(a){return !!(a.id&&"tinymce" in window&&tinymce.get(a.id))}})}(jQuery);