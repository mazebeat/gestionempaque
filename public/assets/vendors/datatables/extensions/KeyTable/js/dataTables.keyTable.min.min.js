/*!
 KeyTable 1.2.0
 Â©2010-2014 SpryMedia Ltd - datatables.net/license
*/
var KeyTable;(function(b,d,a){var c=function(e){KeyTable=function(ac){function T(g){return function(j,k,i){(null===j||"number"==typeof j)&&(null===k||"number"==typeof k)&&"function"==typeof i?ab[g].push({x:j,y:k,fn:i}):"object"==typeof j&&"function"==typeof k?(j=Q(j),ab[g].push({x:j[0],y:j[1],fn:k})):alert("Unhandable event type was added: x"+j+"  y:"+k+"  z:"+i)}}function f(g){return function(j,k,i){(null===j||"number"==typeof j)&&(null===k||"number"==typeof k)?"function"==typeof i?X(g,j,k,i):X(g,j,k):"object"==typeof j?(j=Q(j),"function"==typeof k?X(g,j[0],j[1],k):X(g,j[0],j[1])):alert("Unhandable event type was removed: x"+j+"  y:"+k+"  z:"+i)}}function X(i,l,o,k){for(var j=0,g=0,m=ab[i].length;g<m-j;g++){if("undefined"!=typeof k){ab[i][g-j].x==l&&(ab[i][g-j].y==o&&ab[i][g-j].fn==k)&&(ab[i].splice(g-j,1),j++)}else{if(ab[i][g-j].x==l&&ab[i][g-j].y==o){return ab[i].splice(g,1),1}}}return j}function V(i,k,l){for(var j=0,i=ab[i],g=0;g<i.length;g++){if(i[g].x==k&&i[g].y==l||null===i[g].x&&i[g].y==l||i[g].x==k&&null===i[g].y||null===i[g].x&&null===i[g].y){i[g].fn(M(k,l),k,l),j++}}return j}function W(z,w){if(R!=z){"undefined"==typeof w&&(w=!0);null!==R&&O(R);e(z).addClass(r);e(z).parent().addClass(r);var x;if(ad){x=ad;for(var y=K(z)[1],u=Y;y>=x.fnDisplayEnd();){0<=x._iDisplayLength?x._iDisplayStart+x._iDisplayLength<x.fnRecordsDisplay()&&(x._iDisplayStart+=x._iDisplayLength):x._iDisplayStart=0,ad.oApi._fnCalculateEnd(x)}for(;y<x._iDisplayStart;){x._iDisplayStart=0<=x._iDisplayLength?x._iDisplayStart-x._iDisplayLength:0,0>x._iDisplayStart&&(x._iDisplayStart=0),ad.oApi._fnCalculateEnd(x)}ad.oApi._fnDraw(x);Y=u}y=Q(z);R=z;aa=y[0];ae=y[1];var g,t,o,l,v;if(w){g=e(b).height();y=e(b).width();t=e(d).scrollTop();u=e(d).scrollLeft();o=z.offsetHeight;l=z.offsetWidth;v=z;var i=0,A=0;if(v.offsetParent){i=v.offsetLeft;A=v.offsetTop;for(v=v.offsetParent;v;){i+=v.offsetLeft,A+=v.offsetTop,v=v.offsetParent}}v=[i,A];if(ad&&"undefined"!=typeof x.oScroll&&(""!==x.oScroll.sX||""!==x.oScroll.sY)){v[1]-=e(x.nTable.parentNode).scrollTop(),v[0]-=e(x.nTable.parentNode).scrollLeft()}v[1]+o>t+g?(g=v[1]+o-g,d.documentElement.scrollTop=g,d.body.scrollTop=g):v[1]<t&&(g=v[1],d.documentElement.scrollTop=g,d.body.scrollTop=g);v[0]+l>u+y?(y=v[0]+l-y,d.documentElement.scrollLeft=y,d.body.scrollLeft=y):v[0]<u&&(y=v[0],d.documentElement.scrollLeft=y,d.body.scrollLeft=y)}if(ad&&"undefined"!=typeof x.oScroll&&(""!==x.oScroll.sX||""!==x.oScroll.sY)){(x=x.nTable.parentNode,g=x.clientHeight,y=x.clientWidth,t=x.scrollTop,u=x.scrollLeft,o=z.offsetHeight,l=z.offsetWidth,z.offsetTop+o>g+t?x.scrollTop=z.offsetTop+o-g:z.offsetTop<t&&(x.scrollTop=z.offsetTop),z.offsetLeft+l>y+u)?x.scrollLeft=z.offsetLeft+l-y:z.offsetLeft<u&&(x.scrollLeft=z.offsetLeft)}Y||(Y=!0);V("focus",aa,ae)}}function p(){O(R);R=ae=aa=null;Y=!1}function O(g){e(g).removeClass(r);e(g).parent().removeClass(r);V("blur",aa,ae)}function F(){for(var g=this;"TD"!=g.nodeName;){g=g.parentNode}W(g);Y||(Y=!0)}function M(i,g){return ad?"undefined"!=typeof ad.aoData[ad.aiDisplay[g]]?ad.aoData[ad.aiDisplay[g]].nTr.getElementsByTagName("td")[i]:null:e("tr:eq("+g+")>td:eq("+i+")",h)[0]}function Q(g){return ad?[e("td",g.parentNode).index(g),e("tr",g.parentNode.parentNode).index(g.parentNode)+ad._iDisplayStart]:[e("td",g.parentNode).index(g),e("tr",g.parentNode.parentNode).index(g.parentNode)]}function K(j){for(var i=0,o=ad.aiDisplay.length;i<o;i++){for(var m=ad.aoData[ad.aiDisplay[i]].nTr.getElementsByTagName("td"),k=0,l=m.length;k<l;k++){if(m[k]==j){return[k,i]}}}return null}this.block=!1;this.event={remove:{}};this.fnGetCurrentPosition=function(){return[aa,ae]};this.fnGetCurrentData=function(){return R.innerHTML};this.fnGetCurrentTD=function(){return R};this.fnSetPosition=function(i,g){"object"==typeof i&&i.nodeName?W(i):W(M(i,g))};this.fnBlur=function(){p()};var h=null,R=null,aa=null,ae=null,n=null,r="focus",Y=!1,ab={action:[],esc:[],focus:[],blur:[]},ad=null,U,S,P=!1,Z;for(Z in ab){Z&&(this.event[Z]=T(Z),this.event.remove[Z]=f(Z))}var N;ac===a?(Z=e("table.KeyTable")[0],N=null):e.isPlainObject(ac)?(Z=ac.table,N=ac.datatable):(N=(new e.fn.dataTable.Api(ac)).settings()[0],Z=N.nTable);var af=ac,n=this;"undefined"==typeof af&&(af={});"undefined"==typeof af.focus&&(af.focus=[0,0]);af.table=Z;e(af.table).addClass("KeyTable");"undefined"!=typeof af.focusClass&&(r=af.focusClass);"undefined"!=typeof N&&(ad=N);"undefined"==typeof af.initScroll&&(af.initScroll=!0);"undefined"==typeof af.form&&(af.form=!1);U=af.form;h=af.table.getElementsByTagName("tbody")[0];U?(ac=d.createElement("div"),S=d.createElement("input"),ac.style.height="1px",ac.style.width="0px",ac.style.overflow="hidden","undefined"!=typeof af.tabIndex&&(S.tabIndex=af.tabIndex),ac.appendChild(S),af.table.parentNode.insertBefore(ac,af.table.nextSibling),e(S).focus(function(){if(!P){Y=true;P=false;typeof af.focus.nodeName!="undefined"?W(af.focus,af.initScroll):W(M(af.focus[0],af.focus[1]),af.initScroll);setTimeout(function(){S.blur()},0)}}),Y=!1):("undefined"!=typeof af.focus.nodeName?W(af.focus,af.initScroll):W(M(af.focus[0],af.focus[1]),af.initScroll),Y||(Y=!0));e(d).bind("keydown",function(i){if(n.block||!Y||i.metaKey||i.altKey||i.ctrlKey){return true}var g;g=h.getElementsByTagName("tr")[0].getElementsByTagName("td").length;var k;if(ad){k=ad.aiDisplay.length;var j=K(R);if(j===null){return}aa=j[0];ae=j[1]}else{k=h.getElementsByTagName("tr").length}j=i.keyCode==9&&i.shiftKey?-1:i.keyCode;switch(j){case 13:i.preventDefault();i.stopPropagation();V("action",aa,ae);return true;case 27:if(!V("esc",aa,ae)){p();return}i=aa;g=ae;break;case -1:case 37:if(aa>0){i=aa-1;g=ae}else{if(ae>0){i=g-1;g=ae-1}else{if(j==-1&&U){P=true;S.focus();setTimeout(function(){P=false},0);Y=false;p();return true}return false}}break;case 38:if(ae>0){i=aa;g=ae-1}else{return false}break;case 36:i=aa;g=0;break;case 33:i=aa;g=ae-10;g<0&&(g=0);break;case 9:case 39:if(aa<g-1){i=aa+1;g=ae}else{if(ae<k-1){i=0;g=ae+1}else{if(j==9&&U){P=true;S.focus();setTimeout(function(){P=false},0);Y=false;p();return true}return false}}break;case 40:if(ae<k-1){i=aa;g=ae+1}else{return false}break;case 35:i=aa;g=k-1;break;case 34:i=aa;g=ae+10;g>k-1&&(g=k-1);break;default:return true}W(M(i,g));return false});if(ad){e(ad.nTable).on("click","td",F)}else{e(h).on("click","td",F)}e(d).click(function(g){for(var g=g.target,i=false;g;){if(g==af.table){i=true;break}g=g.parentNode}i||p()})};KeyTable.version="1.2.0";e.fn.dataTable.KeyTable=KeyTable;return e.fn.DataTable.KeyTable=KeyTable};"function"===typeof define&&define.amd?define("datatables-keytable",["jquery","datatables"],c):jQuery&&!jQuery.fn.dataTable.KeyTable&&c(jQuery,jQuery.fn.dataTable)})(window,document);