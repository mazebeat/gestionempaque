(function(k){function d(f,a){return a*Math.floor(f/a)}function b(C,G,y,w){if(typeof C.strftime=="function"){return C.strftime(G)}var A=function(f,a){return f=""+f,a=""+(a==null?"0":a),f.length==1?a+f:f},H=[],x=!1,F=C.getHours(),E=F<12;y==null&&(y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),w==null&&(w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var B;F>12?B=F-12:F==0?B=12:B=F;for(var z=0;z<G.length;++z){var D=G.charAt(z);if(x){switch(D){case"a":D=""+w[C.getDay()];break;case"b":D=""+y[C.getMonth()];break;case"d":D=A(C.getDate());break;case"e":D=A(C.getDate()," ");break;case"h":case"H":D=A(F);break;case"I":D=A(B);break;case"l":D=A(B," ");break;case"m":D=A(C.getMonth()+1);break;case"M":D=A(C.getMinutes());break;case"q":D=""+(Math.floor(C.getMonth()/3)+1);break;case"S":D=A(C.getSeconds());break;case"y":D=A(C.getFullYear()%100);break;case"Y":D=""+C.getFullYear();break;case"p":D=E?"am":"pm";break;case"P":D=E?"AM":"PM";break;case"w":D=""+C.getDay()}H.push(D),x=!1}else{D=="%"?x=!0:H.push(D)}}return H.join("")}function h(o){function f(w,i,x,u){w[i]=function(){return x[u].apply(x,arguments)}}var s={date:o};o.strftime!=undefined&&f(s,"strftime",o,"strftime"),f(s,"getTime",o,"getTime"),f(s,"setTime",o,"setTime");var l=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var a=0;a<l.length;a++){f(s,"get"+l[a],o,"getUTC"+l[a]),f(s,"set"+l[a],o,"setUTC"+l[a])}return s}function v(f,a){if(a.timezone=="browser"){return new Date(f)}if(!a.timezone||a.timezone=="utc"){return h(new Date(f))}if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var i=new timezoneJS.Date;return i.setTimezone(a.timezone),i.setTime(f),i}return h(new Date(f))}function g(a){a.hooks.processOptions.push(function(f,e){k.each(f.getAxes(),function(o,n){var l=n.options;l.mode=="time"&&(n.tickGenerator=function(D){var M=[],i=v(D.min,l),L=0,z=l.tickSize&&l.tickSize[1]==="quarter"||l.minTickSize&&l.minTickSize[1]==="quarter"?j:m;l.minTickSize!=null&&(typeof l.tickSize=="number"?L=l.tickSize:L=l.minTickSize[0]*c[l.minTickSize[1]]);for(var G=0;G<z.length-1;++G){if(D.delta<(z[G][0]*c[z[G][1]]+z[G+1][0]*c[z[G+1][1]])/2&&z[G][0]*c[z[G][1]]>=L){break}}var B=z[G][0],s=z[G][1];if(s=="year"){if(l.minTickSize!=null&&l.minTickSize[1]=="year"){B=Math.floor(l.minTickSize[0])}else{var F=Math.pow(10,Math.floor(Math.log(D.delta/c.year)/Math.LN10)),K=D.delta/c.year/F;K<1.5?B=1:K<3?B=2:K<7.5?B=5:B=10,B*=F}B<1&&(B=1)}D.tickSize=l.tickSize||[B,s];var x=D.tickSize[0];s=D.tickSize[1];var C=x*c[s];s=="second"?i.setSeconds(d(i.getSeconds(),x)):s=="minute"?i.setMinutes(d(i.getMinutes(),x)):s=="hour"?i.setHours(d(i.getHours(),x)):s=="month"?i.setMonth(d(i.getMonth(),x)):s=="quarter"?i.setMonth(3*d(i.getMonth()/3,x)):s=="year"&&i.setFullYear(d(i.getFullYear(),x)),i.setMilliseconds(0),C>=c.minute&&i.setSeconds(0),C>=c.hour&&i.setMinutes(0),C>=c.day&&i.setHours(0),C>=c.day*4&&i.setDate(1),C>=c.month*2&&i.setMonth(d(i.getMonth(),3)),C>=c.quarter*2&&i.setMonth(d(i.getMonth(),6)),C>=c.year&&i.setMonth(0);var I=0,H=Number.NaN,J;do{J=H,H=i.getTime(),M.push(H);if(s=="month"||s=="quarter"){if(x<1){i.setDate(1);var N=i.getTime();i.setMonth(i.getMonth()+(s=="quarter"?3:1));var A=i.getTime();i.setTime(H+I*c.hour+(A-N)*x),I=i.getHours(),i.setHours(0)}else{i.setMonth(i.getMonth()+x*(s=="quarter"?3:1))}}else{s=="year"?i.setFullYear(i.getFullYear()+x):i.setTime(H+C)}}while(H<D.max&&H!=J);return M},n.tickFormatter=function(y,C){var r=v(y,C.options);if(l.timeformat!=null){return b(r,l.timeformat,l.monthNames,l.dayNames)}var B=C.options.tickSize&&C.options.tickSize[1]=="quarter"||C.options.minTickSize&&C.options.minTickSize[1]=="quarter",A=C.tickSize[0]*c[C.tickSize[1]],x=C.max-C.min,s=l.twelveHourClock?" %p":"",z=l.twelveHourClock?"%I":"%H",w;A<c.minute?w=z+":%M:%S"+s:A<c.day?x<2*c.day?w=z+":%M"+s:w="%b %d "+z+":%M"+s:A<c.month?w="%b %d":B&&A<c.quarter||!B&&A<c.year?x<c.year?w="%b":w="%b %Y":B&&A<c.year?x<c.year?w="Q%q":w="Q%q %Y":w="%Y";var i=b(r,w,l.monthNames,l.dayNames);return i})})})}var q={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},c={second:1000,minute:60000,hour:3600000,day:86400000,month:2592000000,quarter:7776000000,year:525949.2*60*1000},p=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"]],m=p.concat([[3,"month"],[6,"month"],[1,"year"]]),j=p.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);k.plot.plugins.push({init:g,options:q,name:"time",version:"1.0"}),k.plot.formatDate=b})(jQuery);