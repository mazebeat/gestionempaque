(function(k){function j(y,G,z,H,A,a,F){var d=Math.pow,E=Math.sqrt,D,e,f,x,B,C,b,c;D=E(d(z-y,2)+d(H-G,2));e=E(d(A-z,2)+d(a-H,2));f=F*D/(D+e);x=F-f;B=z+f*(y-A);C=H+f*(G-a);b=z-x*(y-A);c=H-x*(G-a);return[B,C,b,c]}var g=[];function i(a,d,f,q,e){var p=k.color.parse(e);p.a=typeof q=="number"?q:0.3;p.normalize();p=p.toString();d.beginPath();d.moveTo(a[0][0],a[0][1]);var c=a.length;for(var b=0;b<c;b++){d[a[b][3]].apply(d,a[b][2])}d.stroke();d.lineWidth=0;d.lineTo(a[c-1][0],f);d.lineTo(a[0][0],f);d.closePath();if(q!==false){d.fillStyle=p;d.fill()}}function h(d,b,c,a){if(b===void 0||(b!=="bezier"&&b!=="quadratic")){b="quadratic"}b=b+"CurveTo";if(g.length==0){g.push([c[0],c[1],a.concat(c.slice(2)),b])}else{if(b=="quadraticCurveTo"&&c.length==2){a=a.slice(0,2).concat(c);g.push([c[0],c[1],a,b])}else{g.push([c[2],c[3],a.concat(c.slice(2)),b])}}}function l(u,a,w){if(w.splines.show!==true){return}var t=[],d=w.splines.tension||0.5,c,e,f,b=w.datapoints.points,y=w.datapoints.pointsize,x=u.getPlotOffset(),v=b.length,z=[];g=[];if(v/y<4){k.extend(w.lines,w.splines);return}for(c=0;c<v;c+=y){e=b[c];f=b[c+1];if(e==null||e<w.xaxis.min||e>w.xaxis.max||f<w.yaxis.min||f>w.yaxis.max){continue}z.push(w.xaxis.p2c(e)+x.left,w.yaxis.p2c(f)+x.top)}v=z.length;for(c=0;c<v-2;c+=2){t=t.concat(j.apply(this,z.slice(c,c+6).concat([d])))}a.save();a.strokeStyle=w.color;a.lineWidth=w.splines.lineWidth;h(a,"quadratic",z.slice(0,4),t.slice(0,2));for(c=2;c<v-3;c+=2){h(a,"bezier",z.slice(c,c+4),t.slice(2*c-2,2*c+2))}h(a,"quadratic",z.slice(v-2,v),[t[2*v-10],t[2*v-9],z[v-4],z[v-3]]);i(g,a,u.height()+10,w.splines.fill,w.color);a.restore()}k.plot.plugins.push({init:function(a){a.hooks.drawSeries.push(l)},options:{series:{splines:{show:false,lineWidth:2,tension:0.5,fill:false}}},name:"spline",version:"0.8.2"})})(jQuery);