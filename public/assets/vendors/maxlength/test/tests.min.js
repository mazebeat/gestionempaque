$(function(){var a;module("maxlength",{setup:function(){a=$('<input type="text" maxlength="10" />').appendTo("#qunit-fixture");a.maxlength()},teardown:function(){$(".bootstrap-maxlength").remove();$("#qunit-fixture").empty()}});test("Maxlength is displayed correctly",function(){a.focus();ok($(".bootstrap-maxlength").length,"maxlength was inserted")});test("Maxlength is visible on focus",function(){a.focus();ok($(".bootstrap-maxlength").is(":visible"),"Maxlength is visible")});test("Maxlength is removed on blur",function(){a.maxlength().focus().blur();ok(!$(".bootstrap-maxlength").length,"Maxlength is removed on blur")});test("Maxlength updates the maxlength",function(){a.focus();a.blur().attr("maxlength","142").focus();ok($(".bootstrap-maxlength").html()==="0 / 142","Maxlength updated the field")});test("Removing an element with the maxlength removes the maxlength if any.",function(){a.maxlength().focus();a.remove();ok($(".bootstrap-maxlength").length===0,"Maxlength field removed with the input")});test("The focus event is triggered multiple times without a blur",function(){a.focus().focus().focus().focus();ok($(".bootstrap-maxlength").length===1,"Maxlength visualized only once after multiple focuses")});module("textarea",{setup:function(){a=$('<textarea maxlength="10"></textarea>').appendTo("#qunit-fixture");a.maxlength()},teardown:function(){$(".bootstrap-maxlength").remove();$("#qunit-fixture").empty()}});test("Newlines are not counted twice",function(){a.val("t\r\nt");a.maxlength();a.focus();ok($(".bootstrap-maxlength").html()==="3 / 10","Current length is: "+$(".bootstrap-maxlength").html()+". Expected 3 / 10.")})});