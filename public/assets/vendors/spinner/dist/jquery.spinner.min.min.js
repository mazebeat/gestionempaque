/*! jQuery spinner - v0.1.5 - 2014-01-29
* https://github.com/xixilive/jquery-spinner
* Copyright (c) 2014 xixilive; Licensed MIT */
(function(g){var e;var f=function(a,b){this.$el=a;this.options=g.extend({},f.rules.defaults,f.rules[b.rule]||{},b||{});this.min=parseFloat(this.options.min)||0;this.max=parseFloat(this.options.max)||0;this.$el.on("focus.spinner",g.proxy(function(c){c.preventDefault();g(document).trigger("mouseup.spinner");this.oldValue=this.value()},this)).on("change.spinner",g.proxy(function(c){c.preventDefault();this.value(this.$el.val())},this)).on("keydown.spinner",g.proxy(function(c){var d={38:"up",40:"down"}[c.which];if(d){c.preventDefault();this.spin(d)}},this));this.oldValue=this.value();this.value(this.$el.val());return this};f.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:null,step:0.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}};f.prototype={spin:function(a){if(this.$el.attr("disabled")==="disabled"){return}this.oldValue=this.value();switch(a){case"up":this.value(this.oldValue+Number(this.options.step,10));break;case"down":this.value(this.oldValue-Number(this.options.step,10));break}},value:function(b){if(b===null||b===undefined){return this.numeric(this.$el.val())}b=this.numeric(b);var a=this.validate(b);if(a!==0){b=(a===-1)?this.min:this.max}this.$el.val(b.toFixed(this.options.precision));if(this.oldValue!==this.value()){this.$el.trigger("changing.spinner",[this.value(),this.oldValue]);clearTimeout(e);e=setTimeout(g.proxy(function(){this.$el.trigger("changed.spinner",[this.value(),this.oldValue])},this),h.delay)}},numeric:function(a){a=this.options.precision>0?parseFloat(a,10):parseInt(a,10);return a||this.options.min||0},validate:function(a){if(this.options.min!==null&&a<this.min){return -1}if(this.options.max!==null&&a>this.max){return 1}return 0}};var h=function(a,b){this.$el=a;this.$spinning=g("[data-spin='spinner']",this.$el);if(this.$spinning.length===0){this.$spinning=g(":input[type='text']",this.$el)}this.spinning=new f(this.$spinning,this.$spinning.data());this.$el.on("click.spinner","[data-spin='up'],[data-spin='down']",g.proxy(this.spin,this)).on("mousedown.spinner","[data-spin='up'],[data-spin='down']",g.proxy(this.spin,this));g(document).on("mouseup.spinner",g.proxy(function(){clearTimeout(this.spinTimeout);clearInterval(this.spinInterval)},this));b=g.extend({},b);if(b.delay){this.delay(b.delay)}if(b.changed){this.changed(b.changed)}if(b.changing){this.changing(b.changing)}};h.delay=500;h.prototype={constructor:h,spin:function(a){var b=g(a.currentTarget).data("spin");switch(a.type){case"click":a.preventDefault();this.spinning.spin(b);break;case"mousedown":if(a.which===1){this.spinTimeout=setTimeout(g.proxy(this.beginSpin,this,b),300)}break}},delay:function(a){var b=parseInt(a,10);if(b>0){this.constructor.delay=b+100}},value:function(){return this.spinning.value()},changed:function(a){this.bindHandler("changed.spinner",a)},changing:function(a){this.bindHandler("changing.spinner",a)},bindHandler:function(b,a){if(g.isFunction(a)){this.$spinning.on(b,a)}else{this.$spinning.off(b)}},beginSpin:function(a){this.spinInterval=setInterval(g.proxy(this.spinning.spin,this.spinning,a),100)}};g.fn.spinner=function(b,a){return this.each(function(){var d=g(this),c=d.data("spinner");if(!c){d.data("spinner",(c=new h(d,g.extend({},d.data(),b))))}if(b==="delay"||b==="changed"||b==="changing"){c[b](a)}if(b==="spin"&&a){c.spinning.spin(a)}})};g(function(){g('[data-trigger="spinner"]').spinner()})})(jQuery);