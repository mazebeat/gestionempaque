describe("Mouse events feature",function(){var n,l,k,j,i,h,g,f,e,d,c,b,a,o,m;beforeEach(function(){loadFixtures("timepicker.html");n=$("#timepicker1");h=n.timepicker();c=h.data("timepicker");i=$("#timepicker5");d=n.timepicker({showWidgetOnAddonClick:false});m=d.data("timepicker");l=$("#timepicker2");g=l.timepicker({template:"modal",showSeconds:true,minuteStep:30,secondStep:30,defaultTime:false});b=g.data("timepicker");k=$("#timepicker3");f=k.timepicker({defaultTime:"23:15:20",showMeridian:false,showSeconds:true});a=f.data("timepicker");j=$("#timepicker4");e=j.timepicker({minuteStep:5,showInputs:false,showMeridian:true,template:"modal",disableFocus:true});o=e.data("timepicker")});afterEach(function(){n.data("timepicker").remove();l.data("timepicker").remove();k.data("timepicker").remove();j.data("timepicker").remove();n.remove();l.remove();k.remove();j.remove()});it("should be shown and trigger show events on input click",function(){var p=0;n.on("show.timepicker",function(){p++});n.parents("div").find(".add-on").trigger("click");expect(c.isOpen).toBe(true);expect(p).toBe(1)});it("should be hidden and trigger hide events on click outside of widget",function(){var q=0,p;c.setTime("11:30 AM");c.update();n.on("hide.timepicker",function(r){q++;p=r.time.value});n.parents("div").find(".add-on").trigger("click");expect(c.isOpen).toBe(true);$("body").trigger("mousedown");expect(c.isOpen).toBe(false,"widget is still open");expect(q).toBe(1,"hide event was not thrown once");expect(p).toBe("11:30 AM")});it("should not show widget when clicking add-on icon if showWidgetOnAddonClick is false",function(){expect(m.isOpen).toBe(false);i.parents("div").find(".add-on").trigger("click");expect(m.isOpen).toBe(false)});it("should increment hour on button click",function(){c.setTime("11:30 AM");c.update();var p=0;n.on("changeTime.timepicker",function(){p++});c.$widget.find('a[data-action="incrementHour"]').trigger("click");expect(c.getTime()).toBe("12:30 PM");expect(p).toBe(1);b.$widget.find('a[data-action="incrementHour"]').trigger("click");expect(b.getTime()).toBe("1:00:00 AM")});it("should decrement hour on button click and fire 1 changeTime event",function(){c.setTime("12:30 PM");c.update();var p=0;n.on("changeTime.timepicker",function(){p++});c.$widget.find('a[data-action="decrementHour"]').trigger("click");expect(c.getTime()).toBe("11:30 AM","meridian isnt toggling");expect(p).toBe(1);b.$widget.find('a[data-action="incrementHour"]').trigger("click");b.$widget.find('a[data-action="incrementHour"]').trigger("click");b.$widget.find('a[data-action="decrementHour"]').trigger("click");expect(b.getTime()).toBe("1:00:00 AM")});it("should increment minute on button click and fire 1 changeTime event",function(){c.setTime("11:30 AM");c.update();o.setTime("11:30 AM");o.update();var p=0;n.on("changeTime.timepicker",function(){p++});c.$widget.find('a[data-action="incrementMinute"]').trigger("click");expect(c.getTime()).toBe("11:45 AM");b.$widget.find('a[data-action="incrementMinute"]').trigger("click");expect(b.getTime()).toBe("0:30:00 AM");expect(p).toBe(1);j.trigger("click");o.$widget.find('a[data-action="incrementMinute"]').trigger("click");o.$widget.find('a[data-action="decrementHour"]').trigger("click");j.closest("modal").find(".btn-primary").trigger("click");expect(o.getTime()).toBe("10:35 AM");expect(j.val()).toBe("10:35 AM")});it("should decrement minute on button click",function(){c.setTime("12:30 PM");c.update();o.setTime("11:30 AM");o.update();c.$widget.find('a[data-action="decrementMinute"]').trigger("click");expect(c.getTime()).toBe("12:15 PM");o.$widget.find('a[data-action="decrementMinute"]').trigger("click");expect(o.getTime()).toBe("11:25 AM")});it("should go from 11:00 AM to 1:00 AM on 2 hour increments and fire 2 change time events",function(){c.setTime("11:00 AM");c.update();var p=0;n.on("changeTime.timepicker",function(){p++});c.$widget.find('a[data-action="incrementHour"]').trigger("click");c.$widget.find('a[data-action="incrementHour"]').trigger("click");expect(c.getTime()).toBe("1:00 PM");expect(p).toBe(2)});it("should go from 11:45 AM to 12:00 PM on 4 minute increments and fire 1 change time events",function(){c.setTime("11:45 AM");c.update();var p=0;n.on("changeTime.timepicker",function(){p++});c.$widget.find('a[data-action="incrementMinute"]').trigger("click");expect(c.getTime()).toBe("12:00 PM");expect(p).toBe(1)});it("should be 11:30:00 PM if minute is decremented on empty input",function(){b.$widget.find('a[data-action="decrementMinute"]').trigger("click");expect(b.getTime()).toBe("11:30:00 PM")});it("should increment second on button click",function(){b.setTime("11:30:15 AM");b.update();b.$widget.find('a[data-action="incrementSecond"]').trigger("click");expect(b.getTime()).toBe("11:30:30 AM")});it("should decrement second on button click",function(){b.setTime("12:30:15 PM");b.update();b.$widget.find('a[data-action="decrementSecond"]').trigger("click");expect(b.getTime()).toBe("12:29:45 PM")});it("should be 11:30:00 PM if minute is decremented on empty input",function(){b.$widget.find('a[data-action="decrementMinute"]').trigger("click");expect(b.getTime()).toBe("11:30:00 PM")});it("should increment second on button click",function(){b.setTime("11:30:15 AM");b.update();b.$widget.find('a[data-action="incrementSecond"]').trigger("click");expect(b.getTime()).toBe("11:30:30 AM")});it("should decrement second on button click",function(){b.setTime("12:30:15 PM");b.update();b.$widget.find('a[data-action="decrementSecond"]').trigger("click");expect(b.getTime()).toBe("12:29:45 PM")});it("should toggle meridian on button click",function(){c.setTime("12:30 PM");c.update();c.$widget.find('a[data-action="toggleMeridian"]').first().trigger("click");expect(c.getTime()).toBe("12:30 AM");c.$widget.find('a[data-action="toggleMeridian"]').last().trigger("click");expect(c.getTime()).toBe("12:30 PM")});it("should trigger changeTime event if time is changed",function(){var q=0,p;n.timepicker().on("changeTime.timepicker",function(r){q++;p=r.time.value});c.setTime("11:30 AM");expect(q).toBe(1);expect(p).toBe("11:30 AM");c.$widget.find('a[data-action="incrementHour"]').trigger("click");expect(q).toBe(2);expect(c.getTime()).toBe("12:30 PM");expect(p).toBe("12:30 PM");c.$widget.find('a[data-action="incrementMinute"]').trigger("click");expect(q).toBe(3);expect(c.getTime()).toBe("12:45 PM")});it("should highlight widget inputs on click",function(){})});