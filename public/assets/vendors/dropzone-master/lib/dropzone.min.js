(function(){var h,c,b,e,a,f,k,j,i={}.hasOwnProperty,d=function(o,m){for(var l in m){if(i.call(m,l)){o[l]=m[l]}}function n(){this.constructor=o}n.prototype=m.prototype;o.prototype=new n();o.__super__=m.prototype;return o},g=[].slice;c=typeof Emitter!=="undefined"&&Emitter!==null?Emitter:require("emitter");k=function(){};h=(function(m){var n;d(l,m);l.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"];l.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,dictRemoveFile:true,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(p,o){return o()},init:function(){return k},forceFallback:false,fallback:function(){var t,p,q,s,o,r;this.element.className=""+this.element.className+" dz-browser-not-supported";r=this.element.getElementsByTagName("div");for(s=0,o=r.length;s<o;s++){t=r[s];if(/(^| )dz-message($| )/.test(t.className)){p=t;t.className="dz-message";continue}}if(!p){p=l.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(p)}q=p.getElementsByTagName("span")[0];if(q){q.textContent=this.options.dictFallbackMessage}return this.element.appendChild(this.getFallbackForm())},resize:function(p){var r,q,o;r={srcX:0,srcY:0,srcWidth:p.width,srcHeight:p.height};q=p.width/p.height;r.optWidth=this.options.thumbnailWidth;r.optHeight=this.options.thumbnailHeight;if((r.optWidth==null)&&(r.optHeight==null)){r.optWidth=r.srcWidth;r.optHeight=r.srcHeight}else{if(r.optWidth==null){r.optWidth=q*r.optHeight}else{if(r.optHeight==null){r.optHeight=(1/q)*r.optWidth}}}o=r.optWidth/r.optHeight;if(p.height<r.optHeight||p.width<r.optWidth){r.trgHeight=r.srcHeight;r.trgWidth=r.srcWidth}else{if(q>o){r.srcHeight=p.height;r.srcWidth=r.srcHeight*o}else{r.srcWidth=p.width;r.srcHeight=r.srcWidth/o}}r.srcX=(p.width-r.srcWidth)/2;r.srcY=(p.height-r.srcHeight)/2;return r},drop:function(o){return this.element.classList.remove("dz-drag-hover")},dragstart:k,dragend:function(o){return this.element.classList.remove("dz-drag-hover")},dragenter:function(o){return this.element.classList.add("dz-drag-hover")},dragover:function(o){return this.element.classList.add("dz-drag-hover")},dragleave:function(o){return this.element.classList.remove("dz-drag-hover")},paste:k,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(r){var q,z,A,x,w,t,B,p,o,y,v,s,u;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){r.previewElement=l.createElement(this.options.previewTemplate.trim());r.previewTemplate=r.previewElement;this.previewsContainer.appendChild(r.previewElement);y=r.previewElement.querySelectorAll("[data-dz-name]");for(x=0,B=y.length;x<B;x++){q=y[x];q.textContent=r.name}v=r.previewElement.querySelectorAll("[data-dz-size]");for(w=0,p=v.length;w<p;w++){q=v[w];q.innerHTML=this.filesize(r.size)}if(this.options.addRemoveLinks){r._removeLink=l.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");r.previewElement.appendChild(r._removeLink)}z=(function(C){return function(D){D.preventDefault();D.stopPropagation();if(r.status===l.UPLOADING){return l.confirm(C.options.dictCancelUploadConfirmation,function(){return C.removeFile(r)})}else{if(C.options.dictRemoveFileConfirmation){return l.confirm(C.options.dictRemoveFileConfirmation,function(){return C.removeFile(r)})}else{return C.removeFile(r)}}}})(this);s=r.previewElement.querySelectorAll("[data-dz-remove]");u=[];for(t=0,o=s.length;t<o;t++){A=s[t];u.push(A.addEventListener("click",z))}return u}},removedfile:function(o){var p;if(o.previewElement){if((p=o.previewElement)!=null){p.parentNode.removeChild(o.previewElement)}}return this._updateMaxFilesReachedClass()},thumbnail:function(r,u){var q,t,p,s,o;if(r.previewElement){r.previewElement.classList.remove("dz-file-preview");r.previewElement.classList.add("dz-image-preview");s=r.previewElement.querySelectorAll("[data-dz-thumbnail]");o=[];for(t=0,p=s.length;t<p;t++){q=s[t];q.alt=r.name;o.push(q.src=u)}return o}},error:function(q,s){var r,u,p,t,o;if(q.previewElement){q.previewElement.classList.add("dz-error");if(typeof s!=="String"&&s.error){s=s.error}t=q.previewElement.querySelectorAll("[data-dz-errormessage]");o=[];for(u=0,p=t.length;u<p;u++){r=t[u];o.push(r.textContent=s)}return o}},errormultiple:k,processing:function(o){if(o.previewElement){o.previewElement.classList.add("dz-processing");if(o._removeLink){return o._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:k,uploadprogress:function(s,q,r){var t,v,p,u,o;if(s.previewElement){u=s.previewElement.querySelectorAll("[data-dz-uploadprogress]");o=[];for(v=0,p=u.length;v<p;v++){t=u[v];o.push(t.style.width=""+q+"%")}return o}},totaluploadprogress:k,sending:k,sendingmultiple:k,success:function(o){if(o.previewElement){return o.previewElement.classList.add("dz-success")}},successmultiple:k,canceled:function(o){return this.emit("error",o,"Upload canceled.")},canceledmultiple:k,complete:function(o){if(o._removeLink){return o._removeLink.textContent=this.options.dictRemoveFile}},completemultiple:k,maxfilesexceeded:k,maxfilesreached:k,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'};n=function(){var q,p,s,t,u,r,o;t=arguments[0],s=2<=arguments.length?g.call(arguments,1):[];for(r=0,o=s.length;r<o;r++){p=s[r];for(q in p){u=p[q];t[q]=u}}return t};function l(q,p){var o,s,r;this.element=q;this.version=l.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}l.instances.push(this);this.element.dropzone=this;o=(r=l.optionsForElement(this.element))!=null?r:{};this.options=n({},this.defaultOptions,o,p!=null?p:{});if(this.options.forceFallback||!l.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((s=this.getExistingFallback())&&s.parentNode){s.parentNode.removeChild(s)}if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=l.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=l.getElements(this.options.clickable,"clickable")}}this.init()}l.prototype.getAcceptedFiles=function(){var q,s,p,r,o;r=this.files;o=[];for(s=0,p=r.length;s<p;s++){q=r[s];if(q.accepted){o.push(q)}}return o};l.prototype.getRejectedFiles=function(){var q,s,p,r,o;r=this.files;o=[];for(s=0,p=r.length;s<p;s++){q=r[s];if(!q.accepted){o.push(q)}}return o};l.prototype.getFilesWithStatus=function(q){var r,t,p,s,o;s=this.files;o=[];for(t=0,p=s.length;t<p;t++){r=s[t];if(r.status===q){o.push(r)}}return o};l.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(l.QUEUED)};l.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(l.UPLOADING)};l.prototype.getActiveFiles=function(){var q,s,p,r,o;r=this.files;o=[];for(s=0,p=r.length;s<p;s++){q=r[s];if(q.status===l.UPLOADING||q.status===l.QUEUED){o.push(q)}}return o};l.prototype.init=function(){var q,u,t,s,p,r,o;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(l.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){t=(function(v){return function(){if(v.hiddenFileInput){document.body.removeChild(v.hiddenFileInput)}v.hiddenFileInput=document.createElement("input");v.hiddenFileInput.setAttribute("type","file");if((v.options.maxFiles==null)||v.options.maxFiles>1){v.hiddenFileInput.setAttribute("multiple","multiple")}v.hiddenFileInput.className="dz-hidden-input";if(v.options.acceptedFiles!=null){v.hiddenFileInput.setAttribute("accept",v.options.acceptedFiles)}v.hiddenFileInput.style.visibility="hidden";v.hiddenFileInput.style.position="absolute";v.hiddenFileInput.style.top="0";v.hiddenFileInput.style.left="0";v.hiddenFileInput.style.height="0";v.hiddenFileInput.style.width="0";document.body.appendChild(v.hiddenFileInput);return v.hiddenFileInput.addEventListener("change",function(){var x,y,z,w;y=v.hiddenFileInput.files;if(y.length){for(z=0,w=y.length;z<w;z++){x=y[z];v.addFile(x)}}return t()})}})(this);t()}this.URL=(r=window.URL)!=null?r:window.webkitURL;o=this.events;for(s=0,p=o.length;s<p;s++){q=o[s];this.on(q,this.options[q])}this.on("uploadprogress",(function(v){return function(){return v.updateTotalUploadProgress()}})(this));this.on("removedfile",(function(v){return function(){return v.updateTotalUploadProgress()}})(this));this.on("canceled",(function(v){return function(w){return v.emit("complete",w)}})(this));this.on("complete",(function(v){return function(w){if(v.getUploadingFiles().length===0&&v.getQueuedFiles().length===0){return setTimeout((function(){return v.emit("queuecomplete")}),0)}}})(this));u=function(v){v.stopPropagation();if(v.preventDefault){return v.preventDefault()}else{return v.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:(function(v){return function(w){return v.emit("dragstart",w)}})(this),dragenter:(function(v){return function(w){u(w);return v.emit("dragenter",w)}})(this),dragover:(function(v){return function(x){var w;try{w=x.dataTransfer.effectAllowed}catch(y){}x.dataTransfer.dropEffect="move"===w||"linkMove"===w?"move":"copy";u(x);return v.emit("dragover",x)}})(this),dragleave:(function(v){return function(w){return v.emit("dragleave",w)}})(this),drop:(function(v){return function(w){u(w);return v.drop(w)}})(this),dragend:(function(v){return function(w){return v.emit("dragend",w)}})(this)}}];this.clickableElements.forEach((function(v){return function(w){return v.listeners.push({element:w,events:{click:function(x){if((w!==v.element)||(x.target===v.element||l.elementInside(x.target,v.element.querySelector(".dz-message")))){return v.hiddenFileInput.click()}}}})}})(this));this.enable();return this.options.init.call(this)};l.prototype.destroy=function(){var o;this.disable();this.removeAllFiles(true);if((o=this.hiddenFileInput)!=null?o.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return l.instances.splice(l.instances.indexOf(this),1)};l.prototype.updateTotalUploadProgress=function(){var q,r,v,o,u,t,p,s;o=0;v=0;q=this.getActiveFiles();if(q.length){s=this.getActiveFiles();for(t=0,p=s.length;t<p;t++){r=s[t];o+=r.upload.bytesSent;v+=r.upload.total}u=100*o/v}else{u=100}return this.emit("totaluploadprogress",u,v,o)};l.prototype._getParamName=function(o){if(typeof this.options.paramName==="function"){return this.options.paramName(o)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+o+"]":"")}};l.prototype.getFallbackForm=function(){var p,o,r,q;if(p=this.getExistingFallback()){return p}r='<div class="dz-fallback">';if(this.options.dictFallbackText){r+="<p>"+this.options.dictFallbackText+"</p>"}r+='<input type="file" name="'+(this._getParamName(0))+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';o=l.createElement(r);if(this.element.tagName!=="FORM"){q=l.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');q.appendChild(o)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return q!=null?q:o};l.prototype.getExistingFallback=function(){var t,q,p,s,o,r;q=function(x){var v,w,u;for(w=0,u=x.length;w<u;w++){v=x[w];if(/(^| )fallback($| )/.test(v.className)){return v}}};r=["div","form"];for(s=0,o=r.length;s<o;s++){p=r[s];if(t=q(this.element.getElementsByTagName(p))){return t}}};l.prototype.setupEventListeners=function(){var r,q,u,t,p,s,o;s=this.listeners;o=[];for(t=0,p=s.length;t<p;t++){r=s[t];o.push((function(){var v,w;v=r.events;w=[];for(q in v){u=v[q];w.push(r.element.addEventListener(q,u,false))}return w})())}return o};l.prototype.removeEventListeners=function(){var r,q,u,t,p,s,o;s=this.listeners;o=[];for(t=0,p=s.length;t<p;t++){r=s[t];o.push((function(){var v,w;v=r.events;w=[];for(q in v){u=v[q];w.push(r.element.removeEventListener(q,u,false))}return w})())}return o};l.prototype.disable=function(){var q,s,p,r,o;this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")});this.removeEventListeners();r=this.files;o=[];for(s=0,p=r.length;s<p;s++){q=r[s];o.push(this.cancelUpload(q))}return o};l.prototype.enable=function(){this.clickableElements.forEach(function(o){return o.classList.add("dz-clickable")});return this.setupEventListeners()};l.prototype.filesize=function(p){var o;if(p>=1024*1024*1024*1024/10){p=p/(1024*1024*1024*1024/10);o="TiB"}else{if(p>=1024*1024*1024/10){p=p/(1024*1024*1024/10);o="GiB"}else{if(p>=1024*1024/10){p=p/(1024*1024/10);o="MiB"}else{if(p>=1024/10){p=p/(1024/10);o="KiB"}else{p=p*10;o="b"}}}}return"<strong>"+(Math.round(p)/10)+"</strong> "+o};l.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};l.prototype.drop=function(q){var p,o;if(!q.dataTransfer){return}this.emit("drop",q);p=q.dataTransfer.files;if(p.length){o=q.dataTransfer.items;if(o&&o.length&&(o[0].webkitGetAsEntry!=null)){this._addFilesFromItems(o)}else{this.handleFiles(p)}}};l.prototype.paste=function(q){var o,p;if((q!=null?(p=q.clipboardData)!=null?p.items:void 0:void 0)==null){return}this.emit("paste",q);o=q.clipboardData.items;if(o.length){return this._addFilesFromItems(o)}};l.prototype.handleFiles=function(r){var q,s,p,o;o=[];for(s=0,p=r.length;s<p;s++){q=r[s];o.push(this.addFile(q))}return o};l.prototype._addFilesFromItems=function(q){var s,r,t,p,o;o=[];for(t=0,p=q.length;t<p;t++){r=q[t];if((r.webkitGetAsEntry!=null)&&(s=r.webkitGetAsEntry())){if(s.isFile){o.push(this.addFile(r.getAsFile()))}else{if(s.isDirectory){o.push(this._addFilesFromDirectory(s,s.name))}else{o.push(void 0)}}}else{if(r.getAsFile!=null){if((r.kind==null)||r.kind==="file"){o.push(this.addFile(r.getAsFile()))}else{o.push(void 0)}}else{o.push(void 0)}}}return o};l.prototype._addFilesFromDirectory=function(o,q){var p,r;p=o.createReader();r=(function(s){return function(t){var v,w,u;for(w=0,u=t.length;w<u;w++){v=t[w];if(v.isFile){v.file(function(x){if(s.options.ignoreHiddenFiles&&x.name.substring(0,1)==="."){return}x.fullPath=""+q+"/"+x.name;return s.addFile(x)})}else{if(v.isDirectory){s._addFilesFromDirectory(v,""+q+"/"+v.name)}}}}})(this);return p.readEntries(r,function(s){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(s):void 0:void 0})};l.prototype.accept=function(p,o){if(p.size>this.options.maxFilesize*1024*1024){return o(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(p.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!l.isValidFile(p,this.options.acceptedFiles)){return o(this.options.dictInvalidFileType)}else{if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){o(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",p)}else{return this.options.accept.call(this,p,o)}}}};l.prototype.addFile=function(o){o.upload={progress:0,total:o.size,bytesSent:0};this.files.push(o);o.status=l.ADDED;this.emit("addedfile",o);this._enqueueThumbnail(o);return this.accept(o,(function(p){return function(q){if(q){o.accepted=false;p._errorProcessing([o],q)}else{o.accepted=true;if(p.options.autoQueue){p.enqueueFile(o)}}return p._updateMaxFilesReachedClass()}})(this))};l.prototype.enqueueFiles=function(q){var p,r,o;for(r=0,o=q.length;r<o;r++){p=q[r];this.enqueueFile(p)}return null};l.prototype.enqueueFile=function(o){if(o.status===l.ADDED&&o.accepted===true){o.status=l.QUEUED;if(this.options.autoProcessQueue){return setTimeout(((function(p){return function(){return p.processQueue()}})(this)),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};l.prototype._thumbnailQueue=[];l.prototype._processingThumbnail=false;l.prototype._enqueueThumbnail=function(o){if(this.options.createImageThumbnails&&o.type.match(/image.*/)&&o.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(o);return setTimeout(((function(p){return function(){return p._processThumbnailQueue()}})(this)),0)}};l.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),(function(o){return function(){o._processingThumbnail=false;return o._processThumbnailQueue()}})(this))};l.prototype.removeFile=function(o){if(o.status===l.UPLOADING){this.cancelUpload(o)}this.files=j(this.files,o);this.emit("removedfile",o);if(this.files.length===0){return this.emit("reset")}};l.prototype.removeAllFiles=function(s){var p,r,o,q;if(s==null){s=false}q=this.files.slice();for(r=0,o=q.length;r<o;r++){p=q[r];if(p.status!==l.UPLOADING||s){this.removeFile(p)}}return null};l.prototype.createThumbnail=function(p,q){var o;o=new FileReader;o.onload=(function(r){return function(){var s;s=document.createElement("img");s.onload=function(){var v,u,y,A,w,t,z,x;p.width=s.width;p.height=s.height;y=r.options.resize.call(r,p);if(y.trgWidth==null){y.trgWidth=y.optWidth}if(y.trgHeight==null){y.trgHeight=y.optHeight}v=document.createElement("canvas");u=v.getContext("2d");v.width=y.trgWidth;v.height=y.trgHeight;f(u,s,(w=y.srcX)!=null?w:0,(t=y.srcY)!=null?t:0,y.srcWidth,y.srcHeight,(z=y.trgX)!=null?z:0,(x=y.trgY)!=null?x:0,y.trgWidth,y.trgHeight);A=v.toDataURL("image/png");r.emit("thumbnail",p,A);if(q!=null){return q()}};return s.src=o.result}})(this);return o.readAsDataURL(p)};l.prototype.processQueue=function(){var p,r,o,q;r=this.options.parallelUploads;o=this.getUploadingFiles().length;p=o;if(o>=r){return}q=this.getQueuedFiles();if(!(q.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(q.slice(0,r-o))}else{while(p<r){if(!q.length){return}this.processFile(q.shift());p++}}};l.prototype.processFile=function(o){return this.processFiles([o])};l.prototype.processFiles=function(q){var p,r,o;for(r=0,o=q.length;r<o;r++){p=q[r];p.processing=true;p.status=l.UPLOADING;this.emit("processing",p)}if(this.options.uploadMultiple){this.emit("processingmultiple",q)}return this.uploadFiles(q)};l.prototype._getFilesWithXhr=function(q){var o,p;return p=(function(){var u,s,t,r;t=this.files;r=[];for(u=0,s=t.length;u<s;u++){o=t[u];if(o.xhr===q){r.push(o)}}return r}).call(this)};l.prototype.cancelUpload=function(s){var q,r,v,t,p,o,u;if(s.status===l.UPLOADING){r=this._getFilesWithXhr(s.xhr);for(v=0,p=r.length;v<p;v++){q=r[v];q.status=l.CANCELED}s.xhr.abort();for(t=0,o=r.length;t<o;t++){q=r[t];this.emit("canceled",q)}if(this.options.uploadMultiple){this.emit("canceledmultiple",r)}}else{if((u=s.status)===l.ADDED||u===l.QUEUED){s.status=l.CANCELED;this.emit("canceled",s);if(this.options.uploadMultiple){this.emit("canceledmultiple",[s])}}}if(this.options.autoProcessQueue){return this.processQueue()}};l.prototype.uploadFile=function(o){return this.uploadFiles([o])};l.prototype.uploadFiles=function(A){var P,N,F,K,C,x,O,I,E,L,U,J,B,q,G,M,D,w,u,s,p,R,T,S,Q,o,H,z,y,v,t,r;D=new XMLHttpRequest();for(w=0,R=A.length;w<R;w++){P=A[w];P.xhr=D}D.open(this.options.method,this.options.url,true);D.withCredentials=!!this.options.withCredentials;q=null;F=(function(V){return function(){var Y,X,W;W=[];for(Y=0,X=A.length;Y<X;Y++){P=A[Y];W.push(V._errorProcessing(A,q||V.options.dictResponseError.replace("{{statusCode}}",D.status),D))}return W}})(this);G=(function(V){return function(af){var aa,X,ae,ac,ab,Z,Y,W,ad;if(af!=null){X=100*af.loaded/af.total;for(ae=0,Z=A.length;ae<Z;ae++){P=A[ae];P.upload={progress:X,total:af.total,bytesSent:af.loaded}}}else{aa=true;X=100;for(ac=0,Y=A.length;ac<Y;ac++){P=A[ac];if(!(P.upload.progress===100&&P.upload.bytesSent===P.upload.total)){aa=false}P.upload.progress=X;P.upload.bytesSent=P.upload.total}if(aa){return}}ad=[];for(ab=0,W=A.length;ab<W;ab++){P=A[ab];ad.push(V.emit("uploadprogress",P,X,P.upload.bytesSent))}return ad}})(this);D.onload=(function(V){return function(X){var W;if(A[0].status===l.CANCELED){return}if(D.readyState!==4){return}q=D.responseText;if(D.getResponseHeader("content-type")&&~D.getResponseHeader("content-type").indexOf("application/json")){try{q=JSON.parse(q)}catch(Y){X=Y;q="Invalid JSON response from server."}}G();if(!((200<=(W=D.status)&&W<300))){return F()}else{return V._finished(A,q,X)}}})(this);D.onerror=(function(V){return function(){if(A[0].status===l.CANCELED){return}return F()}})(this);B=(H=D.upload)!=null?H:D;B.onprogress=G;x={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){n(x,this.options.headers)}for(K in x){C=x[K];D.setRequestHeader(K,C)}N=new FormData();if(this.options.params){z=this.options.params;for(U in z){M=z[U];N.append(U,M)}}for(u=0,T=A.length;u<T;u++){P=A[u];this.emit("sending",P,D,N)}if(this.options.uploadMultiple){this.emit("sendingmultiple",A,D,N)}if(this.element.tagName==="FORM"){y=this.element.querySelectorAll("input, textarea, select, button");for(s=0,S=y.length;s<S;s++){I=y[s];E=I.getAttribute("name");L=I.getAttribute("type");if(I.tagName==="SELECT"&&I.hasAttribute("multiple")){v=I.options;for(p=0,Q=v.length;p<Q;p++){J=v[p];if(J.selected){N.append(E,J.value)}}}else{if(!L||((t=L.toLowerCase())!=="checkbox"&&t!=="radio")||I.checked){N.append(E,I.value)}}}}for(O=o=0,r=A.length-1;0<=r?o<=r:o>=r;O=0<=r?++o:--o){N.append(this._getParamName(O),A[O],A[O].name)}return D.send(N)};l.prototype._finished=function(q,s,t){var p,r,o;for(r=0,o=q.length;r<o;r++){p=q[r];p.status=l.SUCCESS;this.emit("success",p,s,t);this.emit("complete",p)}if(this.options.uploadMultiple){this.emit("successmultiple",q,s,t);this.emit("completemultiple",q)}if(this.options.autoProcessQueue){return this.processQueue()}};l.prototype._errorProcessing=function(r,q,t){var p,s,o;for(s=0,o=r.length;s<o;s++){p=r[s];p.status=l.ERROR;this.emit("error",p,q,t);this.emit("complete",p)}if(this.options.uploadMultiple){this.emit("errormultiple",r,q,t);this.emit("completemultiple",r)}if(this.options.autoProcessQueue){return this.processQueue()}};return l})(c);h.version="3.10.2";h.options={};h.optionsForElement=function(l){if(l.getAttribute("id")){return h.options[b(l.getAttribute("id"))]}else{return void 0}};h.instances=[];h.forElement=function(l){if(typeof l==="string"){l=document.querySelector(l)}if((l!=null?l.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return l.dropzone};h.autoDiscover=true;h.discover=function(){var q,n,o,p,m,l;if(document.querySelectorAll){o=document.querySelectorAll(".dropzone")}else{o=[];q=function(v){var t,u,s,r;r=[];for(u=0,s=v.length;u<s;u++){t=v[u];if(/(^| )dropzone($| )/.test(t.className)){r.push(o.push(t))}else{r.push(void 0)}}return r};q(document.getElementsByTagName("div"));q(document.getElementsByTagName("form"))}l=[];for(p=0,m=o.length;p<m;p++){n=o[p];if(h.optionsForElement(n)!==false){l.push(new h(n))}else{l.push(void 0)}}return l};h.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];h.isBrowserSupported=function(){var m,n,p,l,o;m=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){m=false}else{o=h.blacklistedBrowsers;for(p=0,l=o.length;p<l;p++){n=o[p];if(n.test(navigator.userAgent)){m=false;continue}}}}else{m=false}return m};j=function(q,n){var o,p,m,l;l=[];for(p=0,m=q.length;p<m;p++){o=q[p];if(o!==n){l.push(o)}}return l};b=function(l){return l.replace(/[\-_](\w)/g,function(m){return m.charAt(1).toUpperCase()})};h.createElement=function(l){var m;m=document.createElement("div");m.innerHTML=l;return m.childNodes[0]};h.elementInside=function(m,l){if(m===l){return true}while(m=m.parentNode){if(m===l){return true}}return false};h.getElement=function(n,l){var m;if(typeof n==="string"){m=document.querySelector(n)}else{if(n.nodeType!=null){m=n}}if(m==null){throw new Error("Invalid `"+l+"` option provided. Please provide a CSS selector or a plain HTML element.")}return m};h.getElements=function(r,m){var t,o,l,q,p,u,n,s;if(r instanceof Array){l=[];try{for(q=0,u=r.length;q<u;q++){o=r[q];l.push(this.getElement(o,m))}}catch(v){t=v;l=null}}else{if(typeof r==="string"){l=[];s=document.querySelectorAll(r);for(p=0,n=s.length;p<n;p++){o=s[p];l.push(o)}}else{if(r.nodeType!=null){l=[r]}}}if(!((l!=null)&&l.length)){throw new Error("Invalid `"+m+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return l};h.confirm=function(l,n,m){if(window.confirm(l)){return n()}else{if(m!=null){return m()}}};h.isValidFile=function(o,l){var n,r,p,q,m;if(!l){return true}l=l.split(",");r=o.type;n=r.replace(/\/.*$/,"");for(q=0,m=l.length;q<m;q++){p=l[q];p=p.trim();if(p.charAt(0)==="."){if(o.name.toLowerCase().indexOf(p.toLowerCase(),o.name.length-p.length)!==-1){return true}}else{if(/\/\*$/.test(p)){if(n===p.replace(/\/.*$/,"")){return true}}else{if(r===p){return true}}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(l){return this.each(function(){return new h(this,l)})}}if(typeof module!=="undefined"&&module!==null){module.exports=h}else{window.Dropzone=h}h.ADDED="added";h.QUEUED="queued";h.ACCEPTED=h.QUEUED;h.UPLOADING="uploading";h.PROCESSING=h.UPLOADING;h.CANCELED="canceled";h.ERROR="error";h.SUCCESS="success";a=function(p){var n,l,v,o,q,u,m,t,r,s;m=p.naturalWidth;u=p.naturalHeight;l=document.createElement("canvas");l.width=1;l.height=u;v=l.getContext("2d");v.drawImage(p,0,0);o=v.getImageData(0,0,1,u).data;s=0;q=u;t=u;while(t>s){n=o[(t-1)*4+3];if(n===0){q=t}else{s=t}t=(q+s)>>1}r=t/u;if(r===0){return 1}else{return r}};f=function(t,m,r,q,s,n,v,u,l,p){var o;o=a(m);return t.drawImage(m,r,q,s,n,v,u,l,p/o)};e=function(n,r){var w,s,m,v,o,l,u,q,p;m=false;p=true;s=n.document;q=s.documentElement;w=(s.addEventListener?"addEventListener":"attachEvent");u=(s.addEventListener?"removeEventListener":"detachEvent");l=(s.addEventListener?"":"on");v=function(x){if(x.type==="readystatechange"&&s.readyState!=="complete"){return}(x.type==="load"?n:s)[u](l+x.type,v,false);if(!m&&(m=true)){return r.call(n,x.type||x)}};o=function(){var x;try{q.doScroll("left")}catch(y){x=y;setTimeout(o,50);return}return v("poll")};if(s.readyState!=="complete"){if(s.createEventObject&&q.doScroll){try{p=!n.frameElement}catch(t){}if(p){o()}}s[w](l+"DOMContentLoaded",v,false);s[w](l+"readystatechange",v,false);return n[w](l+"load",v,false)}};h._autoDiscoverFunction=function(){if(h.autoDiscover){return h.discover()}};e(window,h._autoDiscoverFunction)}).call(this);