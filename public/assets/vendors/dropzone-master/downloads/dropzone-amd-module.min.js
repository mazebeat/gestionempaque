(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(d){var b={exports:{}};b.exports=c;function c(e){if(e){return a(e)}}function a(f){for(var e in c.prototype){f[e]=c.prototype[e]}return f}c.prototype.on=c.prototype.addEventListener=function(f,e){this._callbacks=this._callbacks||{};(this._callbacks[f]=this._callbacks[f]||[]).push(e);return this};c.prototype.once=function(h,g){var f=this;this._callbacks=this._callbacks||{};function e(){f.off(h,e);g.apply(this,arguments)}e.fn=g;this.on(h,e);return this};c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(j,g){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var h=this._callbacks[j];if(!h){return this}if(1==arguments.length){delete this._callbacks[j];return this}var e;for(var f=0;f<h.length;f++){e=h[f];if(e===g||e.fn===g){h.splice(f,1);break}}return this};c.prototype.emit=function(j){this._callbacks=this._callbacks||{};var f=[].slice.call(arguments,1),h=this._callbacks[j];if(h){h=h.slice(0);for(var g=0,e=h.length;g<e;++g){h[g].apply(this,f)}}return this};c.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks[e]||[]};c.prototype.hasListeners=function(e){return !!this.listeners(e).length};(function(){var l,g,f,i,e,j,o,n,m={}.hasOwnProperty,h=function(s,q){for(var p in q){if(m.call(q,p)){s[p]=q[p]}}function r(){this.constructor=s}r.prototype=q.prototype;s.prototype=new r();s.__super__=q.prototype;return s},k=[].slice;g=typeof c!=="undefined"&&c!==null?c:require("emitter");o=function(){};l=(function(q){var r;h(p,q);p.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"];p.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,s){return s()},init:function(){return o},forceFallback:false,fallback:function(){var x,t,u,w,s,v;this.element.className=""+this.element.className+" dz-browser-not-supported";v=this.element.getElementsByTagName("div");for(w=0,s=v.length;w<s;w++){x=v[w];if(/(^| )dz-message($| )/.test(x.className)){t=x;x.className="dz-message";continue}}if(!t){t=p.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(t)}u=t.getElementsByTagName("span")[0];if(u){u.textContent=this.options.dictFallbackMessage}return this.element.appendChild(this.getFallbackForm())},resize:function(t){var v,u,s;v={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height};u=t.width/t.height;v.optWidth=this.options.thumbnailWidth;v.optHeight=this.options.thumbnailHeight;if((v.optWidth==null)&&(v.optHeight==null)){v.optWidth=v.srcWidth;v.optHeight=v.srcHeight}else{if(v.optWidth==null){v.optWidth=u*v.optHeight}else{if(v.optHeight==null){v.optHeight=(1/u)*v.optWidth}}}s=v.optWidth/v.optHeight;if(t.height<v.optHeight||t.width<v.optWidth){v.trgHeight=v.srcHeight;v.trgWidth=v.srcWidth}else{if(u>s){v.srcHeight=t.height;v.srcWidth=v.srcHeight*s}else{v.srcWidth=t.width;v.srcHeight=v.srcWidth/s}}v.srcX=(t.width-v.srcWidth)/2;v.srcY=(t.height-v.srcHeight)/2;return v},drop:function(s){return this.element.classList.remove("dz-drag-hover")},dragstart:o,dragend:function(s){return this.element.classList.remove("dz-drag-hover")},dragenter:function(s){return this.element.classList.add("dz-drag-hover")},dragover:function(s){return this.element.classList.add("dz-drag-hover")},dragleave:function(s){return this.element.classList.remove("dz-drag-hover")},paste:o,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(v){var u,D,E,B,A,x,F,t,s,C,z,w,y;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){v.previewElement=p.createElement(this.options.previewTemplate.trim());v.previewTemplate=v.previewElement;this.previewsContainer.appendChild(v.previewElement);C=v.previewElement.querySelectorAll("[data-dz-name]");for(B=0,F=C.length;B<F;B++){u=C[B];u.textContent=v.name}z=v.previewElement.querySelectorAll("[data-dz-size]");for(A=0,t=z.length;A<t;A++){u=z[A];u.innerHTML=this.filesize(v.size)}if(this.options.addRemoveLinks){v._removeLink=p.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");v.previewElement.appendChild(v._removeLink)}D=(function(G){return function(H){H.preventDefault();H.stopPropagation();if(v.status===p.UPLOADING){return p.confirm(G.options.dictCancelUploadConfirmation,function(){return G.removeFile(v)})}else{if(G.options.dictRemoveFileConfirmation){return p.confirm(G.options.dictRemoveFileConfirmation,function(){return G.removeFile(v)})}else{return G.removeFile(v)}}}})(this);w=v.previewElement.querySelectorAll("[data-dz-remove]");y=[];for(x=0,s=w.length;x<s;x++){E=w[x];y.push(E.addEventListener("click",D))}return y}},removedfile:function(s){var t;if(s.previewElement){if((t=s.previewElement)!=null){t.parentNode.removeChild(s.previewElement)}}return this._updateMaxFilesReachedClass()},thumbnail:function(v,y){var u,x,t,w,s;if(v.previewElement){v.previewElement.classList.remove("dz-file-preview");v.previewElement.classList.add("dz-image-preview");w=v.previewElement.querySelectorAll("[data-dz-thumbnail]");s=[];for(x=0,t=w.length;x<t;x++){u=w[x];u.alt=v.name;s.push(u.src=y)}return s}},error:function(u,w){var v,y,t,x,s;if(u.previewElement){u.previewElement.classList.add("dz-error");if(typeof w!=="String"&&w.error){w=w.error}x=u.previewElement.querySelectorAll("[data-dz-errormessage]");s=[];for(y=0,t=x.length;y<t;y++){v=x[y];s.push(v.textContent=w)}return s}},errormultiple:o,processing:function(s){if(s.previewElement){s.previewElement.classList.add("dz-processing");if(s._removeLink){return s._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:o,uploadprogress:function(w,u,v){var x,z,t,y,s;if(w.previewElement){y=w.previewElement.querySelectorAll("[data-dz-uploadprogress]");s=[];for(z=0,t=y.length;z<t;z++){x=y[z];s.push(x.style.width=""+u+"%")}return s}},totaluploadprogress:o,sending:o,sendingmultiple:o,success:function(s){if(s.previewElement){return s.previewElement.classList.add("dz-success")}},successmultiple:o,canceled:function(s){return this.emit("error",s,"Upload canceled.")},canceledmultiple:o,complete:function(s){if(s._removeLink){return s._removeLink.textContent=this.options.dictRemoveFile}},completemultiple:o,maxfilesexceeded:o,maxfilesreached:o,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'};r=function(){var u,t,w,x,y,v,s;x=arguments[0],w=2<=arguments.length?k.call(arguments,1):[];for(v=0,s=w.length;v<s;v++){t=w[v];for(u in t){y=t[u];x[u]=y}}return x};function p(u,t){var s,w,v;this.element=u;this.version=p.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}p.instances.push(this);this.element.dropzone=this;s=(v=p.optionsForElement(this.element))!=null?v:{};this.options=r({},this.defaultOptions,s,t!=null?t:{});if(this.options.forceFallback||!p.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((w=this.getExistingFallback())&&w.parentNode){w.parentNode.removeChild(w)}if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=p.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=p.getElements(this.options.clickable,"clickable")}}this.init()}p.prototype.getAcceptedFiles=function(){var u,w,t,v,s;v=this.files;s=[];for(w=0,t=v.length;w<t;w++){u=v[w];if(u.accepted){s.push(u)}}return s};p.prototype.getRejectedFiles=function(){var u,w,t,v,s;v=this.files;s=[];for(w=0,t=v.length;w<t;w++){u=v[w];if(!u.accepted){s.push(u)}}return s};p.prototype.getFilesWithStatus=function(u){var v,x,t,w,s;w=this.files;s=[];for(x=0,t=w.length;x<t;x++){v=w[x];if(v.status===u){s.push(v)}}return s};p.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(p.QUEUED)};p.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(p.UPLOADING)};p.prototype.getActiveFiles=function(){var u,w,t,v,s;v=this.files;s=[];for(w=0,t=v.length;w<t;w++){u=v[w];if(u.status===p.UPLOADING||u.status===p.QUEUED){s.push(u)}}return s};p.prototype.init=function(){var u,y,x,w,t,v,s;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(p.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){x=(function(z){return function(){if(z.hiddenFileInput){document.body.removeChild(z.hiddenFileInput)}z.hiddenFileInput=document.createElement("input");z.hiddenFileInput.setAttribute("type","file");if((z.options.maxFiles==null)||z.options.maxFiles>1){z.hiddenFileInput.setAttribute("multiple","multiple")}z.hiddenFileInput.className="dz-hidden-input";if(z.options.acceptedFiles!=null){z.hiddenFileInput.setAttribute("accept",z.options.acceptedFiles)}z.hiddenFileInput.style.visibility="hidden";z.hiddenFileInput.style.position="absolute";z.hiddenFileInput.style.top="0";z.hiddenFileInput.style.left="0";z.hiddenFileInput.style.height="0";z.hiddenFileInput.style.width="0";document.body.appendChild(z.hiddenFileInput);return z.hiddenFileInput.addEventListener("change",function(){var B,C,D,A;C=z.hiddenFileInput.files;if(C.length){for(D=0,A=C.length;D<A;D++){B=C[D];z.addFile(B)}}return x()})}})(this);x()}this.URL=(v=window.URL)!=null?v:window.webkitURL;s=this.events;for(w=0,t=s.length;w<t;w++){u=s[w];this.on(u,this.options[u])}this.on("uploadprogress",(function(z){return function(){return z.updateTotalUploadProgress()}})(this));this.on("removedfile",(function(z){return function(){return z.updateTotalUploadProgress()}})(this));this.on("canceled",(function(z){return function(A){return z.emit("complete",A)}})(this));this.on("complete",(function(z){return function(A){if(z.getUploadingFiles().length===0&&z.getQueuedFiles().length===0){return setTimeout((function(){return z.emit("queuecomplete")}),0)}}})(this));y=function(z){z.stopPropagation();if(z.preventDefault){return z.preventDefault()}else{return z.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:(function(z){return function(A){return z.emit("dragstart",A)}})(this),dragenter:(function(z){return function(A){y(A);return z.emit("dragenter",A)}})(this),dragover:(function(z){return function(B){var A;try{A=B.dataTransfer.effectAllowed}catch(C){}B.dataTransfer.dropEffect="move"===A||"linkMove"===A?"move":"copy";y(B);return z.emit("dragover",B)}})(this),dragleave:(function(z){return function(A){return z.emit("dragleave",A)}})(this),drop:(function(z){return function(A){y(A);return z.drop(A)}})(this),dragend:(function(z){return function(A){return z.emit("dragend",A)}})(this)}}];this.clickableElements.forEach((function(z){return function(A){return z.listeners.push({element:A,events:{click:function(B){if((A!==z.element)||(B.target===z.element||p.elementInside(B.target,z.element.querySelector(".dz-message")))){return z.hiddenFileInput.click()}}}})}})(this));this.enable();return this.options.init.call(this)};p.prototype.destroy=function(){var s;this.disable();this.removeAllFiles(true);if((s=this.hiddenFileInput)!=null?s.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return p.instances.splice(p.instances.indexOf(this),1)};p.prototype.updateTotalUploadProgress=function(){var u,v,z,s,y,x,t,w;s=0;z=0;u=this.getActiveFiles();if(u.length){w=this.getActiveFiles();for(x=0,t=w.length;x<t;x++){v=w[x];s+=v.upload.bytesSent;z+=v.upload.total}y=100*s/z}else{y=100}return this.emit("totaluploadprogress",y,z,s)};p.prototype._getParamName=function(s){if(typeof this.options.paramName==="function"){return this.options.paramName(s)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+s+"]":"")}};p.prototype.getFallbackForm=function(){var t,s,v,u;if(t=this.getExistingFallback()){return t}v='<div class="dz-fallback">';if(this.options.dictFallbackText){v+="<p>"+this.options.dictFallbackText+"</p>"}v+='<input type="file" name="'+(this._getParamName(0))+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';s=p.createElement(v);if(this.element.tagName!=="FORM"){u=p.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');u.appendChild(s)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return u!=null?u:s};p.prototype.getExistingFallback=function(){var x,u,t,w,s,v;u=function(B){var z,A,y;for(A=0,y=B.length;A<y;A++){z=B[A];if(/(^| )fallback($| )/.test(z.className)){return z}}};v=["div","form"];for(w=0,s=v.length;w<s;w++){t=v[w];if(x=u(this.element.getElementsByTagName(t))){return x}}};p.prototype.setupEventListeners=function(){var v,u,y,x,t,w,s;w=this.listeners;s=[];for(x=0,t=w.length;x<t;x++){v=w[x];s.push((function(){var z,A;z=v.events;A=[];for(u in z){y=z[u];A.push(v.element.addEventListener(u,y,false))}return A})())}return s};p.prototype.removeEventListeners=function(){var v,u,y,x,t,w,s;w=this.listeners;s=[];for(x=0,t=w.length;x<t;x++){v=w[x];s.push((function(){var z,A;z=v.events;A=[];for(u in z){y=z[u];A.push(v.element.removeEventListener(u,y,false))}return A})())}return s};p.prototype.disable=function(){var u,w,t,v,s;this.clickableElements.forEach(function(x){return x.classList.remove("dz-clickable")});this.removeEventListeners();v=this.files;s=[];for(w=0,t=v.length;w<t;w++){u=v[w];s.push(this.cancelUpload(u))}return s};p.prototype.enable=function(){this.clickableElements.forEach(function(s){return s.classList.add("dz-clickable")});return this.setupEventListeners()};p.prototype.filesize=function(t){var s;if(t>=1024*1024*1024*1024/10){t=t/(1024*1024*1024*1024/10);s="TiB"}else{if(t>=1024*1024*1024/10){t=t/(1024*1024*1024/10);s="GiB"}else{if(t>=1024*1024/10){t=t/(1024*1024/10);s="MiB"}else{if(t>=1024/10){t=t/(1024/10);s="KiB"}else{t=t*10;s="b"}}}}return"<strong>"+(Math.round(t)/10)+"</strong> "+s};p.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};p.prototype.drop=function(u){var t,s;if(!u.dataTransfer){return}this.emit("drop",u);t=u.dataTransfer.files;if(t.length){s=u.dataTransfer.items;if(s&&s.length&&(s[0].webkitGetAsEntry!=null)){this._addFilesFromItems(s)}else{this.handleFiles(t)}}};p.prototype.paste=function(u){var s,t;if((u!=null?(t=u.clipboardData)!=null?t.items:void 0:void 0)==null){return}this.emit("paste",u);s=u.clipboardData.items;if(s.length){return this._addFilesFromItems(s)}};p.prototype.handleFiles=function(v){var u,w,t,s;s=[];for(w=0,t=v.length;w<t;w++){u=v[w];s.push(this.addFile(u))}return s};p.prototype._addFilesFromItems=function(u){var w,v,x,t,s;s=[];for(x=0,t=u.length;x<t;x++){v=u[x];if((v.webkitGetAsEntry!=null)&&(w=v.webkitGetAsEntry())){if(w.isFile){s.push(this.addFile(v.getAsFile()))}else{if(w.isDirectory){s.push(this._addFilesFromDirectory(w,w.name))}else{s.push(void 0)}}}else{if(v.getAsFile!=null){if((v.kind==null)||v.kind==="file"){s.push(this.addFile(v.getAsFile()))}else{s.push(void 0)}}else{s.push(void 0)}}}return s};p.prototype._addFilesFromDirectory=function(s,u){var t,v;t=s.createReader();v=(function(w){return function(x){var z,A,y;for(A=0,y=x.length;A<y;A++){z=x[A];if(z.isFile){z.file(function(B){if(w.options.ignoreHiddenFiles&&B.name.substring(0,1)==="."){return}B.fullPath=""+u+"/"+B.name;return w.addFile(B)})}else{if(z.isDirectory){w._addFilesFromDirectory(z,""+u+"/"+z.name)}}}}})(this);return t.readEntries(v,function(w){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(w):void 0:void 0})};p.prototype.accept=function(t,s){if(t.size>this.options.maxFilesize*1024*1024){return s(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!p.isValidFile(t,this.options.acceptedFiles)){return s(this.options.dictInvalidFileType)}else{if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){s(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",t)}else{return this.options.accept.call(this,t,s)}}}};p.prototype.addFile=function(s){s.upload={progress:0,total:s.size,bytesSent:0};this.files.push(s);s.status=p.ADDED;this.emit("addedfile",s);this._enqueueThumbnail(s);return this.accept(s,(function(t){return function(u){if(u){s.accepted=false;t._errorProcessing([s],u)}else{s.accepted=true;if(t.options.autoQueue){t.enqueueFile(s)}}return t._updateMaxFilesReachedClass()}})(this))};p.prototype.enqueueFiles=function(u){var t,v,s;for(v=0,s=u.length;v<s;v++){t=u[v];this.enqueueFile(t)}return null};p.prototype.enqueueFile=function(s){if(s.status===p.ADDED&&s.accepted===true){s.status=p.QUEUED;if(this.options.autoProcessQueue){return setTimeout(((function(t){return function(){return t.processQueue()}})(this)),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};p.prototype._thumbnailQueue=[];p.prototype._processingThumbnail=false;p.prototype._enqueueThumbnail=function(s){if(this.options.createImageThumbnails&&s.type.match(/image.*/)&&s.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(s);return setTimeout(((function(t){return function(){return t._processThumbnailQueue()}})(this)),0)}};p.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),(function(s){return function(){s._processingThumbnail=false;return s._processThumbnailQueue()}})(this))};p.prototype.removeFile=function(s){if(s.status===p.UPLOADING){this.cancelUpload(s)}this.files=n(this.files,s);this.emit("removedfile",s);if(this.files.length===0){return this.emit("reset")}};p.prototype.removeAllFiles=function(w){var t,v,s,u;if(w==null){w=false}u=this.files.slice();for(v=0,s=u.length;v<s;v++){t=u[v];if(t.status!==p.UPLOADING||w){this.removeFile(t)}}return null};p.prototype.createThumbnail=function(t,u){var s;s=new FileReader;s.onload=(function(v){return function(){var w;w=document.createElement("img");w.onload=function(){var z,y,C,E,A,x,D,B;t.width=w.width;t.height=w.height;C=v.options.resize.call(v,t);if(C.trgWidth==null){C.trgWidth=C.optWidth}if(C.trgHeight==null){C.trgHeight=C.optHeight}z=document.createElement("canvas");y=z.getContext("2d");z.width=C.trgWidth;z.height=C.trgHeight;j(y,w,(A=C.srcX)!=null?A:0,(x=C.srcY)!=null?x:0,C.srcWidth,C.srcHeight,(D=C.trgX)!=null?D:0,(B=C.trgY)!=null?B:0,C.trgWidth,C.trgHeight);E=z.toDataURL("image/png");v.emit("thumbnail",t,E);if(u!=null){return u()}};return w.src=s.result}})(this);return s.readAsDataURL(t)};p.prototype.processQueue=function(){var t,v,s,u;v=this.options.parallelUploads;s=this.getUploadingFiles().length;t=s;if(s>=v){return}u=this.getQueuedFiles();if(!(u.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(u.slice(0,v-s))}else{while(t<v){if(!u.length){return}this.processFile(u.shift());t++}}};p.prototype.processFile=function(s){return this.processFiles([s])};p.prototype.processFiles=function(u){var t,v,s;for(v=0,s=u.length;v<s;v++){t=u[v];t.processing=true;t.status=p.UPLOADING;this.emit("processing",t)}if(this.options.uploadMultiple){this.emit("processingmultiple",u)}return this.uploadFiles(u)};p.prototype._getFilesWithXhr=function(u){var s,t;return t=(function(){var y,w,x,v;x=this.files;v=[];for(y=0,w=x.length;y<w;y++){s=x[y];if(s.xhr===u){v.push(s)}}return v}).call(this)};p.prototype.cancelUpload=function(w){var u,v,z,x,t,s,y;if(w.status===p.UPLOADING){v=this._getFilesWithXhr(w.xhr);for(z=0,t=v.length;z<t;z++){u=v[z];u.status=p.CANCELED}w.xhr.abort();for(x=0,s=v.length;x<s;x++){u=v[x];this.emit("canceled",u)}if(this.options.uploadMultiple){this.emit("canceledmultiple",v)}}else{if((y=w.status)===p.ADDED||y===p.QUEUED){w.status=p.CANCELED;this.emit("canceled",w);if(this.options.uploadMultiple){this.emit("canceledmultiple",[w])}}}if(this.options.autoProcessQueue){return this.processQueue()}};p.prototype.uploadFile=function(s){return this.uploadFiles([s])};p.prototype.uploadFiles=function(E){var T,R,J,O,G,B,S,M,I,P,Y,N,F,u,K,Q,H,A,y,w,t,V,X,W,U,s,L,D,C,z,x,v;H=new XMLHttpRequest();for(A=0,V=E.length;A<V;A++){T=E[A];T.xhr=H}H.open(this.options.method,this.options.url,true);H.withCredentials=!!this.options.withCredentials;u=null;J=(function(Z){return function(){var ac,ab,aa;aa=[];for(ac=0,ab=E.length;ac<ab;ac++){T=E[ac];aa.push(Z._errorProcessing(E,u||Z.options.dictResponseError.replace("{{statusCode}}",H.status),H))}return aa}})(this);K=(function(Z){return function(aj){var ae,ab,ai,ag,af,ad,ac,aa,ah;if(aj!=null){ab=100*aj.loaded/aj.total;for(ai=0,ad=E.length;ai<ad;ai++){T=E[ai];T.upload={progress:ab,total:aj.total,bytesSent:aj.loaded}}}else{ae=true;ab=100;for(ag=0,ac=E.length;ag<ac;ag++){T=E[ag];if(!(T.upload.progress===100&&T.upload.bytesSent===T.upload.total)){ae=false}T.upload.progress=ab;T.upload.bytesSent=T.upload.total}if(ae){return}}ah=[];for(af=0,aa=E.length;af<aa;af++){T=E[af];ah.push(Z.emit("uploadprogress",T,ab,T.upload.bytesSent))}return ah}})(this);H.onload=(function(Z){return function(ab){var aa;if(E[0].status===p.CANCELED){return}if(H.readyState!==4){return}u=H.responseText;if(H.getResponseHeader("content-type")&&~H.getResponseHeader("content-type").indexOf("application/json")){try{u=JSON.parse(u)}catch(ac){ab=ac;u="Invalid JSON response from server."}}K();if(!((200<=(aa=H.status)&&aa<300))){return J()}else{return Z._finished(E,u,ab)}}})(this);H.onerror=(function(Z){return function(){if(E[0].status===p.CANCELED){return}return J()}})(this);F=(L=H.upload)!=null?L:H;F.onprogress=K;B={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){r(B,this.options.headers)}for(O in B){G=B[O];H.setRequestHeader(O,G)}R=new FormData();if(this.options.params){D=this.options.params;for(Y in D){Q=D[Y];R.append(Y,Q)}}for(y=0,X=E.length;y<X;y++){T=E[y];this.emit("sending",T,H,R)}if(this.options.uploadMultiple){this.emit("sendingmultiple",E,H,R)}if(this.element.tagName==="FORM"){C=this.element.querySelectorAll("input, textarea, select, button");for(w=0,W=C.length;w<W;w++){M=C[w];I=M.getAttribute("name");P=M.getAttribute("type");if(M.tagName==="SELECT"&&M.hasAttribute("multiple")){z=M.options;for(t=0,U=z.length;t<U;t++){N=z[t];if(N.selected){R.append(I,N.value)}}}else{if(!P||((x=P.toLowerCase())!=="checkbox"&&x!=="radio")||M.checked){R.append(I,M.value)}}}}for(S=s=0,v=E.length-1;0<=v?s<=v:s>=v;S=0<=v?++s:--s){R.append(this._getParamName(S),E[S],E[S].name)}return H.send(R)};p.prototype._finished=function(u,w,x){var t,v,s;for(v=0,s=u.length;v<s;v++){t=u[v];t.status=p.SUCCESS;this.emit("success",t,w,x);this.emit("complete",t)}if(this.options.uploadMultiple){this.emit("successmultiple",u,w,x);this.emit("completemultiple",u)}if(this.options.autoProcessQueue){return this.processQueue()}};p.prototype._errorProcessing=function(v,u,x){var t,w,s;for(w=0,s=v.length;w<s;w++){t=v[w];t.status=p.ERROR;this.emit("error",t,u,x);this.emit("complete",t)}if(this.options.uploadMultiple){this.emit("errormultiple",v,u,x);this.emit("completemultiple",v)}if(this.options.autoProcessQueue){return this.processQueue()}};return p})(g);l.version="3.10.2";l.options={};l.optionsForElement=function(p){if(p.getAttribute("id")){return l.options[f(p.getAttribute("id"))]}else{return void 0}};l.instances=[];l.forElement=function(p){if(typeof p==="string"){p=document.querySelector(p)}if((p!=null?p.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return p.dropzone};l.autoDiscover=true;l.discover=function(){var u,r,s,t,q,p;if(document.querySelectorAll){s=document.querySelectorAll(".dropzone")}else{s=[];u=function(z){var x,y,w,v;v=[];for(y=0,w=z.length;y<w;y++){x=z[y];if(/(^| )dropzone($| )/.test(x.className)){v.push(s.push(x))}else{v.push(void 0)}}return v};u(document.getElementsByTagName("div"));u(document.getElementsByTagName("form"))}p=[];for(t=0,q=s.length;t<q;t++){r=s[t];if(l.optionsForElement(r)!==false){p.push(new l(r))}else{p.push(void 0)}}return p};l.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];l.isBrowserSupported=function(){var q,r,t,p,s;q=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){q=false}else{s=l.blacklistedBrowsers;for(t=0,p=s.length;t<p;t++){r=s[t];if(r.test(navigator.userAgent)){q=false;continue}}}}else{q=false}return q};n=function(u,r){var s,t,q,p;p=[];for(t=0,q=u.length;t<q;t++){s=u[t];if(s!==r){p.push(s)}}return p};f=function(p){return p.replace(/[\-_](\w)/g,function(q){return q.charAt(1).toUpperCase()})};l.createElement=function(p){var q;q=document.createElement("div");q.innerHTML=p;return q.childNodes[0]};l.elementInside=function(q,p){if(q===p){return true}while(q=q.parentNode){if(q===p){return true}}return false};l.getElement=function(r,p){var q;if(typeof r==="string"){q=document.querySelector(r)}else{if(r.nodeType!=null){q=r}}if(q==null){throw new Error("Invalid `"+p+"` option provided. Please provide a CSS selector or a plain HTML element.")}return q};l.getElements=function(v,q){var x,s,p,u,t,y,r,w;if(v instanceof Array){p=[];try{for(u=0,y=v.length;u<y;u++){s=v[u];p.push(this.getElement(s,q))}}catch(z){x=z;p=null}}else{if(typeof v==="string"){p=[];w=document.querySelectorAll(v);for(t=0,r=w.length;t<r;t++){s=w[t];p.push(s)}}else{if(v.nodeType!=null){p=[v]}}}if(!((p!=null)&&p.length)){throw new Error("Invalid `"+q+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return p};l.confirm=function(p,r,q){if(window.confirm(p)){return r()}else{if(q!=null){return q()}}};l.isValidFile=function(s,p){var r,v,t,u,q;if(!p){return true}p=p.split(",");v=s.type;r=v.replace(/\/.*$/,"");for(u=0,q=p.length;u<q;u++){t=p[u];t=t.trim();if(t.charAt(0)==="."){if(s.name.toLowerCase().indexOf(t.toLowerCase(),s.name.length-t.length)!==-1){return true}}else{if(/\/\*$/.test(t)){if(r===t.replace(/\/.*$/,"")){return true}}else{if(v===t){return true}}}}return false};if(typeof d!=="undefined"&&d!==null){d.fn.dropzone=function(p){return this.each(function(){return new l(this,p)})}}if(typeof b!=="undefined"&&b!==null){b.exports=l}else{window.Dropzone=l}l.ADDED="added";l.QUEUED="queued";l.ACCEPTED=l.QUEUED;l.UPLOADING="uploading";l.PROCESSING=l.UPLOADING;l.CANCELED="canceled";l.ERROR="error";l.SUCCESS="success";e=function(t){var r,p,z,s,u,y,q,x,v,w;q=t.naturalWidth;y=t.naturalHeight;p=document.createElement("canvas");p.width=1;p.height=y;z=p.getContext("2d");z.drawImage(t,0,0);s=z.getImageData(0,0,1,y).data;w=0;u=y;x=y;while(x>w){r=s[(x-1)*4+3];if(r===0){u=x}else{w=x}x=(u+w)>>1}v=x/y;if(v===0){return 1}else{return v}};j=function(x,q,v,u,w,r,z,y,p,t){var s;s=e(q);return x.drawImage(q,v,u,w,r,z,y,p,t/s)};i=function(r,v){var A,w,q,z,s,p,y,u,t;q=false;t=true;w=r.document;u=w.documentElement;A=(w.addEventListener?"addEventListener":"attachEvent");y=(w.addEventListener?"removeEventListener":"detachEvent");p=(w.addEventListener?"":"on");z=function(B){if(B.type==="readystatechange"&&w.readyState!=="complete"){return}(B.type==="load"?r:w)[y](p+B.type,z,false);if(!q&&(q=true)){return v.call(r,B.type||B)}};s=function(){var B;try{u.doScroll("left")}catch(C){B=C;setTimeout(s,50);return}return z("poll")};if(w.readyState!=="complete"){if(w.createEventObject&&u.doScroll){try{t=!r.frameElement}catch(x){}if(t){s()}}w[A](p+"DOMContentLoaded",z,false);w[A](p+"readystatechange",z,false);return r[A](p+"load",z,false)}};l._autoDiscoverFunction=function(){if(l.autoDiscover){return l.discover()}};i(window,l._autoDiscoverFunction)}).call(this);return b.exports}));