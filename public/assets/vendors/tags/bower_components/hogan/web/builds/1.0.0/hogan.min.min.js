var HoganTemplate=(function(){function r(a){this.text=a}r.prototype={r:function(a,b){return""},v:q,render:function s(a,b){return this.r(a,b)},rp:function(a,d,e,c){var b=e[a];if(!b){return""}return b.render(d,e)},rs:function(e,f,d){var b="";var c=e[e.length-1];if(!n(c)){b=d(e,f);return b}for(var a=0;a<c.length;a++){e.push(c[a]);b+=d(e,f);e.pop()}return b},s:function(e,b,g,a,d,c){if(n(e)&&e.length===0){return false}if(!a&&typeof e=="function"){e=this.ls(e,b,g,d,c)}var f=(e==="")||!!e;if(!a&&f&&b){b.push((typeof e=="object")?e:b[b.length-1])}return f},d:function(g,b,h,f){if(g==="."&&n(b[b.length-2])){return b[b.length-1]}var e=g.split(".");var d=this.f(e[0],b,h,f);var c=null;for(var a=1;a<e.length;a++){if(d&&typeof d=="object"&&e[a] in d){c=d;d=d[e[a]]}else{d=""}}if(f&&!d){return false}if(!f&&typeof d=="function"){b.push(c);d=this.lv(d,b,h);b.pop()}return d},f:function(g,c,h,f){var d=false;var b=null;var e=false;for(var a=c.length-1;a>=0;a--){b=c[a];if(b&&typeof b=="object"&&g in b){d=b[g];e=true;break}}if(!e){return(f)?false:""}if(!f&&typeof d=="function"){d=this.lv(d,c,h)}return d},ho:function(d,c,a,e){var b=d.call(c,e,function(g){return Hogan.compile(g).render(c)});var f=Hogan.compile(b.toString()).render(c,a);this.b=f;return false},b:"",ls:function(e,a,f,d,b){var c=a[a.length-1];if(e.length>0){return this.ho(e,c,f,this.text.substring(d,b))}var g=e.call(c);if(typeof g=="function"){return this.ho(g,c,f,this.text.substring(d,b))}return g},lv:function(d,b,a){var c=b[b.length-1];return Hogan.compile(d.call(c).toString()).render(c,a)}};var m=/&/g,p=/</g,t=/>/g,k=/\'/g,l=/\"/g,o=/[&<>\"\']/;function q(a){var b=String(a===null?"":a);return o.test(b)?b.replace(m,"&amp;").replace(p,"&lt;").replace(t,"&gt;").replace(k,"&#39;").replace(l,"&quot;"):b}var n=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};return r})();var Hogan=(function(){function F(o){var c=o.length,j=0,r=1,l=2,h=j,s=null,b="",m=[],p=false,d=0,i=0,n="{{",e="}}";function g(){if(b.length>0){m.push(new String(b));b=""}}function f(){var t=true;for(var u=i;u<m.length;u++){t=(m[u].tag&&R[m[u].tag]<R._v)||(!m[u].tag&&m[u].match(M)==null);if(!t){return false}}return t}function k(t,v){g();if(t&&f()){for(var u=i;u<m.length;u++){if(!m[u].tag){m.splice(u,1)}}}else{if(!v){m.push({tag:"\n"})}}p=false;i=m.length}function q(t,U){var u="="+e;var V=t.indexOf(u,U);var v=B(t.substring(t.indexOf("=",U)+1,V)).split(" ");n=v[0];e=v[1];return V+u.length-1}for(d=0;d<c;d++){if(h==j){if(w(n,o,d)){--d;g();h=r}else{if(o[d]=="\n"){k(p)}else{b+=o[d]}}}else{if(h==r){d+=n.length-1;var a=R[o[d+1]];s=a?o[d+1]:"_v";p=d;if(s=="="){d=q(o,d);h=j}else{if(a){d++}h=l}}else{if(w(e,o,d)){d+=e.length-1;m.push({tag:s,n:B(b),i:(s=="/")?p-1:d+1});b="";h=j;if(s=="{"){d++}}else{b+=o[d]}}}}k(p,true);return m}function B(a){if(a.trim){return a.trim()}return a.replace(/^\s*|\s*$/g,"")}var M=/\S/;var R={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};function w(c,b,e){if(b[e]!=c[0]){return false}for(var d=1,a=c.length;d<a;d++){if(b[e+d]!=c[d]){return false}}return true}function Q(e,d,b,g){var c=[],a=null,f=null;while(e.length>0){f=e.shift();if(f.tag=="#"||f.tag=="^"||N(f,g)){b.push(f);f.nodes=Q(e,f.tag,b,g);c.push(f)}else{if(f.tag=="/"){if(b.length==0){throw new Error("Closing tag without opener: /"+f.n)}a=b.pop();if(f.n!=a.n&&!L(f.n,a.n,g)){throw new Error("Nesting error: "+a.n+" vs. "+f.n)}a.end=f.i;return c}else{c.push(f)}}}if(b.length>0){throw new Error("missing closing tag: "+b.pop().n)}return c}function N(c,a){for(var d=0,b=a.length;d<b;d++){if(a[d].o==c.n){c.tag="#";return true}}}function L(b,e,a){for(var d=0,c=a.length;d<c;d++){if(a[d].c==b&&a[d].o==e){return true}}}function C(c,b,a){var d='var c = [cx];var b = "";var _ = this;'+z(c)+"return b;";if(a.asString){return"function(cx,p){"+d+";};"}var e=new HoganTemplate(b);e.r=new Function("cx","p",d);return e}var I=/\"/g,E=/\n/g,H=/\r/g,y=/\\/g;function x(a){return a.replace(y,"\\\\").replace(I,'\\"').replace(E,"\\n").replace(H,"\\r")}function J(a){return(~a.indexOf("."))?"d":"f"}function z(b){var a="";for(var d=0,e=b.length;d<e;d++){var c=b[d].tag;if(c=="#"){a+=K(b[d].nodes,b[d].n,J(b[d].n),b[d].i,b[d].end)}else{if(c=="^"){a+=A(b[d].nodes,b[d].n,J(b[d].n))}else{if(c=="<"||c==">"){a+=O(b[d].n)}else{if(c=="{"||c=="&"){a+=P(b[d].n,J(b[d].n))}else{if(c=="\n"){a+=G("\n")}else{if(c=="_v"){a+=D(b[d].n,J(b[d].n))}else{if(c===undefined){a+=G(b[d])}}}}}}}}return a}function K(b,f,a,d,c){var e="if(_.s(_."+a+'("'+x(f)+'",c,p,1),';e+="c,p,0,"+d+","+c+")){";e+="b += _.rs(c,p,";e+='function(c,p){ var b = "";';e+=z(b);e+="return b;});c.pop();}";e+='else{b += _.b; _.b = ""};';return e}function A(b,c,d){var a="if (!_.s(_."+d+'("'+x(c)+'",c,p,1),c,p,1,0,0)){';a+=z(b);a+="};";return a}function O(a){return'b += _.rp("'+x(a)+'",c[c.length - 1],p);'}function P(a,b){return"b += (_."+b+'("'+x(a)+'",c,p,0));'}function D(a,b){return"b += (_.v(_."+b+'("'+x(a)+'",c,p,0)));'}function G(a){return'b += "'+x(a)+'";'}return({scan:F,parse:function(a,b){b=b||{};return Q(a,"",[],b.sectionTags||[])},cache:{},compile:function(c,b){b=b||{};var a=this.cache[c];if(a){return a}a=C(this.parse(F(c),b),c,b);return this.cache[c]=a}})})();if(typeof module!=="undefined"&&module.exports){module.exports=Hogan;module.exports.Template=HoganTemplate}else{if(typeof exports!=="undefined"){exports.Hogan=Hogan;exports.HoganTemplate=HoganTemplate}};