var Hogan=Hogan||require("../lib/hogan");var doc=this["document"];var fs=require("fs");var path=require("path");var passed=0;var failed=0;if(!this["output"]){var output=function(a){return doc?doc.write(a+"<br/>"):console.log(a)}}function runTest(a){a.forEach(function(g){var d={};for(var c in g.partials){d[c]=Hogan.compile(g.partials[c])}var b=Hogan.compile(g.template);if(g.data.lambda){var f=(new Function("return "+g.data.lambda.js)());g.data.lambda=function(){return f}}var e=b.render(g.data,d);is(e,g.expected,g.name+": "+g.desc)})}var testDir=path.join(__dirname,"spec/specs");var files=fs.readdirSync(testDir).filter(function(a){return a.indexOf(".json")>0}).map(function(a){return testDir+"/"+a});for(var i=0;i<files.length;i++){var test=JSON.parse(fs.readFileSync(files[i]).toString());runTest(test.tests)}function is(a,b,c){if(a===b){output("OK:   "+c);++passed}else{output("FAIL: "+c);output("Expected |"+b+"|");output("     Got |"+a+"|");++failed}}function complete(){output("\nTests Complete");output("--------------");output("Passed: "+passed);output("Failed: "+failed);output("\n")}complete();